<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"gudqs7.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="å¿ƒç´¯æ²¡é’±èººå°¸ä¸­">
<meta property="og:type" content="website">
<meta property="og:title" content="gudqs7&#39;s note">
<meta property="og:url" content="https://gudqs7.github.io/index.html">
<meta property="og:site_name" content="gudqs7&#39;s note">
<meta property="og:description" content="å¿ƒç´¯æ²¡é’±èººå°¸ä¸­">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="gudqs7">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://gudqs7.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>gudqs7's note</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">gudqs7's note</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">å¿ƒç´¯æ²¡é’±èººå°¸ä¸­</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://gudqs7.github.io/2021/01/23/source-code-spring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="gudqs7">
      <meta itemprop="description" content="å¿ƒç´¯æ²¡é’±èººå°¸ä¸­">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gudqs7's note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/23/source-code-spring/" class="post-title-link" itemprop="url">Springæºç ç¬”è®°</a>
        </h2>

        <div class="post-meta">
			
				<i class="fa fa-thumb-tack"></i>
				<font color="RED">ç½®é¡¶</font>
				<span class="post-meta-divider">|</span>
			
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-01-23 18:28:28" itemprop="dateCreated datePublished" datetime="2021-01-23T18:28:28+08:00">2021-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-01-24 01:51:01" itemprop="dateModified" datetime="2021-01-24T01:51:01+08:00">2021-01-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/SourceCode/" itemprop="url" rel="index"><span itemprop="name">SourceCode</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2021/01/23/source-code-spring/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/01/23/source-code-spring/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Springæºç åˆ†æ"><a href="#Springæºç åˆ†æ" class="headerlink" title="Springæºç åˆ†æ"></a>Springæºç åˆ†æ</h1><h2 id="å…³é”®ç±»ä»‹ç»"><a href="#å…³é”®ç±»ä»‹ç»" class="headerlink" title="å…³é”®ç±»ä»‹ç»"></a>å…³é”®ç±»ä»‹ç»</h2><h3 id="ApplicationContext"><a href="#ApplicationContext" class="headerlink" title="ApplicationContext"></a>ApplicationContext</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">ä¸‡èƒ½çš„ applicationContext, ä½†å®é™…ä¸Šå„ç§èƒ½åŠ›éƒ½æ˜¯ä¾èµ–äºå…¶ä»–çš„ç±», æ¯”å¦‚ getBean æ˜¯ beanFactory çš„, publishEvent æ˜¯äº‹ä»¶å¹¿æ’­å™¨çš„, ç­‰ç­‰. å…¶æœ¬èº«æ˜¯ä¸€ä¸ªç»¼åˆä½“, æ•´åˆè¿™äº›èƒ½åŠ›, ä¾¿äºå¼€å‘è€…è°ƒç”¨å’Œç†è§£.</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é¢åˆ—ä¸€ä¸‹ç›¸å…³çš„æ¥å£, æŠ½è±¡ç±», å’Œå…·ä½“ç±»</span></span><br><span class="line">ApplicationContext</span><br><span class="line">	æ˜¯ä¸€ä¸ªåªè¯»çš„ bean å®¹å™¨</span><br><span class="line">	å¯ä»¥åŠ è½½è§£æé…ç½®æ–‡ä»¶(å¦‚xml)</span><br><span class="line">	å¯ä»¥å‘å¸ƒäº‹ä»¶å’Œæ³¨å†Œç›‘å¬</span><br><span class="line">	å…·æœ‰å›½é™…åŒ–æ¶ˆæ¯å¤„ç†èƒ½åŠ›</span><br><span class="line">ConfigurableApplicationContext</span><br><span class="line">	æ˜¯ä¸€ä¸ªå…·æœ‰å¯é…ç½®èƒ½åŠ›çš„ å®¹å™¨(å¯è®¾ç½®å„ä¸ªå‚æ•°, å¦‚id, çˆ¶å®¹å™¨)</span><br><span class="line">	å…·æœ‰å®¹å™¨ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µ, å¦‚å¯åŠ¨,åœæ­¢,å…³é—­.</span><br><span class="line">AbstractApplicationContext</span><br><span class="line">	æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„æŠ½è±¡ç±», å®šä¹‰äº†å®¹å™¨çš„æ¨¡æ¿(refreshæ–¹æ³•), ä½†ç”±å…·ä½“çš„å­ç±»å®ç°éƒ¨åˆ†æ–¹æ³•</span><br><span class="line">	ç®¡ç†Beanå’ŒBeanFactoryçš„PostProcessor</span><br><span class="line">	ç®¡ç†äº‹ä»¶çš„ç›‘å¬å’Œå¤„ç†</span><br><span class="line">AbstractRefreshableApplicationContext</span><br><span class="line">	ä¸ºå¯é‡å¤åˆ·æ–°çš„å®¹å™¨æä¾›åŸºç±»</span><br><span class="line">	åŠ å…¥äº†BeanFactoryçš„ç®¡ç†(åˆ›å»º/å…³é—­ç­‰)</span><br><span class="line">AbstractRefreshableConfigApplicationContext</span><br><span class="line">	åŠ å…¥äº†configLocationå­—æ®µ, ç”¨äºæŸäº›å®¹å™¨åˆå§‹åŒ–BeanFactoryå’ŒBean</span><br><span class="line">AbstractXmlApplicationContext</span><br><span class="line">	å®šä¹‰äº†è¯»å–xmlé…ç½®æ–‡ä»¶æ¥åŠ è½½BeanFactoryçš„ä»£ç , ä½¿å¾—å­ç±»åªéœ€æä¾›é…ç½®æ–‡ä»¶åœ°å€æˆ–Resource</span><br><span class="line">ClassPathXmlApplicationContext</span><br><span class="line">	ç»§æ‰¿åŸºç±», æä¾›é…ç½®æ–‡ä»¶åœ°å€çš„æ„é€ æ–¹æ³•, è°ƒç”¨refreshåŠ è½½BeanFactory</span><br></pre></td></tr></table></figure>

<h3 id="BeanFactory"><a href="#BeanFactory" class="headerlink" title="BeanFactory"></a>BeanFactory</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">1.æ ¸å¿ƒä¸­çš„æ ¸å¿ƒ, åŠ è½½å’Œç®¡ç† beanDefinitions(Beané…ç½®ä¿¡æ¯), åˆ›å»ºå’Œç®¡ç† bean å¯¹è±¡å®ä¾‹, æ³¨å†Œå’Œç®¡ç† BeanPostProcessor(Beanæ‰©å±•)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é¢åˆ—ä¸€ä¸‹ç›¸å…³çš„æ¥å£, æŠ½è±¡ç±», å’Œå…·ä½“ç±»</span></span><br><span class="line">BeanFactory</span><br><span class="line">  å®šä¹‰äº† Bean çš„åŸºç¡€æ“ä½œæ¥å£, å¦‚ getBean, getType, isSingleton ç­‰</span><br><span class="line"></span><br><span class="line">SingletonBeanRegistry</span><br><span class="line">  å®šä¹‰äº†å•ä¾‹å¯¹è±¡çš„æ“ä½œæ¥å£ (æ³¨å†Œ/è·å–/æ˜¯å¦å·²å­˜åœ¨) </span><br><span class="line"></span><br><span class="line">HierarchicalBeanFactory</span><br><span class="line">  å®šä¹‰äº†çˆ¶ BeanFactory çš„ç›¸å…³æ“ä½œæ¥å£(è·å–)</span><br><span class="line"></span><br><span class="line">ConfigurableBeanFactory</span><br><span class="line">  å®šä¹‰äº†å¯¹ BeanFactory åšå„ç§é…ç½®çš„æ“ä½œæ¥å£, åŒ…æ‹¬ BeanPostProcessor, setParentBeanFactory, destroyBean, registerAlias, resolveAliases ç­‰</span><br><span class="line"></span><br><span class="line">DefaultSingletonBeanRegistry</span><br><span class="line">  å®ç°äº† SingletonBeanRegistry æ¥å£, å³å®ç°äº†å•ä¾‹å¯¹è±¡çš„ç¼“å­˜ç®¡ç†, åŒ…æ‹¬ä¸€çº§/äºŒçº§/ä¸‰çº§(äºŒçº§ä¸‰çº§åªä¾èµ–å¾ªç¯ç”¨ä¸Šçš„ä¸¤ä¸ªç¼“å­˜)</span><br><span class="line">  </span><br><span class="line">FactoryBeanRegistrySupport</span><br><span class="line">  ç»§æ‰¿äº† DefaultSingletonBeanRegistry</span><br><span class="line">	å®ç°å¯¹ä½¿ç”¨ FactoryBean å­˜å‚¨å’Œè·å– bean å¯¹è±¡å®ä¾‹æ–¹å¼çš„æ”¯æŒ</span><br><span class="line">	</span><br><span class="line">AbstractBeanFactory</span><br><span class="line">  ç»§æ‰¿äº† FactoryBeanRegistrySupport</span><br><span class="line">  å®ç°äº† BeanFactory/HierarchicalBeanFactory/ConfigurableBeanFactory å®šä¹‰çš„æ¥å£</span><br><span class="line">  å®ç°äº†å…·ä½“ getBean, åŒ…æ‹¬ç¼“å­˜ç®¡ç†ç­‰</span><br><span class="line">  </span><br><span class="line">AutowireCapableBeanFactory</span><br><span class="line">  å®šä¹‰äº†æ ¹æ® class ç±»å‹è·å– BeanDefinition ä¿¡æ¯ä»¥åŠ Bean å¯¹è±¡çš„æ¥å£</span><br><span class="line"></span><br><span class="line">AbstractAutowireCapableBeanFactory</span><br><span class="line">  ç»§æ‰¿è‡ª AbstractBeanFactory </span><br><span class="line">  å®ç°äº† AutowireCapableBeanFactory ä¸­å®šä¹‰çš„æ–¹æ³•(å°±æ˜¯å®ç°äº†æ ¹æ® class è·å– bean æˆ– BeanDefinition)</span><br><span class="line">  å®ç°äº† createBean, ä¹Ÿå°±æ˜¯çœŸæ­£çš„å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡çš„è¿‡ç¨‹, åŒ…æ‹¬å®ä¾‹åŒ–, ä¸ºéœ€è¦èµ‹å€¼çš„å­—æ®µæ³¨å…¥ç›¸åº”çš„å€¼</span><br><span class="line">  åŒæ—¶è§¦å‘äº† BeanPostProcessor çš„æ–¹æ³•è°ƒç”¨</span><br><span class="line">  </span><br><span class="line">BeanDefinitionRegistry</span><br><span class="line">  å®šä¹‰äº† BeanDefinition çš„æ³¨å†Œ/è·å–/ç§»é™¤</span><br><span class="line">  </span><br><span class="line">ListableBeanFactory</span><br><span class="line">	å®šä¹‰äº† BeanDefinition çš„å¯éå†æ€§</span><br><span class="line">  </span><br><span class="line">ConfigurableListableBeanFactory</span><br><span class="line">  ç»“åˆ ListableBeanFactory å’Œ ConfigurableBeanFactory å¹¶è¡¥å……å®Œå–„äº†å‡ ä¸ªç›¸å…³æ¥å£ (å¦‚ getBeanNamesIterator æ¥å£ )</span><br><span class="line"></span><br><span class="line">DefaultListableBeanFactory</span><br><span class="line">  ç»§æ‰¿äº† AbstractAutowireCapableBeanFactory</span><br><span class="line">  å®ç°äº† BeanDefinitionRegistry/ConfigurableListableBeanFactory çš„æ¥å£</span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ€»ç»“:</span></span><br><span class="line">å®šä¹‰å¤„:</span><br><span class="line">BeanFactory(getBean)</span><br><span class="line">SingletonBeanRegistry(addSingleton)</span><br><span class="line">HierarchicalBeanFactory(getParentBeanFactory)</span><br><span class="line">ConfigurableBeanFactory(addBeanPostProcessor)</span><br><span class="line">AutowireCapableBeanFactory(autowireBean)</span><br><span class="line">BeanDefinitionRegistry(registerBeanDefinition)</span><br><span class="line">ListableBeanFactory(getBeanDefinitionNames)</span><br><span class="line">ConfigurableListableBeanFactory(getBeanNamesIterator)</span><br><span class="line"></span><br><span class="line">å®ç°å¤„:</span><br><span class="line">DefaultSingletonBeanRegistry(registerSingleton)</span><br><span class="line">FactoryBeanRegistrySupport(getObjectFromFactoryBean)</span><br><span class="line">AbstractBeanFactory(doGetBean)</span><br><span class="line">AbstractAutowireCapableBeanFactory(createBean)</span><br><span class="line">DefaultListableBeanFactory(registerBeanDefinition)</span><br></pre></td></tr></table></figure>





<h2 id="å®¹å™¨åˆå§‹åŒ–è¿‡ç¨‹"><a href="#å®¹å™¨åˆå§‹åŒ–è¿‡ç¨‹" class="headerlink" title="å®¹å™¨åˆå§‹åŒ–è¿‡ç¨‹"></a>å®¹å™¨åˆå§‹åŒ–è¿‡ç¨‹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.setParent(): å¤„ç†çˆ¶å®¹å™¨ </span><br><span class="line">2.setConfigLocations(): è§£æå¹¶è®¾ç½®xmlé…ç½®æ–‡ä»¶è·¯å¾„</span><br><span class="line">3.refresh(): åˆ›å»º beanFactory å¯¹è±¡å¹¶åˆå§‹åŒ–, è¯»å– xml é…ç½®æ–‡ä»¶å¾—åˆ° beanDefinitions, æ¥ç€å¤„ç†ä¸¤ç§ PostProcessor, ç„¶åæ·»åŠ å›½é™…åŒ–å¤„ç†å™¨å’Œäº‹ä»¶å¹¿æ’­å™¨ä»¥åŠç›¸åº”çš„åˆå§‹åŒ–å’Œä¸€äº›å¤„ç†, æœ€åå®ä¾‹åŒ–å•ä¾‹çš„ bean ç­‰ç­‰.</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¤–åœˆç»“æŸ, å†çœ‹ refresh() é‡Œé¢çš„æ¯ä¸ªæ–¹æ³•</span></span><br><span class="line">1.prepareRefresh(): å‡†å¤‡å·¥ä½œ, ä¸€äº›å­—æ®µå€¼çš„è®¾ç½®å’Œå¤„ç†.</span><br><span class="line">2.obtainFreshBeanFactory(): åˆ›å»ºä¸€ä¸ª beanFactory å¯¹è±¡å¹¶æ³¨å†Œåˆ° applicationContext (å³èµ‹å€¼åˆ°å­—æ®µä¸Š), ç„¶åè§£æ xml é…ç½®æ–‡ä»¶(æˆ–æ³¨è§£é…ç½®)çš„ä¿¡æ¯, è§£æå¾—åˆ° beanDefinitions å¹¶æ³¨å†Œåˆ°å®¹å™¨ä¸­.</span><br><span class="line">3.ç„¶åæ˜¯ä¸€äº›å¯¹ beanFactory å¯¹è±¡çš„å®Œå–„é…ç½®çš„ä»£ç </span><br><span class="line">4.æ‰«æå¹¶æ‰§è¡Œ BeanFactoryPostProcessor(å…¶ä½œç”¨æ˜¯ä¸ºbeanFactoryå¯¹è±¡æ·»åŠ ä¸œè¥¿æä¾›æ‰©å±•æ€§), å…¶ä¸­æˆ‘è®¤è¯†çš„å°±åªæœ‰ ConfigurationClassPostProcessor(è¿™ä¸ªç±»ä½œç”¨å°±æ˜¯è§£æ @Configuration/@Component/@Import/@ImportSource/@ComponentScanç­‰åŸºç¡€æ³¨è§£).</span><br><span class="line">5.æ‰«æå®ç°äº† BeanPostProcessor æ¥å£çš„ bean å¹¶æ³¨å†Œåˆ° beanFactory ä¸­å­˜èµ·æ¥, ç­‰ createBean åˆ›å»ºå¯¹è±¡æ—¶ä¼šåœ¨å¯¹åº”çš„æ—¶æœºæ‰§è¡Œä¸€äº›å¯¹åº”çš„æ–¹æ³•(é’©å­). å¸¸è§çš„å„ç§ XxxAware å°±æ˜¯é è¿™ä¸ªå®ç°çš„å’¯.</span><br><span class="line">6.æ¥ç€, åˆå§‹åŒ–å›½é™…åŒ–èµ„æºå¤„ç†å™¨, äº‹ä»¶å¹¿æ’­å™¨, å¹¶æ³¨å†Œä¸€äº›éœ€è¦æ³¨å†Œçš„äº‹ä»¶(ä¹Ÿæ³¨å†Œå®¹å™¨å†…å®ç°å¯¹åº”æ¥å£çš„ bean)</span><br><span class="line">7.å¤„ç†ä¸€äº› beanFactory çš„é…ç½®, æ¥ç€ä¸ºæ‰€æœ‰å•ä¾‹ä¸”éæ‡’åŠ è½½çš„(ä¸å°±æ˜¯é»˜è®¤ç­–ç•¥å˜›) bean åˆ›å»ºå®ä¾‹, ç¼“å­˜èµ·æ¥.</span><br><span class="line">8.å¹¿æ’­å®¹å™¨åŠ è½½å®Œæˆäº†çš„äº‹ä»¶. ä»¥åŠå¤„ç†ç”Ÿå‘½å‘¨æœŸ.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æœ€åæ€»ç»“ä¸‹, å…ˆåˆ›å»ºå®¹å™¨, å†å°†æ ¹æ®é…ç½®æ–‡ä»¶è§£æå¾—åˆ° BeanDefinition æ³¨å†Œåˆ°å®¹å™¨ä¸­, ç„¶åå¤„ç†ä¸¤å¤§æ‰©å±•(BeanFactoryPostProcessor/BeanPostProcessor), æ¥ç€æ˜¯Springçš„å›½é™…åŒ–, ä»¥åŠç›¸å½“æœ‰ç”¨çš„äº‹ä»¶å¹¿æ’­å™¨, æœ€åå®ä¾‹åŒ– bean. æ•´ä½“æ„Ÿè§‰å…¶å®å¾ˆç®€å•, ä½†å…¶å®æœ‰å¤§é‡çš„å·¥ä½œäº¤ç»™äº† BeanPostProcessor.</p>
</blockquote>
<h3 id="è¶…é•¿æºç åˆ†æè¿‡ç¨‹"><a href="#è¶…é•¿æºç åˆ†æè¿‡ç¨‹" class="headerlink" title="è¶…é•¿æºç åˆ†æè¿‡ç¨‹"></a>è¶…é•¿æºç åˆ†æè¿‡ç¨‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…ˆéšä¾¿å†™ä¸ª main æ–¹æ³•, å¦‚æˆ‘å†™çš„, å¯æµ‹è¯•ä¾èµ–å¾ªç¯é—®é¢˜å’Œäº‹ä»¶ç›‘å¬:</span></span><br><span class="line"><span class="comment">// åŒ…å: cn.gudqs7.spring.tests, æ”¹åŠ¨åˆ™éœ€åŒæ­¥ä¿®æ”¹xmlå“¦</span></span><br><span class="line"><span class="comment">// è¿›å…¥å¯¹åº”ç±»ä»£ç : å¿«æ·é”® Cmd+Option+é¼ æ ‡ç‚¹å‡» (æˆ– Ctrl+Alt+é¼ æ ‡å·¦é”® ); å¦‚æœæ˜¯æ¥å£æ¾å¼€ Option(æˆ–Alt)é”®</span></span><br><span class="line"></span><br><span class="line">Test.java</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		ApplicationContext xmlContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"application-wq.xml"</span>);</span><br><span class="line">		UserServiceImpl userService = xmlContext.getBean(UserServiceImpl<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">		userService.sayHi();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">application-wq.xml</span><br><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> ?&gt;</span><br><span class="line">&lt;beans xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">       xmlns=<span class="string">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span> <span class="keyword">default</span>-autowire=<span class="string">"byName"</span>&gt;</span><br><span class="line"></span><br><span class="line">	&lt;bean name=<span class="string">"userService"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"cn.gudqs7.spring.tests.UserServiceImpl"</span>&gt;</span><br><span class="line">		&lt;property name="starter"&gt;&lt;ref bean="serverStarter"/&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;bean name=<span class="string">"serverStarter"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"cn.gudqs7.spring.tests.ServerStarter"</span>&gt;</span><br><span class="line">		&lt;property name="userService"&gt;&lt;ref bean="userService"/&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">UserServiceImpl.java</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> ServerStarter starter;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(starter);</span><br><span class="line">		System.out.println(<span class="string">"Hello Spring!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStarter</span><span class="params">(ServerStarter starter)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.starter = starter;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ServerStarter.java</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerStarter</span> <span class="keyword">implements</span> <span class="title">ApplicationListener</span>&lt;<span class="title">ContextRefreshedEvent</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Inject</span></span><br><span class="line">	<span class="keyword">private</span> UserServiceImpl userService;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onApplicationEvent</span><span class="params">(ContextRefreshedEvent event)</span> </span>&#123;</span><br><span class="line">		String applicationName = event.getApplicationContext().getApplicationName();</span><br><span class="line">		System.out.println(applicationName);</span><br><span class="line">		System.out.println(userService);</span><br><span class="line">		System.out.println(<span class="string">"========== started by gudqs7 =============="</span>);</span><br><span class="line">		System.out.println(<span class="string">"========== started by gudqs7 =============="</span>);</span><br><span class="line">		System.out.println(<span class="string">"========== started by gudqs7 =============="</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserService</span><span class="params">(UserServiceImpl userService)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.userService = userService;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¥ä¸‹æ¥, è¿›å…¥ClassPathXmlApplicationContext#ClassPathXmlApplicationContext(java.lang.String) æ–¹æ³•ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¶è·³è½¬åˆ°äº†</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">ClassPathXmlApplicationContext</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">			String[] configLocations, <span class="keyword">boolean</span> refresh, @Nullable ApplicationContext parent)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// ä¸ºå®¹å™¨çš„ parent å­—æ®µèµ‹å€¼, è‹¥ parent ä¸ä¸ºç©º, ä¸”æœ‰ ConfigurableEnvironment, åˆ™åˆå¹¶æ•°æ®(å°†çˆ¶å®¹å™¨æœ‰çš„åŠ åˆ°å­å®¹å™¨ä¸­)</span></span><br><span class="line">		<span class="comment">// å³æ‰§è¡Œäº† org.springframework.context.support.AbstractApplicationContext.setParent()</span></span><br><span class="line">		<span class="keyword">super</span>(parent);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// ä¸º configLocations å­—æ®µèµ‹å€¼(å‘ŠçŸ¥é…ç½®æ–‡ä»¶ä½ç½®), èµ‹å€¼å‰ä¼šæ ¹æ®ç¯å¢ƒå˜é‡è§£æ(æ­¤æ—¶ç¯å¢ƒå˜é‡ä¸­åªæœ‰ç³»ç»Ÿç¯å¢ƒå˜é‡: å¦‚JAVA_HOME).</span></span><br><span class="line">		setConfigLocations(configLocations);</span><br><span class="line">		<span class="keyword">if</span> (refresh) &#123;</span><br><span class="line">			<span class="comment">// æ³¨é‡Šåœ¨ä¸‹é¢</span></span><br><span class="line">      refresh();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç„¶åå…·ä½“çš„çœ‹ refresh æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">refresh</span><span class="params">()</span> <span class="keyword">throws</span> BeansException, IllegalStateException </span>&#123;</span><br><span class="line">		<span class="comment">// 1.è®¾ç½®å®¹å™¨åˆå§‹çš„ä¸€äº›å±æ€§(æ—¶é—´,çŠ¶æ€)ï¼Œåˆå§‹åŒ–å ä½ç¬¦æ•°æ®æºå¹¶æ ¡éªŒæ‰€æœ‰ bean æ‰€ä½¿ç”¨çš„å ä½ç¬¦æ˜¯å¦å­˜åœ¨, æ¸…ç©ºäº‹ä»¶å’Œç›‘å¬</span></span><br><span class="line">		<span class="comment">// 2.æ¸…ç©ºé‡ç½®æ—§çš„ beanFactory, å†åˆ›å»ºæ–°çš„ beanFactory å¹¶é€šè¿‡è§£æ xmlæˆ–æ³¨è§£ åŠ è½½ beanDefinitions</span></span><br><span class="line">		<span class="comment">// 3.è®¾ç½®äº†ä¸€äº› beanFactory çš„å±æ€§, æ·»åŠ äº†å‡ ä¸ªæœ‰ç”¨çš„ BeanPostProcessor, è¿˜æ·»åŠ äº†å‡ ä¸ª bean åˆ°å®¹å™¨ä¸­(éƒ½æ˜¯ç¯å¢ƒç›¸å…³çš„ bean)</span></span><br><span class="line">		<span class="comment">// 4.å­ç±»å¯¹beanFactory æ·»åŠ è‡ªå·±çš„ç‰¹æ®Šçš„ BeanPostProcessor (å¦‚servletContxt/servletConfigæ³¨å…¥)</span></span><br><span class="line">		<span class="comment">// 5.æ‰«æå®¹å™¨ä¸­å®ç°äº† BeanFactoryPostProcessor æ¥å£çš„ bean å°†å…¶æ³¨å†Œåˆ° beanFactory ä¸­å¹¶æ‰§è¡Œ</span></span><br><span class="line">		<span class="comment">// 6.æ‰«æå®¹å™¨ä¸­å®ç°äº† BeanPostProcessor æ¥å£çš„ bean å°†å…¶æ³¨å†Œåˆ° beanFactory ä½†ä¸æ‰§è¡Œ(å®ä¾‹åŒ– bean å¯¹è±¡é‚£ä¼šæœ‰å‡ ä¸ªæ‰§è¡Œæ—¶æœº)</span></span><br><span class="line">		<span class="comment">// 7.åˆ›å»ºä¸€ä¸ªå›½é™…åŒ–èµ„æºè§£æå™¨å¹¶æ³¨å†Œåˆ° beanFactory; åˆ›å»ºä¸€ä¸ªäº‹ä»¶å¹¿æ’­å™¨å¹¶æ³¨å†Œåˆ° beanFactory.</span></span><br><span class="line">		<span class="comment">// 8.è°ƒç”¨å­ç±»çš„å…¶ä»–åˆ·æ–°æ—¶éœ€è¦åšçš„äº‹æƒ…(æ¨¡æ¿æ–¹æ³•)</span></span><br><span class="line">		<span class="comment">// 9.æ‰«æå®¹å™¨ä¸­å®ç°äº† ApplicationListener æ¥å£çš„ bean, å°†å…¶é¢„å­˜åˆ°å¹¿æ’­å™¨ä¸­ä½†ä¸æ‰§è¡Œ</span></span><br><span class="line">		<span class="comment">//10.å®Œæˆ beanFactory çš„ä¸€äº›é…ç½®(åŒ…æ‹¬ç»ˆç»“ä¸€äº›ä¸œè¥¿, å¦‚ setTempClassLoader(null) ); å°†å•ä¾‹çš„ bean åˆ›å»ºå‡ºæ¥æ”¾å…¥å®¹å™¨ä¸­(æœªè®¾ç½®lazy-init=true)çš„ bean</span></span><br><span class="line">		<span class="comment">//11.å¹¿æ’­ ContextRefreshedEvent äº‹ä»¶ï¼Œ åˆå§‹åŒ–LifeCycleProcessoråŠè°ƒç”¨å…¶ onRefresh æ–¹æ³•.</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">synchronized</span> (<span class="keyword">this</span>.startupShutdownMonitor) &#123;</span><br><span class="line">			<span class="comment">// Prepare this context for refreshing.</span></span><br><span class="line">			<span class="comment">// è®¾ç½®å®¹å™¨åˆå§‹çš„ä¸€äº›å±æ€§(æ—¶é—´,çŠ¶æ€)ï¼Œåˆå§‹åŒ–å ä½ç¬¦æ•°æ®æºå¹¶æ ¡éªŒæ‰€æœ‰ bean æ‰€ä½¿ç”¨çš„å ä½ç¬¦æ˜¯å¦å­˜åœ¨, æ¸…ç©ºäº‹ä»¶å’Œç›‘å¬</span></span><br><span class="line">			prepareRefresh();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Tell the subclass to refresh the internal bean factory.</span></span><br><span class="line">			<span class="comment">// æ¸…ç©ºé‡ç½®æ—§çš„ beanFactory, å†åˆ›å»ºæ–°çš„ beanFactory å¹¶è§£æ xmlæˆ–æ³¨è§£ åŠ è½½ beanDefinitions</span></span><br><span class="line">			ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Prepare the bean factory for use in this context.</span></span><br><span class="line">			<span class="comment">// è®¾ç½®äº†ä¸€äº› beanFactory çš„å±æ€§, æ·»åŠ äº†å‡ ä¸ªæœ‰ç”¨çš„ BeanPostProcessor, è¿˜æ·»åŠ äº†å‡ ä¸ª bean åˆ°å®¹å™¨ä¸­(éƒ½æ˜¯ç¯å¢ƒç›¸å…³çš„ bean)</span></span><br><span class="line">			prepareBeanFactory(beanFactory);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="comment">// Allows post-processing of the bean factory in context subclasses.</span></span><br><span class="line">				<span class="comment">// å­ç±»å¯¹beanFactory æ·»åŠ è‡ªå·±çš„ç‰¹æ®Šçš„ BeanPostProcessor (å¦‚servletContxt/servletConfigæ³¨å…¥)</span></span><br><span class="line">				postProcessBeanFactory(beanFactory);</span><br><span class="line"></span><br><span class="line">				<span class="comment">// Invoke factory processors registered as beans in the context.</span></span><br><span class="line">				<span class="comment">// æ‰«æå®¹å™¨ä¸­å®ç°äº† BeanFactoryPostProcessor æ¥å£çš„ bean å°†å…¶æ³¨å†Œåˆ° beanFactory ä¸­å¹¶æ‰§è¡Œ</span></span><br><span class="line">				<span class="comment">//   æ‰«æ6æ¬¡, 2(BeanDefinitionRegistry/BeanFactory) x 3(ä¼˜å…ˆçº§:é«˜/ä¸­/å…¶ä»–)</span></span><br><span class="line">				invokeBeanFactoryPostProcessors(beanFactory);</span><br><span class="line"></span><br><span class="line">				<span class="comment">// Register bean processors that intercept bean creation.</span></span><br><span class="line">				<span class="comment">// æ‰«æå®¹å™¨ä¸­å®ç°äº† BeanPostProcessor æ¥å£çš„ bean å°†å…¶æ³¨å†Œåˆ° beanFactory ä½†ä¸æ‰§è¡Œ; æ‰«æ6æ¬¡: 2(MergedBeanDefinitionPostProcessor/å…¶ä»–) x 3(ä¼˜å…ˆçº§: é«˜/ä¸­/å…¶ä»–)</span></span><br><span class="line">				registerBeanPostProcessors(beanFactory);</span><br><span class="line"></span><br><span class="line">				<span class="comment">// Initialize message source for this context.</span></span><br><span class="line">				<span class="comment">// åˆ›å»ºä¸€ä¸ªå›½é™…åŒ–èµ„æºè§£æå™¨å¹¶æ³¨å†Œåˆ° beanFactory.</span></span><br><span class="line">				initMessageSource();</span><br><span class="line"></span><br><span class="line">				<span class="comment">// Initialize event multicaster for this context.</span></span><br><span class="line">				<span class="comment">// åˆ›å»ºä¸€ä¸ªäº‹ä»¶å¹¿æ’­å™¨å¹¶æ³¨å†Œåˆ° beanFactory.</span></span><br><span class="line">				initApplicationEventMulticaster();</span><br><span class="line"></span><br><span class="line">				<span class="comment">// Initialize other special beans in specific context subclasses.</span></span><br><span class="line">				<span class="comment">// è°ƒç”¨å­ç±»çš„å…¶ä»–åˆ·æ–°æ—¶éœ€è¦åšçš„äº‹æƒ…(æ¨¡æ¿æ–¹æ³•)</span></span><br><span class="line">				onRefresh();</span><br><span class="line"></span><br><span class="line">				<span class="comment">// Check for listener beans and register them.</span></span><br><span class="line">				<span class="comment">// å°†å¯èƒ½å­˜åœ¨çš„ applicationListeners æ³¨å†Œåˆ°äº‹ä»¶å¹¿æ’­å™¨ä¸­(æ–°å»ºæ—¶æ˜¯ä¸å­˜åœ¨çš„),</span></span><br><span class="line">				<span class="comment">// ç„¶åæ‰«æå®¹å™¨ä¸­å®ç°äº† ApplicationListener æ¥å£çš„ bean, å°†å…¶é¢„å­˜åˆ°å¹¿æ’­å™¨ä¸­ä½†ä¸æ‰§è¡Œ</span></span><br><span class="line">				<span class="comment">// å°†ä¹‹å‰ publishEvent() æƒ³å¹¿æ’­çš„äº‹ä»¶å¹¿æ’­å‡ºå», ç„¶åå­—æ®µ earlyApplicationEvents èµ‹å€¼ä¸ºç©º(ä»£è¡¨ä¹‹åå¯ç«‹å³å¹¿æ’­)</span></span><br><span class="line">				registerListeners();</span><br><span class="line"></span><br><span class="line">				<span class="comment">// Instantiate all remaining (non-lazy-init) singletons.</span></span><br><span class="line">				<span class="comment">// å®Œæˆ beanFactory çš„ä¸€äº›é…ç½®(åŒ…æ‹¬ç»ˆç»“ä¸€äº›ä¸œè¥¿, å¦‚ setTempClassLoader(null) )</span></span><br><span class="line">				<span class="comment">// æ³¨å†Œé»˜è®¤çš„è¡¨è¾¾å¼è§£æå™¨(è‹¥æ— ç›¸åº”çš„beanå­˜åœ¨)</span></span><br><span class="line">				<span class="comment">// æ‰«æå®¹å™¨ä¸­å®ç°äº† LoadTimeWeaverAware æ¥å£çš„ bean, å¹¶è§¦å‘(getBean)ä¹‹å‰æ³¨å†Œè¿‡çš„ BeanPostProcessor</span></span><br><span class="line">				<span class="comment">// å°†å•ä¾‹çš„ bean åˆ›å»ºå‡ºæ¥æ”¾å…¥å®¹å™¨ä¸­(æœªè®¾ç½®lazy-init=true)çš„ bean</span></span><br><span class="line">				finishBeanFactoryInitialization(beanFactory);</span><br><span class="line"></span><br><span class="line">				<span class="comment">// Last step: publish corresponding event.</span></span><br><span class="line">				<span class="comment">// å¹¿æ’­ ContextRefreshedEvent äº‹ä»¶ï¼Œ åˆå§‹åŒ–LifeCycleProcessoråŠè°ƒç”¨å…¶ onRefresh æ–¹æ³•.</span></span><br><span class="line">				finishRefresh();</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">catch</span> (BeansException ex) &#123;</span><br><span class="line">				<span class="keyword">if</span> (logger.isWarnEnabled()) &#123;</span><br><span class="line">					logger.warn(<span class="string">"Exception encountered during context initialization - "</span> +</span><br><span class="line">							<span class="string">"cancelling refresh attempt: "</span> + ex);</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="comment">// Destroy already created singletons to avoid dangling resources.</span></span><br><span class="line">				<span class="comment">// é”€æ¯ç¼“å­˜çš„å•ä¾‹å¯¹è±¡</span></span><br><span class="line">				destroyBeans();</span><br><span class="line"></span><br><span class="line">				<span class="comment">// Reset 'active' flag.</span></span><br><span class="line">				<span class="comment">// å˜æ›´çŠ¶æ€</span></span><br><span class="line">				cancelRefresh(ex);</span><br><span class="line"></span><br><span class="line">				<span class="comment">// Propagate exception to caller.</span></span><br><span class="line">				<span class="keyword">throw</span> ex;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">finally</span> &#123;</span><br><span class="line">				<span class="comment">// Reset common introspection caches in Spring's core, since we</span></span><br><span class="line">				<span class="comment">// might not ever need metadata for singleton beans anymore...</span></span><br><span class="line">				<span class="comment">// æ¸…ç©ºå…¬å…±å·¥å…·äº§ç”Ÿçš„ç¼“å­˜(å†…å­˜æ¾ä¸€å£æ°”).</span></span><br><span class="line">				resetCommonCaches();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æˆ‘é”™äº†, ä»£ç éƒ½æ”¾ä¸Šå»ä¸å¦‚ç»™ä¸ªGitHubåœ°å€, æ¥ä¸‹æ¥çœç•¥ä»£ç å§, åªæ”¾æ³¨é‡ŠğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ¨ä¸ªçœ‹é‡Œé¢çš„æ–¹æ³•</span></span><br><span class="line">org.springframework.context.support.AbstractApplicationContext#prepareRefresh</span><br><span class="line">    <span class="comment">// 1.è®¾ç½®å®¹å™¨åˆå§‹çš„ä¸€äº›å±æ€§, å¦‚å¯åŠ¨æ—¶é—´, å½“å‰çŠ¶æ€</span></span><br><span class="line">		<span class="comment">// 2.æ‰“å°å¼€å§‹æ—¥å¿—</span></span><br><span class="line">		<span class="comment">// 3.åˆå§‹åŒ–å ä½ç¬¦æ•°æ®æº</span></span><br><span class="line">		<span class="comment">// 4.æ ¡éªŒæ‰€æœ‰ bean æ‰€ä½¿ç”¨çš„å ä½ç¬¦æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">		<span class="comment">// 5.æ¸…ç©ºäº‹ä»¶å’Œç›‘å¬</span></span><br><span class="line">		<span class="comment">// Switch to active.</span></span><br><span class="line">  </span><br><span class="line">org.springframework.context.support.AbstractRefreshableApplicationContext#refreshBeanFactory</span><br><span class="line">    <span class="comment">// 1.å­˜åœ¨æ—§çš„åˆ™å…ˆæ‘§æ¯ bean å¯¹è±¡å®ä¾‹åŠç¼“å­˜æ•°æ®, å†å°†æ—§çš„ç½®ä¸º null</span></span><br><span class="line">		<span class="comment">// 2.åˆ›å»ºä¸€ä¸ªæ–°çš„ beanFactory å¯¹è±¡, å†è®¾ç½® idåŠä¸€äº›é…ç½®</span></span><br><span class="line">		<span class="comment">// 3.æ‰«æå¹¶åŠ è½½ beanDefinations</span></span><br><span class="line">		<span class="comment">// 4.è®¾ç½®è¿™ä¸ªæ–°çš„ beanFactory å¯¹è±¡ä¸º applicationContext çš„ beanFactory å­—æ®µå€¼.</span></span><br><span class="line">  </span><br><span class="line">org.springframework.context.support.AbstractApplicationContext#prepareBeanFactory</span><br><span class="line">    <span class="comment">// 1.è®¾ç½® beanFactory çš„ç±»åŠ è½½å™¨</span></span><br><span class="line">		<span class="comment">// 2.è®¾ç½® beanFactory çš„è¡¨è¾¾å¼è§£æå™¨</span></span><br><span class="line">		<span class="comment">// 3.1:æ³¨å†Œä¸€ä¸ª BeanPostProcessor ç”¨äºå°†å®ç°äº†ApplicationContextèƒ½åŠ›ç›¸å…³çš„Awareæ¥å£çš„ bean, è§¦å‘èµ‹å€¼setter æ³¨å…¥ applicationContext å¯¹è±¡</span></span><br><span class="line">		<span class="comment">// 3.2:è®¾ç½® beanFactory å¤„ç† bean æ—¶è¦å¿½ç•¥çš„æ¥å£(ä¸»è¦æ˜¯setteræ³¨å…¥æ—¶å¿½è§†ä¸€äº›ä¹Ÿæ˜¯setterçš„æ–¹æ³•, å› ä¸ºè¿™äº›æ–¹æ³•ä¼šç”± PostProcessor æ¥è§¦å‘)</span></span><br><span class="line">		<span class="comment">// 4.æ³¨å†Œä¸€äº›ç‰¹æ®Šçš„ bean(æ³¨å…¥è¿™äº›beanæ—¶ä¼šæ³¨å…¥ this å¯¹è±¡: å¤šåŠŸèƒ½å·¥å…·äºº ApplicationContext, å¯è§å…¶å’Œæ™®é€š bean çš„æ³¨å†Œæ–¹å¼ä¸ä¸€æ ·)</span></span><br><span class="line">		<span class="comment">// 5.æ³¨å†Œä¸€ä¸ª BeanPostProcessor ç”¨äºæ£€æµ‹åŠ è½½çš„ bean æ˜¯å¦å®ç°äº† ApplicationListener æ¥å£, è‹¥æ˜¯, åˆ™æ³¨å†Œåˆ°äº‹ä»¶å¹¿æ’­å™¨ä¸­(ä¸æ˜¯,æ˜¯æš‚å­˜åœ¨applicationListenerså­—æ®µä¸­, ç­‰äº‹ä»¶å¹¿æ’­å™¨åˆ›å»ºåæ‰æ³¨å†Œ)</span></span><br><span class="line">		<span class="comment">// 6.æ³¨å†Œä¸€ä¸ª BeanPostProcessor ç”¨äºè§¦å‘å®ç°äº† LoadTimeWeaverAware æ¥å£çš„ bean çš„ setLoadTimeWeaver() ç¤¾ä¼š LTW å®ä¾‹.</span></span><br><span class="line">		<span class="comment">// 7.æ³¨å†Œå‡ ä¸ªç¯å¢ƒç›¸å…³ bean åˆ°å®¹å™¨ä¸­(Springçš„ç¯å¢ƒå¯¹è±¡, ä»¥åŠç³»ç»Ÿç¯å¢ƒå˜é‡å’Œç³»ç»Ÿé…ç½®æ–‡ä»¶)</span></span><br><span class="line"></span><br><span class="line">org.springframework.context.support.PostProcessorRegistrationDelegate#invokeBeanFactoryPostProcessors(org.springframework.beans.factory.config.ConfigurableListableBeanFactory, java.util.List&lt;org.springframework.beans.factory.config.BeanFactoryPostProcessor&gt;)</span><br><span class="line">    <span class="comment">// 1.è‹¥ beanFactory å®ç°äº† BeanDefinitionRegistry æ¥å£(new AnnotationConfigApplicationContext å°±å®ç°äº†)</span></span><br><span class="line">		<span class="comment">//    åˆ™æ‰«ææ‰€æœ‰å®ç°äº† BeanDefinitionRegistryPostProcessor æ¥å£çš„ bean, æ ¹æ®ä¼˜å…ˆçº§åˆ†ä¸‰ç±»(é«˜/ä¸­/å…¶ä»–)ä¾æ¬¡æ‰§è¡Œ</span></span><br><span class="line">		<span class="comment">// 2.ç„¶åæ‰«ææ‰€æœ‰å®ç°äº† BeanFactoryPostProcessor æ¥å£çš„ bean, ä¾æ—§æ˜¯æ ¹æ®ä¼˜å…ˆçº§åˆ†ä¸‰ç±»ä¾æ¬¡æ‰§è¡Œ.</span></span><br><span class="line">		<span class="comment">// 3.æ¯æ¬¡æ‰§è¡Œå‰éƒ½ä¼šæ ¹æ® Order ä¿¡æ¯æ’åº, å†éå†æ‰§è¡Œ</span></span><br><span class="line">  </span><br><span class="line">org.springframework.context.support.PostProcessorRegistrationDelegate#registerBeanPostProcessors(org.springframework.beans.factory.config.ConfigurableListableBeanFactory, org.springframework.context.support.AbstractApplicationContext)</span><br><span class="line">    <span class="comment">// 1.æ‰«æ6æ¬¡: 2(MergedBeanDefinitionPostProcessor/å…¶ä»–) x 3(ä¼˜å…ˆçº§: é«˜/ä¸­/å…¶ä»–)</span></span><br><span class="line">		<span class="comment">//    å°†å…¶åŠ å…¥åˆ° beanFactory çš„ beanPostProcessors é›†åˆä¸­</span></span><br><span class="line">		<span class="comment">// 2.å†æ¬¡åŠ å…¥ ApplicationListenerDetector (ç”¨äºå¤„ç†å®ç° ApplicationListener çš„ bean æ³¨å†Œåˆ°äº‹ä»¶å¹¿æ’­å™¨), ä¸»è¦æ˜¯ä½¿å…¶åœ¨é“¾æœ«å°¾, å¯ä»¥æœ€åæ‰§è¡Œ.</span></span><br><span class="line"></span><br><span class="line">org.springframework.context.support.AbstractApplicationContext#registerListeners</span><br><span class="line">    <span class="comment">// 1.å°†å¯èƒ½å­˜åœ¨çš„ applicationListeners æ³¨å†Œåˆ°äº‹ä»¶å¹¿æ’­å™¨ä¸­(æ–°å»ºæ—¶æ˜¯ä¸å­˜åœ¨çš„)</span></span><br><span class="line">		<span class="comment">// 2.æ‰«æå®¹å™¨ä¸­å®ç°äº† ApplicationListener æ¥å£çš„ bean, å°†å…¶é¢„å­˜åˆ°å¹¿æ’­å™¨ä¸­ä½†ä¸æ‰§è¡Œ</span></span><br><span class="line">		<span class="comment">// 3.å°†ä¹‹å‰ publishEvent() æƒ³å¹¿æ’­çš„äº‹ä»¶å¹¿æ’­å‡ºå», ç„¶åå­—æ®µ earlyApplicationEvents èµ‹å€¼ä¸ºç©º</span></span><br><span class="line">		<span class="comment">//    (å› ä¸º publishEvent() ä¸­æ ¹æ®æ˜¯å¦ä¸ºç©ºåˆ¤æ–­ç«‹åˆ»æ‰§è¡Œæˆ–å…ˆå­˜ç€) (å¦è¿™ä¹Ÿè§£é‡Šäº† prepareRefresh() ä¸­ä¸ºä½•è¦èµ‹å€¼ä¸€ä¸ªç©ºé›†åˆ)</span></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">org.springframework.context.support.AbstractApplicationContext#finishBeanFactoryInitialization</span><br><span class="line">    <span class="comment">// 1.å®Œæˆ beanFactory çš„ä¸€äº›é…ç½®</span></span><br><span class="line">		<span class="comment">// 2.æ³¨å†Œé»˜è®¤çš„è¡¨è¾¾å¼è§£æå™¨(è‹¥æ— ç›¸åº”çš„beanå­˜åœ¨)</span></span><br><span class="line">		<span class="comment">// 3.æ‰«æå®¹å™¨ä¸­å®ç°äº† LoadTimeWeaverAware æ¥å£çš„ bean, å¹¶è§¦å‘(getBean)ä¹‹å‰æ³¨å†Œè¿‡çš„ BeanPostProcessor</span></span><br><span class="line">		<span class="comment">// 4.å°†å•ä¾‹çš„ bean åˆ›å»ºå‡ºæ¥æ”¾å…¥å®¹å™¨ä¸­(æœªè®¾ç½®lazy-init=true)çš„ bean</span></span><br><span class="line"></span><br><span class="line">org.springframework.context.support.AbstractApplicationContext#finishRefresh</span><br><span class="line">    <span class="comment">// 1.æ¸…ç©ºèµ„æºç¼“å­˜</span></span><br><span class="line">		<span class="comment">// 2.åˆ›å»ºä¸€ä¸ªç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨(start, refresh, stopç­‰)å¹¶æ³¨å†Œåˆ° beanFactory</span></span><br><span class="line">		<span class="comment">// 3.è§¦å‘ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨çš„ onRefresh()</span></span><br><span class="line">		<span class="comment">// 4.å¹¿æ’­å®¹å™¨åˆ·æ–°å®Œæˆçš„äº‹ä»¶</span></span><br><span class="line">		<span class="comment">// 5.ä¸º Spring Tool Suite æä¾›æŸäº›ä¾¿æ·(æ²¡ç”¨è¿‡, ä¸çŸ¥é“...)</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¯ç®—å¤åˆ¶å®Œäº†, å¦‚æœä½ æœ‰å¹¸ç›´æ¥è·³è¯»åˆ°è¿™é‡Œ, é‚£ä¹ˆé€ä¸Šåœ°å€ : <a href="https://github.com/gudqs7/spring-framework/tree/wq-comment" target="_blank" rel="noopener">æ³¨æ„åˆ†æ”¯å§</a> </p>
<p>å¦å¤–ä¸Šé¢æ–¹æ³•å‰å¸¦ä¸ª <strong>#</strong> çš„, å¤åˆ¶åˆ° IDEA åŒå‡» Shift ç„¶åç²˜è´´, é€‰æ‹© Symbols æœç´¢æ›´å‡†ç¡®å‘¢!</p>
</blockquote>
<h2 id="è·å–å®¹å™¨å¯¹è±¡è¿‡ç¨‹"><a href="#è·å–å®¹å™¨å¯¹è±¡è¿‡ç¨‹" class="headerlink" title="è·å–å®¹å™¨å¯¹è±¡è¿‡ç¨‹"></a>è·å–å®¹å™¨å¯¹è±¡è¿‡ç¨‹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»getBean(Class type) ä¸­è¿›å…¥</span></span><br><span class="line">1.æ£€æŸ¥ applicationContext å’Œ beanFactory çš„çŠ¶æ€, è‹¥æœ‰å¼‚å¸¸åˆ™ç»™å‡ºå‡†ç¡®çš„é”™è¯¯.</span><br><span class="line">2.æ‰«æå®¹å™¨ä¸­æ‰€æœ‰æ­¤ <span class="built_in">type</span> çš„ beanName, éå†åˆ¤æ–­æ¯ä¸ª beanName æ˜¯å¦å¯ç”¨</span><br><span class="line">   å¯ç”¨åˆ™åˆ¤æ–­å¯ç”¨çš„ä¸ªæ•°æ˜¯å¦åˆšå¥½æ˜¯ä¸€ä¸ª, æ˜¯åˆ™ç›´æ¥è°ƒç”¨ getBean() è¿”å›å¯¹è±¡å®ä¾‹</span><br><span class="line">   è‹¥å¯ç”¨çš„ä¸ªæ•°è¶…è¿‡ä¸€ä¸ª, åˆ™æ ¹æ® beanDefinition çš„ isPrimary å’Œå¯¹æ¯”é…ç½®çš„ä¼˜å…ˆçº§æ˜¯å¦ä¸ºæœ‰æœ€é«˜çš„å†è¿”å›æœ€é«˜çš„</span><br><span class="line">   è‹¥éƒ½ä¸è¡Œ, åˆ™æŠ¥é”™.</span><br><span class="line">3.æ¥ç€çœ‹ getBean, å…ˆè¯•ç€ä»å•ä¾‹çš„ç¼“å­˜ä¸­è·å–, è‹¥å­˜åœ¨åˆ™è¿”å›.</span><br><span class="line">4.è‹¥ç¼“å­˜ä¸­ä¸å­˜åœ¨, åˆ™åˆ¤æ–­çˆ¶å®¹å™¨æ˜¯å¦å­˜, è‹¥å­˜åœ¨åˆ™ä»çˆ¶å®¹å™¨è·å–</span><br><span class="line">   è‹¥çˆ¶å®¹å™¨ä¸å­˜åœ¨, åˆ™è‡ªå·±æ–°å»º, å…ˆæ ‡è®° beanName åˆ° alreadyCreated ä¸­(è¡¨ç¤ºå·²ç»åˆ›å»ºäº†é˜²æ­¢é‡å¤åˆ›å»º) å†å¼€å§‹åˆ›å»ºä¸€ä¸ª bean.</span><br><span class="line">5.åˆ›å»ºä¸€ä¸ªæ–°çš„ bean å®ä¾‹, å…ˆå¤„ç† beanDefinition çš„ dependsOn å±æ€§(å³è‹¥å­˜åœ¨åˆ™å…ˆè°ƒç”¨ getBean è·å–ä¾èµ–çš„ bean)</span><br><span class="line">6.è‹¥ beanDefinition çš„è®¾ç½®æ˜¯å•ä¾‹, åˆ™é€šè¿‡é—­åŒ…å¯¹åˆ›å»ºå¯¹è±¡å‰åè¿›è¡Œä¸€äº›å¼‚å¸¸å¤„ç†å’Œç¼“å­˜å¤„ç†(ä¸»è¦æ˜¯å½»åº•åˆ›å»ºå®ŒååŠ å…¥åˆ°å•ä¾‹ä¸€çº§ç¼“å­˜, ç§»é™¤äºŒçº§å’Œä¸‰çº§ç¼“å­˜[å¾ªç¯ä¾èµ–ç›¸å…³çš„ä¸¤ä¸ªç¼“å­˜]).</span><br><span class="line">7.é€šè¿‡åå°„æ ¹æ® beanClass åˆ›å»ºä¸€ä¸ªå¯¹è±¡å®ä¾‹, ç„¶åå°†å…¶æ·»åŠ åˆ° singletonFactories ä¸­(è§£å†³ä¾èµ–å¾ªç¯é—®é¢˜)</span><br><span class="line">8.è°ƒç”¨ populateBean() ä¸ºå¯¹è±¡çš„å­—æ®µ(å±æ€§)æ³¨å…¥å®ƒæ‰€éœ€è¦çš„å€¼(å¯èƒ½æ˜¯@Resource, @Valueç­‰); (æ­¤æ—¶å¯èƒ½ä¼šé‡åˆ°ä¾èµ–å¾ªç¯é—®é¢˜, ä½†è§£å†³è¿™ä¸ªé—®é¢˜çš„ç¼“å­˜åœ¨æ­¤ä¹‹å‰å°±æ·»åŠ äº†, æ‰€ä»¥ä¸æ€•)</span><br><span class="line">9.æœ€åè°ƒç”¨ initializeBean() å®Œæˆ bean çš„åˆå§‹åŒ–(è°ƒç”¨ bean çš„ä¸€äº›æ–¹æ³•, å¦‚ afterPropertiesSet), è¿”å›å¯¹è±¡å®ä¾‹.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ€»ç»“: å…ˆæ ¹æ® type æ‰¾åˆ° beanName, æ‰¾åˆ°åæ ¹æ® beanName åˆ›å»ºå¯¹è±¡; åˆ›å»ºå¯¹è±¡å‰å…ˆæ£€æŸ¥ç¼“å­˜(å•ä¾‹), å†è€ƒè™‘çˆ¶å®¹å™¨, æœ€åæ‰æ˜¯è‡ªå·±åˆ›å»º, è‡ªå·±åˆ›å»ºä¼šå…ˆåˆ›å»º dependsOn çš„ bean å¯¹è±¡, ç„¶åæ‰é€šè¿‡åå°„å®ä¾‹åŒ–å‡ºä¸€ä¸ªå¯¹è±¡å®ä¾‹(è¿™é‡Œåå°„ç”¨åˆ°çš„classå’Œæ„é€ æ–¹æ³•, é€šè¿‡å®ç° SmartInstantiationAwareBeanPostProcessoræ¥å£éƒ½å¯è¿›è¡Œå¹²é¢„), å®ä¾‹åŒ–åå­˜åˆ°äºŒçº§ç¼“å­˜, å†ä¸ºå­—æ®µèµ‹å€¼(æ³¨å…¥); æœ€åè°ƒç”¨ bean çš„ init ç›¸å…³çš„æ¥å£(å¦‚afterPropertiesSet), å°±å¯ä»¥è¿”å›è¿™ä¸ªå¯¹è±¡å®ä¾‹äº†.</p>
</blockquote>
<h3 id="è¶…é•¿æºç åˆ†æè¿‡ç¨‹-1"><a href="#è¶…é•¿æºç åˆ†æè¿‡ç¨‹-1" class="headerlink" title="è¶…é•¿æºç åˆ†æè¿‡ç¨‹"></a>è¶…é•¿æºç åˆ†æè¿‡ç¨‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»è¿™ä¸ªæ–¹æ³•è¿›å…¥</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="function">T <span class="title">getBean</span><span class="params">(Class&lt;T&gt; requiredType)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­å®¹å™¨çš„çŠ¶æ€, ç¡®ä¿ beanFactory å¯ç”¨.(ä¸»è¦æ˜¯è‹¥ä¸å¯ç”¨, æç¤ºçš„é”™è¯¯ä¿¡æ¯ä¼šæ¯”getBeanFacgtory()ä¸­æ›´å‡†ç¡®)</span></span><br><span class="line">  <span class="comment">// ä½¿ç”¨ beanFactory çš„ getBean æ–¹æ³•è·å–å¯¹è±¡å¹¶è¿”å›.</span></span><br><span class="line">  assertBeanFactoryActive();</span><br><span class="line">  <span class="keyword">return</span> getBeanFactory().getBean(requiredType);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç„¶åå…¶ä»–æ‰€æœ‰æ¶‰åŠçš„æ ¸å¿ƒæ–¹æ³•çš„æ³¨é‡Š</span></span><br><span class="line">org.springframework.beans.factory.support.DefaultListableBeanFactory#resolveBean</span><br><span class="line">    <span class="comment">// è°ƒç”¨ resolveNamedBean, å¦‚å­˜åœ¨ bean åˆ™ç›´æ¥è¿”å›. (æ ¸å¿ƒ)</span></span><br><span class="line">		<span class="comment">// è‹¥ä¸å­˜åœ¨åˆ™ä»çˆ¶å®¹å™¨ä¸­å¯»æ‰¾, çˆ¶å®¹å™¨å®ç°äº† DefaultListableBeanFactory åˆ™è°ƒä¸åŒå­å®¹å™¨ç›¸åŒçš„æ–¹æ³•</span></span><br><span class="line">		<span class="comment">// è‹¥æ²¡å®ç°åˆ™ é€šè¿‡ getBeanProvider è·å–.</span></span><br><span class="line">  </span><br><span class="line">org.springframework.beans.factory.support.DefaultListableBeanFactory#resolveNamedBean(org.springframework.core.ResolvableType, java.lang.Object[], boolean)</span><br><span class="line">    <span class="comment">// 1.è°ƒç”¨ getBeanNamesForType è·å–æ‰€æœ‰ä¸ type ç›¸åŒ¹é…çš„ beanName é›†åˆ.</span></span><br><span class="line">		<span class="comment">// 2.éå†åˆ¤æ–­æ¯ä¸ª beanName æ˜¯å¦å¯ç”¨</span></span><br><span class="line">		<span class="comment">// 3.è‹¥å¯ç”¨çš„ beanName åªæœ‰ä¸€ä¸ª, åˆ™è°ƒç”¨ getBean(beanName) è·å–å¯¹è±¡å®ä¾‹å¹¶è¿”å›</span></span><br><span class="line">		<span class="comment">//   è‹¥å¯ç”¨æ•°è¶…è¿‡ä¸€ä¸ª, åˆ™è¯•ç€æ ¹æ®æ˜¯å¦ä¸»è¦ä»¥åŠé«˜ä¼˜å…ˆçº§æ¥ç¡®å®šä¸€ä¸ª beanName å®ä¾‹, è‹¥èƒ½ç¡®å®šåˆ™è¿”å›, ä¸èƒ½åˆ™æŠ¥é”™.</span></span><br><span class="line"></span><br><span class="line">org.springframework.beans.factory.support.AbstractBeanFactory#doGetBean</span><br><span class="line">    <span class="comment">// 1.è·å–å®Œæ•´çš„ beanName</span></span><br><span class="line">		<span class="comment">// 2.è°ƒç”¨ getSingleton1() æ£€æŸ¥æ˜¯å¦å­˜åœ¨ç¼“å­˜, è¿™å±‚æ£€æŸ¥å¯é˜²æ­¢ä¾èµ–å¾ªç¯.</span></span><br><span class="line">		<span class="comment">//     è‹¥å­˜åœ¨, åˆ™é€šè¿‡ getObjectForBeanInstance() åˆ¤æ–­ç¼“å­˜çš„æ˜¯ bean è¿˜æ˜¯ FactoryBean å¹¶è¿”å›ç›¸åº”çš„å¯¹è±¡å®ä¾‹.</span></span><br><span class="line">		<span class="comment">// 3.è‹¥ä¸å­˜åœ¨, å…ˆè¯•ç€ä»çˆ¶å®¹å™¨è·å–(å­å®¹å™¨ä¸å­˜åœ¨è¿™ä¸ª beanDefinition ä¸”çˆ¶å®¹å™¨ä¸ä¸ºç©º)</span></span><br><span class="line">		<span class="comment">//     æ²¡æœ‰çˆ¶å®¹å™¨åˆ™ è°ƒç”¨ markBeanAsCreated() æ ‡è®°è¿™ä¸ª beanå·²ç»åˆ›å»ºäº† (å…ˆæ ‡è®°, å†åˆ›å»º)</span></span><br><span class="line">		<span class="comment">//     è·å– beanDefinition, åˆ¤æ–­å…¶ dependsOn å±æ€§æ˜¯å¦å­˜åœ¨, å­˜åœ¨åˆ™ å…ˆè·å–ä¾èµ–çš„ bean</span></span><br><span class="line">		<span class="comment">//     è°ƒç”¨ getSingleton2() å¤„ç†å•ä¾‹ç¼“å­˜</span></span><br><span class="line">		<span class="comment">// 4.è€Œ getSingleton2() ä¸­çš„é—­åŒ…ä¸­ æ‰§è¡Œçš„ createBean() æ–¹æ³•ä¸­åˆ™æ‰æ˜¯åˆ›å»ºå®ä¾‹å¹¶è°ƒç”¨ BeanPostProcessor</span></span><br><span class="line"></span><br><span class="line">org.springframework.beans.factory.support.DefaultSingletonBeanRegistry#getSingleton(java.lang.String, boolean)</span><br><span class="line">    <span class="comment">// 1.åˆ¤æ–­æ˜¯å¦å­˜åœ¨äº singletonObjects ä¸­</span></span><br><span class="line">		<span class="comment">// 2.è‹¥ä¸å­˜åœ¨åˆ™åˆ¤æ–­ bean æ˜¯å¦å¤„äºåˆ›å»ºä¸­(æœªåˆ›å»ºå®Œæˆ, å¦‚å¾ªç¯ä¾èµ–æ—¶)</span></span><br><span class="line">		<span class="comment">// 3.è‹¥å¤„äºåˆ›å»ºä¸­, åˆ™åŒæ­¥ååˆ¤æ–­æ˜¯å¦å­˜åœ¨äº earlySingletonObjects (ä¹Ÿå°±æ˜¯ singletonFactories ç§»é™¤åå­˜å…¥çš„åœ°æ–¹)</span></span><br><span class="line">		<span class="comment">//      (å› ä¸ºFactoryBeanå ç”¨ç©ºé—´å¤§, è·å–å¯¹è±¡éº»çƒ¦ä¸”é€Ÿåº¦æ›´æ…¢, è¿™æ˜¯ä¸ºäº†é˜²æ­¢å¦‚æœå¾ªç¯ä¾èµ–é“¾æ¡å¾ˆé•¿ å¤šæ¬¡è·å–æµªè´¹CPUçš„é—®é¢˜)</span></span><br><span class="line">		<span class="comment">// 4.ä¸å­˜äº earlySingletonObjects åˆ™ä»£è¡¨ç¬¬ä¸€æ¬¡(ä¹Ÿåªä¼šæœ‰ä¸€æ¬¡)å– singletonFactories</span></span><br><span class="line">		<span class="comment">//    å–å‡ºåè°ƒç”¨ getObject() å¹¶å°†å…¶å­˜å…¥åˆ° earlySingletonObjects, ç„¶åä» singletonFactories ä¸­ç§»é™¤. ä»¥åå°±å°‘èµ°å‡ è¡Œä»£ç äº†.</span></span><br><span class="line">  </span><br><span class="line">org.springframework.beans.factory.support.DefaultSingletonBeanRegistry#getSingleton(java.lang.String, org.springframework.beans.factory.ObjectFactory&lt;?&gt;)</span><br><span class="line">    <span class="comment">// 1.å…ˆç¡®ä¿æ˜¯ç¬¬ä¸€æ¬¡åˆ›å»ºå•ä¾‹å¯¹è±¡, é˜²æ­¢é‡å¤åˆ›å»º</span></span><br><span class="line">		<span class="comment">// 2.è¿›è¡Œä¸€äº›å¼‚å¸¸å¤„ç†</span></span><br><span class="line">		<span class="comment">// 3.è°ƒç”¨ singletonFactory.getObject() åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">		<span class="comment">// 4.åˆ›å»ºå¯¹è±¡ç»“æŸæ·»åŠ å•ä¾‹ç¼“å­˜å’Œæ¸…ç©º singletonFactories / earlySingletonObjects ç¼“å­˜.</span></span><br><span class="line">  </span><br><span class="line">org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory#createBean(java.lang.String, org.springframework.beans.factory.support.RootBeanDefinition, java.lang.Object[])</span><br><span class="line">    <span class="comment">// 1.è°ƒç”¨ resolveBeanClass è§£æå¾—åˆ°çœŸæ­£çš„ bean class, è‹¥è§£æä¸ä¸ºç©ºä¸”å¤„äºæŸäº›æƒ…å†µä¸‹, åˆ™å¤åˆ¶ä¸€ä»½ beanDefinition å¹¶è®¾ç½® beanClass ä¸ºè§£ææ‰€å¾—</span></span><br><span class="line">		<span class="comment">// 2.æ‰§è¡Œ BeanPostProcessor çš„ postProcessorsBeforeInstantiation() æ–¹æ³•</span></span><br><span class="line">		<span class="comment">// 3.è°ƒç”¨ doCreateBean() åˆ›å»ºå¯¹è±¡ å¹¶è¿”å›</span></span><br><span class="line"></span><br><span class="line">org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory#doCreateBean</span><br><span class="line">    <span class="comment">// 1.è°ƒç”¨ createBeanInstance() è·å¾—ä¸€ä¸ª å¯¹è±¡å®ä¾‹çš„ åŒ…è£…ç±»</span></span><br><span class="line">		<span class="comment">// 2.åŒæ­¥é”ä¸‹æ‰§è¡Œ BeanFactoryPostProcessor çš„ postProcessMergedBeanDefinition().</span></span><br><span class="line">		<span class="comment">// 3.æ·»åŠ  singletonFactories ç¼“å­˜, ç§»é™¤ earlySingletonObjects; è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜.</span></span><br><span class="line">		<span class="comment">// 4.è°ƒç”¨ populateBean() æ£€æŸ¥å­—æ®µæ˜¯å¦éœ€è¦æ³¨å…¥å¯¹è±¡å®ä¾‹, æ˜¯åˆ™è·å–å¯¹åº”çš„ bean æ³¨å…¥. (å¯èƒ½å¼•èµ·å¾ªç¯ä¾èµ–)</span></span><br><span class="line">		<span class="comment">// 5.è°ƒç”¨ initializeBean() æ‰§è¡Œå¯¹è±¡çš„ä¸€äº› Aware å’Œ init æ–¹æ³•å’Œ BeanPostProcessor çš„ postProcessBeforeInitialization.</span></span><br><span class="line">		<span class="comment">// 6.æœ€åè¿”å›å¯¹è±¡å®ä¾‹.</span></span><br></pre></td></tr></table></figure>





<h2 id="å„ç§å®ç°çš„åŸç†"><a href="#å„ç§å®ç°çš„åŸç†" class="headerlink" title="å„ç§å®ç°çš„åŸç†"></a>å„ç§å®ç°çš„åŸç†</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.ä¸ºä½•æˆ‘å†™çš„ class å®ç°ä¸€äº›æ¥å£(å¦‚ApplicationContextAware)åå¹¶æ”¾å…¥å®¹å™¨ä¸­, å°±å¯ä»¥è·å–åˆ°ä¸€äº›å¯¹è±¡(å¦‚applicationContext)?</span><br><span class="line">2.ä¸ºä½•æˆ‘å†™çš„ class å®ç° ApplicationListener&lt;XxxEvent&gt; åå¹¶æ”¾å…¥å®¹å™¨ä¸­, å°±èƒ½ç›‘å¬æˆ‘æƒ³çŸ¥é“çš„äº‹ä»¶?</span><br><span class="line">3.ä¸ºä½•Springä¸­é‡åˆ°å„ç§é¡ºåºé—®é¢˜, åªéœ€è¦å®ç° Ordered æ¥å£(æˆ–åŠ ä¸Š@Orderæ³¨è§£)å°±èƒ½ä½¿å…¶æœ‰åº?</span><br><span class="line">4.Springæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–çš„(æŒ‡ç”¨å­—æ®µæ³¨å…¥è€Œéæ„é€ æ–¹æ³•)?</span><br><span class="line">5.Springå¯ä»¥ç”¨æ³¨è§£æ›¿æ¢XMLé…ç½®æ–‡ä»¶äº†, æ˜¯å¦‚ä½•å®ç°çš„å‘¢(å¸¸ç”¨æ³¨è§£çš„å®ç°åŸç†)?</span><br><span class="line">6.Spring AOPæ˜¯å¦‚ä½•å®ç°çš„(æŒ‡@Aspect)?</span><br><span class="line">7.Spring äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„(æŒ‡@Transaction)?</span><br></pre></td></tr></table></figure>

<h3 id="ä¸ºä½•æˆ‘å†™çš„-class-å®ç°ä¸€äº›æ¥å£-å¦‚ApplicationContextAware-åå¹¶æ”¾å…¥å®¹å™¨ä¸­-å°±å¯ä»¥è·å–åˆ°ä¸€äº›å¯¹è±¡-å¦‚applicationContext"><a href="#ä¸ºä½•æˆ‘å†™çš„-class-å®ç°ä¸€äº›æ¥å£-å¦‚ApplicationContextAware-åå¹¶æ”¾å…¥å®¹å™¨ä¸­-å°±å¯ä»¥è·å–åˆ°ä¸€äº›å¯¹è±¡-å¦‚applicationContext" class="headerlink" title="ä¸ºä½•æˆ‘å†™çš„ class å®ç°ä¸€äº›æ¥å£(å¦‚ApplicationContextAware)åå¹¶æ”¾å…¥å®¹å™¨ä¸­, å°±å¯ä»¥è·å–åˆ°ä¸€äº›å¯¹è±¡(å¦‚applicationContext)?"></a>ä¸ºä½•æˆ‘å†™çš„ class å®ç°ä¸€äº›æ¥å£(å¦‚ApplicationContextAware)åå¹¶æ”¾å…¥å®¹å™¨ä¸­, å°±å¯ä»¥è·å–åˆ°ä¸€äº›å¯¹è±¡(å¦‚applicationContext)?</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1) é¦–å…ˆ AbstractApplicationContext#prepareBeanFactory ä¼šæ·»åŠ ä¸€ä¸ªApplicationContextAwareProcessor</span><br><span class="line">2) è¿™ä¸ª beanPostProcessor è´Ÿè´£åœ¨beanåˆå§‹åŒ–ä¹‹å‰æ³¨å…¥contextå¯¹è±¡.</span><br><span class="line">3) è¿™ä¸ª beanPostProcessor çš„æ‰§è¡Œæ—¶æœºæ˜¯åœ¨ doCreateBean ä¸­çš„ postProcessBeforeInitialization()</span><br></pre></td></tr></table></figure>



<h3 id="ä¸ºä½•æˆ‘å†™çš„-class-å®ç°-ApplicationListener-åå¹¶æ”¾å…¥å®¹å™¨ä¸­-å°±èƒ½ç›‘å¬æˆ‘æƒ³çŸ¥é“çš„äº‹ä»¶"><a href="#ä¸ºä½•æˆ‘å†™çš„-class-å®ç°-ApplicationListener-åå¹¶æ”¾å…¥å®¹å™¨ä¸­-å°±èƒ½ç›‘å¬æˆ‘æƒ³çŸ¥é“çš„äº‹ä»¶" class="headerlink" title="ä¸ºä½•æˆ‘å†™çš„ class å®ç° ApplicationListener åå¹¶æ”¾å…¥å®¹å™¨ä¸­, å°±èƒ½ç›‘å¬æˆ‘æƒ³çŸ¥é“çš„äº‹ä»¶?"></a>ä¸ºä½•æˆ‘å†™çš„ class å®ç° ApplicationListener<XxxEvent> åå¹¶æ”¾å…¥å®¹å™¨ä¸­, å°±èƒ½ç›‘å¬æˆ‘æƒ³çŸ¥é“çš„äº‹ä»¶?</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1) åœ¨ AbstractApplicationContext#registerListeners() ä¸­æ‰«æå®¹å™¨å†…æ‰€æœ‰ç›¸å…³å®ç°ç±»åŠ å…¥åˆ°äº‹ä»¶ç›‘å¬è€…é›†åˆä¸­</span><br><span class="line">2) ç„¶ååœ¨publishEventæ—¶ï¼Œéå†äº‹ä»¶ç›‘å¬è€…é›†åˆè°ƒç”¨beançš„æ–¹æ³•å³å¯ã€‚è§‚å¯Ÿè€…æ¨¡å¼ï¼</span><br><span class="line">3) å¦å¤–ä¹Ÿç”¨äº†BeanPostProcessorå»å®ç°, å« ApplicationListenerDetector, åŠ å…¥æ—¶æœºåŒ1, æ‰§è¡Œæ—¶æœºåŒ1.</span><br><span class="line">4) è‡³äºä¸ºä½•ä½¿ç”¨2ç§æœºåˆ¶, åº”è¯¥æ˜¯å› ä¸º registerListeners() æ—¶, æ‰«æåªæ˜¯å½“å‰çš„, åç»­å¯èƒ½å®¹å™¨å†…çš„ bean è¿˜ä¼šå¢åŠ (æˆ‘ä¹ŸçŒœä¸åˆ°å•¥å½¢å¼å¢åŠ , åæ­£ç®€å•å†™ä¸ªç±»è‚¯å®šä¸ä¼š), æ‰€ä»¥è¿˜æ˜¯éœ€è¦ ApplicationListenerDetector åœ¨è¿™ä¸ª Bean åˆå§‹åŒ–æ—¶åŠ å…¥åˆ°ç›‘å¬è€…ä¸­å».</span><br></pre></td></tr></table></figure>



<h3 id="ä¸ºä½•Springä¸­é‡åˆ°å„ç§é¡ºåºé—®é¢˜-åªéœ€è¦å®ç°-Ordered-æ¥å£-æˆ–åŠ ä¸Š-Orderæ³¨è§£-å°±èƒ½ä½¿å…¶æœ‰åº"><a href="#ä¸ºä½•Springä¸­é‡åˆ°å„ç§é¡ºåºé—®é¢˜-åªéœ€è¦å®ç°-Ordered-æ¥å£-æˆ–åŠ ä¸Š-Orderæ³¨è§£-å°±èƒ½ä½¿å…¶æœ‰åº" class="headerlink" title="ä¸ºä½•Springä¸­é‡åˆ°å„ç§é¡ºåºé—®é¢˜, åªéœ€è¦å®ç° Ordered æ¥å£(æˆ–åŠ ä¸Š@Orderæ³¨è§£)å°±èƒ½ä½¿å…¶æœ‰åº?"></a>ä¸ºä½•Springä¸­é‡åˆ°å„ç§é¡ºåºé—®é¢˜, åªéœ€è¦å®ç° Ordered æ¥å£(æˆ–åŠ ä¸Š@Orderæ³¨è§£)å°±èƒ½ä½¿å…¶æœ‰åº?</h3><blockquote>
<p>å› ä¸º Spring é¢„å…ˆåœ¨æ‰§è¡Œè¿™äº›ä¸œè¥¿ä¹‹å‰, è¿›è¡Œä¸€ä¸ªæ’åºåŠ¨ä½œ, ç„¶åæ‰éå†æ‰§è¡Œ. åŒ…æ‹¬AOP, BeanFactoryPostProcessor, BeanPostProcessor .</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1) æ¯”å¦‚è¯´ BeanPostProcesser, å®¹å™¨æ‰«æå, ä¼šåƒå¯¹beané›†åˆæ’åº, å†éå†æ‰§è¡Œ.</span><br><span class="line">2) è¯¦ç»†è¿‡ç¨‹è§ PostProcessorRegistrationDelegate#sortPostProcessors()</span><br></pre></td></tr></table></figure>



<h3 id="Springæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–çš„-æŒ‡ç”¨å­—æ®µæ³¨å…¥è€Œéæ„é€ æ–¹æ³•"><a href="#Springæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–çš„-æŒ‡ç”¨å­—æ®µæ³¨å…¥è€Œéæ„é€ æ–¹æ³•" class="headerlink" title="Springæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–çš„(æŒ‡ç”¨å­—æ®µæ³¨å…¥è€Œéæ„é€ æ–¹æ³•)?"></a>Springæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–çš„(æŒ‡ç”¨å­—æ®µæ³¨å…¥è€Œéæ„é€ æ–¹æ³•)?</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>) é¦–å…ˆï¼Œ å‡å®šæœ‰ä¸¤ä¸ªå•ä¾‹ bean A å’Œ B, A æŒæœ‰ B, B æŒæœ‰Aï¼Œ æ„æˆå¾ªç¯</span><br><span class="line"><span class="number">2</span>) æ­¤æ—¶ç¨‹åºè°ƒç”¨getBeanè·å–Aï¼Œåˆ™åœ¨ doCreateBean ä¸­ åˆ›å»ºåå°† bean ç¼“å­˜åˆ° singletonFactories ä¸­</span><br><span class="line"><span class="number">3</span>) ç„¶åè®¾ç½®å±æ€§B, è§£æå±æ€§, éœ€è¦è·å–Bå¯¹è±¡</span><br><span class="line"><span class="number">4</span>) è·å–B, åˆ™æ‰§è¡ŒdoCreateBean åæ‰§è¡Œè§£æå±æ€§, éœ€è¦è·å– Aå¯¹è±¡ (åˆä¸€æ¬¡)</span><br><span class="line"><span class="number">5</span>) è·å–A, è¿›å…¥ doGetBean ä¸­çš„ getSingleton, æ­¤æ—¶åˆ¤æ–­ singletonFactories ä¸­æœ‰A, åˆ™å¯ä»¥ç›´æ¥å–å‡ºA</span><br><span class="line"><span class="number">6</span>) è·å¾—Aå, å³å¯å®ŒæˆBçš„å±æ€§èµ‹å€¼, ç„¶åä¼šå®ŒæˆBçš„åˆ›å»º.</span><br><span class="line"><span class="number">7</span>) Båˆ›å»ºå®Œå, Aå°±èƒ½è·å¾—B, åˆ™Aä¹Ÿå®Œæˆäº†å±æ€§èµ‹å€¼, æœ€åå®Œæˆåˆ›å»ºA.</span><br><span class="line"><span class="number">8</span>) åˆ°æ­¤, è¿”å›å³å¯.</span><br><span class="line"></span><br><span class="line">&gt; æ€»ç»“: é¦–æ¬¡è·å–A, åˆ›å»ºAå¯¹è±¡åç¼“å­˜ä¸€ä¸ªå­˜å‚¨Aå¯¹è±¡çš„ ObjectFactory å®ä¾‹, å†è§£æå±æ€§æ—¶è§¦å‘ getBean(B), åŒç†ä¹Ÿä¼šåšç¼“å­˜, ç„¶åä¹Ÿè§£æå±æ€§, è§¦å‘getBean(A), ç¬¬äºŒæ¬¡è·å–A, è¿›å…¥å¦ä¸€ä¸ªé€»è¾‘, è¿”å› ObjectFactory å®ä¾‹ä¸­å­˜å‚¨çš„å¯¹è±¡A, å³å¯å®ŒæˆgetBean(A), ç„¶åå®ŒæˆgetBean(B), å†å®Œæˆå¤–å±‚çš„getBean(A).  </span><br><span class="line">  </span><br><span class="line">TIPS:</span><br><span class="line">æ­¥éª¤<span class="number">4</span>ä¸­, ä¼šå…ˆåˆ¤æ–­ earlySingletonObjects, ä¸å­˜åœ¨æ‰åˆ¤æ–­ singletonFactories, è€Œä» singletonFactories ä¸­å–å¾—å¯¹è±¡å, åˆ™ä¼šå°†å…¶ä» singletonFactories ç§»é™¤å¹¶åŠ å…¥ earlySingletonObjects</span><br><span class="line"></span><br><span class="line">è¿™æ˜¯å› ä¸º singletonFactories ç¼“å­˜çš„ FactoryBean, è‹¥åå¤è°ƒç”¨ getObject(), åˆ™æ¯æ¬¡è·å–éƒ½ä¼šè°ƒç”¨ org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory#getEarlyBeanReference æ–¹æ³•, è€Œæ­¤æ–¹æ³•ä¼šæ‰§è¡Œ SmartInstantiationAwareBeanPostProcessor çš„ getEarlyBeanReference(), è¿™ä¼šå¯¼è‡´ BeanPostProcessor é‡å¤æ‰§è¡Œ, æ˜¾ç„¶æ˜¯ä¸è¡Œçš„.</span><br></pre></td></tr></table></figure>



<h3 id="Springå¯ä»¥ç”¨æ³¨è§£æ›¿æ¢XMLé…ç½®æ–‡ä»¶äº†-æ˜¯å¦‚ä½•å®ç°çš„å‘¢-å¸¸ç”¨æ³¨è§£çš„å®ç°åŸç†"><a href="#Springå¯ä»¥ç”¨æ³¨è§£æ›¿æ¢XMLé…ç½®æ–‡ä»¶äº†-æ˜¯å¦‚ä½•å®ç°çš„å‘¢-å¸¸ç”¨æ³¨è§£çš„å®ç°åŸç†" class="headerlink" title="Springå¯ä»¥ç”¨æ³¨è§£æ›¿æ¢XMLé…ç½®æ–‡ä»¶äº†, æ˜¯å¦‚ä½•å®ç°çš„å‘¢(å¸¸ç”¨æ³¨è§£çš„å®ç°åŸç†)?"></a>Springå¯ä»¥ç”¨æ³¨è§£æ›¿æ¢XMLé…ç½®æ–‡ä»¶äº†, æ˜¯å¦‚ä½•å®ç°çš„å‘¢(å¸¸ç”¨æ³¨è§£çš„å®ç°åŸç†)?</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">1) é¦–å…ˆæ˜¯æŒ‡å®šåŒ…åæˆ–æŒ‡å®šç±»å</span><br><span class="line">	å¦‚æŒ‡å®šåŒ…ååˆ™ scan æ—¶ä¼šæ‰§è¡Œ, å¦‚æŒ‡å®šç±»ååˆ™åœ¨æ„é€ æ–¹æ³•åˆå§‹åŒ– reader æ—¶æ‰§è¡Œ</span><br><span class="line">2) æ— è®ºå“ªç§, æœ€ç»ˆéƒ½ä¼šèµ°ä¸€æ®µä»£ç  AnnotationConfigUtils#registerAnnotationConfigProcessors()</span><br><span class="line">3) è¿™æ®µä»£ç ä¼šæ·»åŠ ä¸€äº› BeanFactoryPostProcessor</span><br><span class="line">	å¦‚ ConfigurationClassPostProcessor è´Ÿè´£è§£æ @Configuration&#x2F;@Import&#x2F;@Bean ç­‰æ³¨è§£</span><br><span class="line">    	ç„¶åç”± ConfigurationClassBeanDefinitionReader è´Ÿè´£å°†ä¿¡æ¯è½¬æ¢æˆBeanDefinitionå†æ³¨å†Œåˆ°å®¹å™¨ã€‚</span><br><span class="line">	å¦‚ AutowiredAnnotationBeanPostProcessor è´Ÿè´£è§£æ @Autowired&#x2F;@Value æ³¨è§£</span><br><span class="line">    å¦‚ CommonAnnotationBeanPostProcessor è´Ÿè´£è§£æ @Resource æ³¨è§£</span><br><span class="line">    è§£ææ”¾åœ¨ postProcessProperties() æ–¹æ³•ä¸­ï¼Œ å…ˆæ‰«æbeançš„å­—æ®µå’Œæ–¹æ³•ï¼Œ ç„¶åä¸€ä¸€è°ƒç”¨æ–¹æ³•å’Œä¸ºå­—æ®µæ³¨å…¥å€¼</span><br><span class="line">4) ä¹‹å, ä»–ä¼šå°†æ‰«æçš„ç±»æ”¾åˆ° beanDefinitions ä¸­(æˆ–æŒ‡å®šçš„ç±»æ³¨å†Œè¿›å»)</span><br><span class="line">5) BeanFactoryåŠ è½½å®Œæ¯•å, å›åˆ°AbstractApplicationContextçš„refreshé€»è¾‘</span><br><span class="line">	å¦‚ä¼šæ‰§è¡Œ postProcessBeanFactory(), è°ƒç”¨å‰é¢åŠ å…¥çš„ConfigurationClassPostProcessor</span><br><span class="line">	ç„¶åä¼šæ·»åŠ æ›´å¤šçš„ç±»åˆ°å®¹å™¨ä¸­.</span><br><span class="line">    </span><br><span class="line">æ³¨æ„äº‹é¡¹ï¼š</span><br><span class="line">    @Configuration å’Œ @Componentçš„åŒºåˆ«ï¼Ÿ</span><br><span class="line">    è§‚å¯Ÿå‘ç°ï¼Œå³ä½¿ä½¿ç”¨@Component å…¶ä¸‹å¸¦ @Bean çš„æ–¹æ³•ä¾ç„¶å¯ä»¥æ³¨å…¥åˆ°å®¹å™¨ä¸­ã€‚æ‰€ä»¥ä¼¼ä¹ä¸¤è€…æ²¡æœ‰åŒºåˆ«ï¼Ÿ</span><br><span class="line">    ä»”ç»†æŸ¥çœ‹æºç å’Œèµ„æ–™åï¼Œå‘ç° postProcessBeanFactory() æ–¹æ³•åœ¨ processConfigBeanDefinitions() åè¿˜ä¼šè°ƒç”¨ enhanceConfigurationClasses()</span><br><span class="line">    è€Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­, å¯¹å‰é¢è§£æäº†class æ˜¯ CONFIGURATION_CLASS_FULL (å³ä»£è¡¨@Configuration)çš„ç±»</span><br><span class="line">    ä¼šç”Ÿæˆä¸€ä¸ª cglib çš„ä»£ç†, è¿™æ ·è·å–@Beanæ³¨è§£çš„æ–¹æ³•çš„beanæ—¶,ä¸ä¼šæ¯æ¬¡è°ƒç”¨æ–¹æ³•new ä¸€ä¸ª, è€Œæ˜¯æœ‰ç¼“å­˜.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ€»ç»“: å°±æ˜¯åˆ©ç”¨ BeanFactoryPostProcessor å¯è·å– BeanDefinitionRegistry å¯¹è±¡, ç„¶åæ‰«æå®¹å™¨å†…å¸¦æœ‰æ³¨è§£çš„ bean, è§£æè¿™äº›æ³¨è§£å¾—åˆ°ä¸€äº› BeanDefinition, å†é€šè¿‡è·å¾—çš„ BeanDefinitionRegistryå¯¹è±¡æ³¨å†Œåˆ° BeanFactory ä¸­.</p>
</blockquote>
<h3 id="Spring-AOPæ˜¯å¦‚ä½•å®ç°çš„-æŒ‡-Aspect"><a href="#Spring-AOPæ˜¯å¦‚ä½•å®ç°çš„-æŒ‡-Aspect" class="headerlink" title="Spring AOPæ˜¯å¦‚ä½•å®ç°çš„(æŒ‡@Aspect)?"></a>Spring AOPæ˜¯å¦‚ä½•å®ç°çš„(æŒ‡@Aspect)?</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1) ä½¿ç”¨ @EnableAspectJAutoProxy</span><br><span class="line">2) @EnableAspectJAutoProxy ä¸­ä½¿ç”¨äº† @Import(AspectJAutoProxyRegistrar.class)</span><br><span class="line">3) ConfigurationClassPostProcessor ä¼šè§£æ@Import, è¿›å…¥ registerBeanDefinitions() ä¸­</span><br><span class="line">4) registerBeanDefinitions() ä¸­æ·»åŠ äº† AnnotationAwareAspectJAutoProxyCreator åˆ°å®¹å™¨ä¸­</span><br><span class="line">5) AnnotationAwareAspectJAutoProxyCreator æœ¬è´¨ä¸Šæ—¶ä¸€ä¸ª BeanPostProcessor</span><br><span class="line">6) å› æ­¤åœ¨ createBean æ—¶, ä¼šè¢«è‡ªåŠ¨è°ƒç”¨. å…¶ä¸­ postProcessAfterInitialization() è´Ÿè´£åˆ›å»ºä»£ç†å¯¹è±¡</span><br><span class="line">7) è€Œ getAdvicesAndAdvisorsForBean() åˆ™è´Ÿè´£æŸ¥æ‰¾å¯¹åº”çš„å¢å¼º. ç„¶åä¼šè°ƒç”¨å­ç±»çš„findCandidateAdvisors</span><br><span class="line">8) å¦‚ AnnotationAwareAspectJAutoProxyCreator#findCandidateAdvisors() è´Ÿè´£æ³¨è§£ç¼–å†™å¢å¼º@Before&#x2F;@Afterç­‰</span><br><span class="line">9) ç®€å•è¯´ä¸‹é€»è¾‘, å°±æ˜¯æŸ¥æ‰¾å®¹å™¨æ‰€æœ‰ç±», åˆ¤æ–­è¿™ä¸ªç±»æœ‰æ²¡æœ‰ @Aspect æ³¨è§£, ç„¶åå…ˆæ‰¾å‡ºæ‰€æœ‰Pointcut</span><br><span class="line">	å†éå†æ‰€æœ‰æ–¹æ³•, æ‰¾å‡ºæ–¹æ³•ä¸Šå¸¦æœ‰@Beforeç­‰æ³¨è§£ä¸”æœ‰å…³è”çš„Pointcutçš„æ–¹æ³•,</span><br><span class="line">    ç„¶åä½¿ç”¨è¿™ä¸ªæ–¹æ³•å’Œå…³è”çš„Pointcut æ¥new ä¸€ä¸ªAdvisor, åŠ å…¥åˆ°Advisoré›†åˆä¸­, éå†ç»“æŸåè¿”å›å³å¯.</span><br><span class="line">10) æŸ¥æ‰¾åˆ°æ‰€æœ‰çš„å¢å¼ºå, å†æ¯”è¾ƒPointcutè¡¨è¾¾å¼æ˜¯å¦åŒ¹é…å½“å‰çš„bean, å¦‚å¯ä»¥åˆ™åŠ å…¥.</span><br><span class="line">11) æ ¹æ®æ‰¾åˆ°çš„Advisoré›†åˆ, åˆ›å»ºä¸€ä¸ªå¸¦é…ç½®(advisoré›†åˆç­‰)çš„ä»£ç†å¯¹è±¡, ä»£ç†å¯¹è±¡æ‰§è¡Œæ–¹æ³•å‰</span><br><span class="line">12) ä¼šå…ˆæ ¹æ®é…ç½®ä¸­çš„advisoré›†åˆç”Ÿæˆä¸€ä¸ªæ‰§è¡Œé“¾, ç„¶ååœ¨æ‹¦æˆªä»£ç†æ–¹æ³•å¤„è°ƒç”¨. æ‰§è¡Œé“¾ä¼šè´Ÿè´£æ‰§è¡Œé€šçŸ¥.</span><br><span class="line">13) ä¸åŒçš„é€šçŸ¥ç”±ä¸åŒçš„é€‚é…å™¨æ‰§è¡Œ.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ€»ç»“å°±æ˜¯é€šè¿‡ @EnableAspectJAutoProxy çš„@Import, ä½¿å¾—ç¨‹åºæœ€ç»ˆä¼šæ‰§è¡Œ AnnotationAwareAspectJAutoProxyCreator çš„ postProcessAfterInitialization(å¯¹è±¡åˆå§‹åŒ–åè°ƒç”¨) æ–¹æ³•, è¿™ä¸ªæ–¹æ³•åœ¨ BeanFactoryåˆ›å»ºå®Œå¯¹è±¡åè§¦å‘, æ­¤æ—¶ä¾¿å¯é€šè¿‡ CGlib ç­‰åŠ¨æ€ä»£ç†æŠ€æœ¯ä¸º åˆ›å»ºçš„ bean å¯¹è±¡åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡, ç„¶åè¿™ä¸ªä»£ç†å¯¹è±¡ä¼šæ ¹æ® Pointcut æ‰¾åˆ°å…³è”çš„ Advisor,  å¹¶åœ¨åˆé€‚çš„æ—¶æœºæ‰§è¡Œå¯¹åº”çš„ Advisor, å¦‚ @Beforeäº§ç”Ÿçš„Advisor ä¼šåœ¨æ‰§è¡Œäº† bean å¯¹è±¡çš„æŒ‡å®šæ–¹æ³•(çœ‹Pointcuté…ç½®)åæ‰§è¡Œ.</p>
</blockquote>
<h3 id="Spring-äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„-æŒ‡-Transaction"><a href="#Spring-äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„-æŒ‡-Transaction" class="headerlink" title="Spring äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„(æŒ‡@Transaction)?"></a>Spring äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„(æŒ‡@Transaction)?</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">0) äº‹åŠ¡æ˜¯ç”±AOPå®ç°çš„, æ‰€ä»¥éœ€è¦æ‰¾åˆ°å¯¹åº”çš„Pointcut å’Œ Advisor</span><br><span class="line">1) æ‰“å¼€äº† @EnableTransactionManagement æ³¨è§£</span><br><span class="line">2) ç„¶å@Import äº† TransactionManagementConfigurationSelector</span><br><span class="line">3) ä¹‹åå¯¼å…¥äº† ProxyTransactionManagementConfiguration åˆ°å®¹å™¨ä¸­</span><br><span class="line">4) ProxyTransactionManagementConfiguration å¸¦æœ‰ @Configuration</span><br><span class="line">5) @Bean æ³¨å…¥äº†ä¸€ä¸ªé€šç”¨çš„Advisor: BeanFactoryTransactionAttributeSourceAdvisor</span><br><span class="line">6) è¿™ä¸ªAdvisorçš„ Pointcut æ˜¯ç”± TransactionAttributeSourcePointcut å®ç°çš„</span><br><span class="line">	å®ç°é€»è¾‘æ˜¯ TransactionAttributeSourcePointcut çš„ matches()</span><br><span class="line">    è¿™ä¸ªæ–¹æ³•è°ƒç”¨äº† getTransactionAttributeSource() è·å– AnnotationTransactionAttributeSource</span><br><span class="line">    ç„¶åé€šè¿‡ getTransactionAttribute() è°ƒç”¨äº† findTransactionAttribute()</span><br><span class="line">    æœ€ç»ˆä½¿ç”¨SpringTransactionAnnotationParser ç±»åˆ¤æ–­æ–¹æ³•æ˜¯å¦æœ‰@Transactionalæ³¨è§£</span><br><span class="line">    å¹¶è§£ææ³¨è§£ä¿¡æ¯ç„¶åè¿”å›. å¦å¤–è¿™ä¸ªæ–¹æ³•è¿˜å¯ä»¥è·å–@Transactionalæ³¨è§£çš„ä¿¡æ¯, è€Œè¿™é‡Œåªç”¨äºåˆ¤æ–­æ˜¯å¦éœ€è¦æ‹¦æˆªè¿™ä¸ªæ–¹æ³•.</span><br><span class="line">7) TransactionInterceptor æ˜¯ä¸€ä¸ªAdvisor</span><br><span class="line">    ä¹Ÿå¯ä»¥é€šè¿‡AnnotationTransactionAttributeSourceè·å–@Transactionalæ³¨è§£ä¸Šçš„ä¿¡æ¯</span><br><span class="line">    ç„¶ååœ¨invokeä¸­, æ‹¦æˆªæ–¹æ³•, æ‰“å¼€äº‹åŠ¡, åœ¨æ‰§è¡Œå®Œæ–¹æ³•å, æäº¤äº‹åŠ¡, æŠ¥é”™æ—¶å›æ»šäº‹åŠ¡</span><br><span class="line">    è¿™ä¸ª Advisor ä¸åŒäºä¼ ç»Ÿçš„å‰ç½®&#x2F;åç½®, è€Œæ˜¯æ›´å…·ä½“çš„ MethodInterceptor(åŠ¨æ€ä»£ç†ç›´æ¥ç›¸å…³).</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ€»ç»“: å°±æ˜¯åŸºäºAOPå®ç°çš„, åªéœ€æ‰¾åˆ°å¯¹åº”çš„ Pointcut å’Œ Advisor å³å¯. Pointcut å°±æ˜¯æ ¹æ® @Transaction æ³¨è§£åˆ¤æ–­æ–¹æ³•æ˜¯å¦éœ€è¦ä»£ç†, è¿™ä¸ªå¾ˆç®€å•; æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯ Advisor ä¸æ˜¯æˆ‘ä»¬å†™AOPé‚£ç§ @Before,@Aroundä¹‹ç±»çš„, è€Œæ˜¯æ›´æ¥è¿‘åŠ¨æ€ä»£ç†åŸå§‹çš„è¯­æ³•çš„ MethodInterceptor å³ TransactionInterceptor.</p>
</blockquote>
<h2 id="BeanFactoryPostProcessor-ç›¸å…³ç±»åˆ†æ"><a href="#BeanFactoryPostProcessor-ç›¸å…³ç±»åˆ†æ" class="headerlink" title="BeanFactoryPostProcessor ç›¸å…³ç±»åˆ†æ"></a>BeanFactoryPostProcessor ç›¸å…³ç±»åˆ†æ</h2><h3 id="BeanFactoryPostProcessor-ç”Ÿæ•ˆåŸç†"><a href="#BeanFactoryPostProcessor-ç”Ÿæ•ˆåŸç†" class="headerlink" title="BeanFactoryPostProcessor ç”Ÿæ•ˆåŸç†"></a>BeanFactoryPostProcessor ç”Ÿæ•ˆåŸç†</h3><blockquote>
<p>ç”Ÿæ•ˆåŸç†å°±æ˜¯, ApplicationContext çš„ refresh æ–¹æ³•ä¸­ä¼šæ‰«æå‡ºå®¹å™¨ä¸­å®ç°äº† BeanFactoryPostProcessor æ¥å£çš„ bean, å°†å…¶æ’åºåæ‰§è¡Œç›¸åº”çš„æ¥å£, è¿™æ ·æˆ‘ä»¬å†™çš„ç±»å®ç°çš„ç›¸åº”çš„æ¥å£çš„æ–¹æ³•å°±è¢«æ‰§è¡Œäº†.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å¸¸ç”¨çš„ BeanFactoryPostProcessor</span><br><span class="line"><span class="comment"># ConfigurationClassPostProcessor</span></span><br><span class="line">è¿™ä¸ªç±»ä½œç”¨å°±æ˜¯è§£æ @Configuration/@Component/@Import/@ImportSource/@ComponentScan ç­‰åŸºç¡€æ³¨è§£. æ˜¯æ³¨è§£å¼€å‘çš„åŸºçŸ³, æ›´æ˜¯ Spring Boot çš„åŸºçŸ³.</span><br></pre></td></tr></table></figure>



<h2 id="BeanPostProcessor-ç›¸å…³ç±»åˆ†æ"><a href="#BeanPostProcessor-ç›¸å…³ç±»åˆ†æ" class="headerlink" title="BeanPostProcessor ç›¸å…³ç±»åˆ†æ"></a>BeanPostProcessor ç›¸å…³ç±»åˆ†æ</h2><h3 id="BeanPostProcessor-ç”Ÿæ•ˆåŸç†"><a href="#BeanPostProcessor-ç”Ÿæ•ˆåŸç†" class="headerlink" title="BeanPostProcessor ç”Ÿæ•ˆåŸç†"></a>BeanPostProcessor ç”Ÿæ•ˆåŸç†</h3><blockquote>
<p>åœ¨ refresh() ä¸­ä¼šæ‰«æå®¹å™¨ä¸­æ‰€æœ‰ å®ç°äº† BeanPostProcessor æ¥å£çš„ç±», æ·»åŠ åˆ° BeanFactory çš„ beanPostProcessors å­—æ®µä¸­(æ˜¯ä¸ªList[CopyOnWriteArrayListè‡ªå®šä¹‰ç‰ˆ, è‡ªå®šä¹‰åŠ å…¥äº†æ¸…ç©ºç¼“å­˜çš„é€»è¾‘]), ç„¶ååœ¨ BeanFactory åˆ›å»ºå¯¹è±¡æ—¶ createBean() åœ¨é€‚å½“çš„æ—¶æœºè°ƒç”¨å¯¹åº”çš„æ–¹æ³•.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">æœ‰å“ªå‡ ç§ BeanPostProcessor (é»˜è®¤çš„+æ‰©å±•)</span><br><span class="line">1.InstantiationAwareBeanPostProcessor</span><br><span class="line">	postProcessAfterInstantiation: å¯¹è±¡å®ä¾‹åŒ–åè°ƒç”¨</span><br><span class="line">	postProcessBeforeInstantiation: å¯¹è±¡å®ä¾‹åŒ–å‰è°ƒç”¨</span><br><span class="line">	postProcessProperties: è®¾ç½®å±æ€§å€¼å‰</span><br><span class="line">	postProcessPropertyValues: è®¾ç½®å±æ€§å€¼å‰, è‹¥ä¸Šä¸ªæ–¹æ³•ä¸å¤„ç†(è¿”å›null)æ‰ä¼šè§¦å‘</span><br><span class="line"></span><br><span class="line">2.SmartInstantiationAwareBeanPostProcessor</span><br><span class="line">  predictBeanType: è·å–ä¸€ä¸ª bean çš„ class ç±»å‹å‰è°ƒç”¨</span><br><span class="line">  getEarlyBeanReference: è·å–ä¸€ä¸ªäºŒçº§ç¼“å­˜å¯¹è±¡(singletonFactoriesçš„getObject)æ—¶è°ƒç”¨</span><br><span class="line">  determineCandidateConstructors: å†³å®šä¸€ä¸ª bean å®ä¾‹åŒ–çš„æ„é€ å‚æ•°æ˜¯ä»€ä¹ˆæ—¶è°ƒç”¨</span><br><span class="line">	</span><br><span class="line">3.DestructionAwareBeanPostProcessor</span><br><span class="line">	postProcessBeforeDestruction: å¯¹è±¡é”€æ¯å‰è°ƒç”¨</span><br><span class="line">	requiresDestruction: åˆ¤æ–­è¿™ä¸ªç±»é’ˆå¯¹æŸä¸ª bean æ˜¯å¦æ‰§è¡Œ postProcessBeforeDestruction()</span><br><span class="line">	</span><br><span class="line">4.MergedBeanDefinitionPostProcessor</span><br><span class="line">  postProcessMergedBeanDefinition: åœ¨åˆ›å»ºå¯¹è±¡å‰è°ƒç”¨, å¯å¯¹ BeanDefinition åšä¿®æ”¹</span><br><span class="line">  resetBeanDefinition: åœ¨é‡ç½® BeanDefinition æ—¶è°ƒç”¨, ç”¨äºæ¸…ç©º PostProcessor å¯¹åº”çš„ç¼“å­˜</span><br><span class="line">	</span><br><span class="line">5.BeanPostProcessor(åŸºç¡€)</span><br><span class="line">  postProcessBeforeInitialization: åˆ›å»ºå¯¹è±¡å(ä¹Ÿè®¾ç½®å¥½äº†å­—æ®µ), åœ¨è°ƒç”¨ init ä¹‹å‰è°ƒç”¨</span><br><span class="line">  postProcessAfterInitialization: åœ¨åˆ›å»ºå¯¹è±¡æ—¶, è°ƒç”¨äº† init ä¹‹åè°ƒç”¨</span><br><span class="line">  </span><br><span class="line">æ€»ç»“: </span><br><span class="line">0.å¯¹ BeanDefinition åšå¹²é¢„</span><br><span class="line">1.å¯¹è±¡å®ä¾‹åŒ–è¿‡ç¨‹ä¸­(å¯¹class/æ„é€ å‚æ•°è¿›è¡Œå¹²é¢„)</span><br><span class="line">2.å¯¹è±¡å®ä¾‹åŒ–å‰å</span><br><span class="line">3.å¯¹è±¡è®¾ç½®å±æ€§å‰, å¯¹å±æ€§åšå¹²é¢„</span><br><span class="line">4.å¯¹è±¡åˆå§‹åŒ–(init)å‰å</span><br><span class="line">5.å¯¹è±¡é”€æ¯å‰</span><br></pre></td></tr></table></figure>

<h3 id="è°ƒç”¨æ—¶æœº"><a href="#è°ƒç”¨æ—¶æœº" class="headerlink" title="è°ƒç”¨æ—¶æœº"></a>è°ƒç”¨æ—¶æœº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 1.1: InstantiationAwareBeanPostProcessor çš„ postProcessAfterInstantiation()</span></span><br><span class="line"><span class="comment">//   åœ¨ org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean ç¬¬ä¸€æ®µ</span></span><br><span class="line"><span class="comment">// 1.2: InstantiationAwareBeanPostProcessor çš„ postProcessProperties()</span></span><br><span class="line"><span class="comment">//   åœ¨ org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean ç¬¬äºŒæ®µ</span></span><br><span class="line"><span class="comment">// 1.3: InstantiationAwareBeanPostProcessor çš„ postProcessPropertyValues</span></span><br><span class="line"><span class="comment">//   åœ¨ org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean ç¬¬ä¸‰æ®µ</span></span><br><span class="line"><span class="comment">// 1.4: InstantiationAwareBeanPostProcessor çš„ postProcessBeforeInstantiation()</span></span><br><span class="line"><span class="comment">//   åœ¨ org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInstantiation ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.1: SmartInstantiationAwareBeanPostProcessor çš„ predictBeanType()</span></span><br><span class="line"><span class="comment">//   åœ¨ org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType ä¸­</span></span><br><span class="line"><span class="comment">// 2.2: SmartInstantiationAwareBeanPostProcessor çš„ getEarlyBeanReference()</span></span><br><span class="line"><span class="comment">//   åœ¨ org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getEarlyBeanReference ä¸­</span></span><br><span class="line"><span class="comment">// 2.3: SmartInstantiationAwareBeanPostProcessor çš„ determineCandidateConstructors()</span></span><br><span class="line"><span class="comment">//   åœ¨ org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.1: MergedBeanDefinitionPostProcessor çš„ postProcessMergedBeanDefinition()</span></span><br><span class="line"><span class="comment">//   åœ¨ org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyMergedBeanDefinitionPostProcessors ä¸­</span></span><br><span class="line"><span class="comment">// 3.2: MergedBeanDefinitionPostProcessor çš„ resetBeanDefinition()</span></span><br><span class="line"><span class="comment">//   åœ¨ org.springframework.beans.factory.support.DefaultListableBeanFactory.resetBeanDefinition ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.1: DestructionAwareBeanPostProcessor çš„ postProcessBeforeDestruction()</span></span><br><span class="line"><span class="comment">//   åœ¨ org.springframework.beans.factory.support.DisposableBeanAdapter.destroy ä¸­</span></span><br><span class="line"><span class="comment">// 4.2: DestructionAwareBeanPostProcessor çš„ requiresDestruction()</span></span><br><span class="line"><span class="comment">//   åœ¨ org.springframework.beans.factory.support.DisposableBeanAdapter.filterPostProcessors å’Œ org.springframework.beans.factory.support.DisposableBeanAdapter.hasApplicableProcessors ä¸­</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœ‰å“ªäº›å¸¸ç”¨çš„ BeanPostProcessor</span></span><br><span class="line">1.AsyncAnnotationBeanPostProcessor: ç”¨äºåœ¨å°† @Async ç›¸åº”çš„ Advisor åŠ å…¥åˆ°å¯¹è±¡çš„ä»£ç†ä¸­</span><br><span class="line">2.ScheduledAnnotationBeanPostProcessor: ç”¨äºå¤„ç† @Scheduled æ³¨è§£, å°† bean ç”Ÿäº§ä»£ç†ç±»</span><br><span class="line">3.AnnotationAwareAspectJAutoProxyCreator: AOP å®ç°æ ¸å¿ƒç±»</span><br><span class="line">4.AutowiredAnnotationBeanPostProcessor: ç”¨äºå¤„ç† @Autowired æ³¨è§£</span><br><span class="line">5.ApplicationListenerDetector: ç”¨äºå¤„ç†å®ç° ApplicationListener æ¥å£çš„ bean å¯¹è±¡, å°†å…¶æ·»åŠ åˆ°äº‹ä»¶å¹¿æ’­å™¨çš„ç›‘å¬è€…é›†åˆä¸­.</span><br><span class="line">...</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://gudqs7.github.io/2020/05/20/interview/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="gudqs7">
      <meta itemprop="description" content="å¿ƒç´¯æ²¡é’±èººå°¸ä¸­">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gudqs7's note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/20/interview/" class="post-title-link" itemprop="url">Java-Interview</a>
        </h2>

        <div class="post-meta">
			
				<i class="fa fa-thumb-tack"></i>
				<font color="RED">ç½®é¡¶</font>
				<span class="post-meta-divider">|</span>
			
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-05-20 08:48:14" itemprop="dateCreated datePublished" datetime="2020-05-20T08:48:14+08:00">2020-05-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-01-23 14:39:57" itemprop="dateModified" datetime="2021-01-23T14:39:57+08:00">2021-01-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MyBatis/" itemprop="url" rel="index"><span itemprop="name">MyBatis</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring-MVC/" itemprop="url" rel="index"><span itemprop="name">Spring-MVC</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/interview/" itemprop="url" rel="index"><span itemprop="name">interview</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2020/05/20/interview/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/20/interview/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ä¸€å¥è¯"><a href="#ä¸€å¥è¯" class="headerlink" title="ä¸€å¥è¯"></a>ä¸€å¥è¯</h2><h3 id="è¯´ä¸€ä¸‹ä½ é‡æ„ä»£ç éƒ½åšäº†ä»€ä¹ˆ"><a href="#è¯´ä¸€ä¸‹ä½ é‡æ„ä»£ç éƒ½åšäº†ä»€ä¹ˆ" class="headerlink" title="è¯´ä¸€ä¸‹ä½ é‡æ„ä»£ç éƒ½åšäº†ä»€ä¹ˆ?"></a>è¯´ä¸€ä¸‹ä½ é‡æ„ä»£ç éƒ½åšäº†ä»€ä¹ˆ?</h3><blockquote>
<p>é¦–å…ˆæ˜¯ä¸¤å±‚æ”¹æˆä¸‰å±‚, æŠŠcontroller çš„ä»£ç å°½é‡è¿ç§»åˆ° service å±‚. ç„¶åå°†è¯·æ±‚é£æ ¼å’Œå“åº”æ•°æ®ç»“æ„ç»Ÿä¸€. è¿˜æœ‰å°±æ˜¯å¤„ç†å…¨å±€å¼‚å¸¸, æœ€åå¯¹æŸäº›é‡å¤ä»£ç å°è£…æˆå·¥å…·ç±». å¦å¤–è¿˜ä¼šæ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯ä½¿ç”¨ä¸€äº›è®¾è®¡æ¨¡å¼, æé«˜ä»£ç å¯æ‰©å±•æ€§, é™ä½ä»£ç ä¹‹é—´çš„è€¦åˆæ€§.</p>
</blockquote>
<h3 id="ä»€ä¹ˆæ˜¯-JVM"><a href="#ä»€ä¹ˆæ˜¯-JVM" class="headerlink" title="ä»€ä¹ˆæ˜¯ JVM?"></a>ä»€ä¹ˆæ˜¯ JVM?</h3><blockquote>
<p> JVM å°±æ˜¯ç”±ç¼–è¯‘å™¨, ç±»åŠ è½½å™¨, æ‰§è¡Œå¼•æ“, è¿è¡Œæ—¶æ•°æ®åŒºç»„æˆ. å…¶ä¸­æ•°æ®åŒºåŒ…å« å †,æ ˆ,æœ¬åœ°æ–¹æ³•æ ˆ, æ–¹æ³•åŒºå’Œç¨‹åºè®¡æ•°å™¨(PC å¯„å­˜å™¨), å…¶ä¸­æ ˆæ˜¯ç”±å±€éƒ¨å˜é‡è¡¨, æ“ä½œæ•°æ ˆ, åŠ¨æ€é“¾æ¥, è¿”å›åœ°å€ç»„æˆçš„.</p>
</blockquote>
<h3 id="ä½ æ˜¯æ€ä¹ˆå¯¹-jvm-åƒåœ¾å›æ”¶è¿›è¡Œä¼˜åŒ–çš„"><a href="#ä½ æ˜¯æ€ä¹ˆå¯¹-jvm-åƒåœ¾å›æ”¶è¿›è¡Œä¼˜åŒ–çš„" class="headerlink" title="ä½ æ˜¯æ€ä¹ˆå¯¹ jvm åƒåœ¾å›æ”¶è¿›è¡Œä¼˜åŒ–çš„?"></a>ä½ æ˜¯æ€ä¹ˆå¯¹ jvm åƒåœ¾å›æ”¶è¿›è¡Œä¼˜åŒ–çš„?</h3><blockquote>
<p>æ ¹æ®æœåŠ¡å™¨çš„é…ç½®, è°ƒæ•´é’å¹´ä»£å’Œè€å¹´ä»£çš„å†…å­˜å¤§å°åŠæ¯”ä¾‹, åœ¨å›æ”¶é¢‘ç‡å’Œå›æ”¶é€Ÿåº¦ä¸Šåšå–èˆ, ä½¿ç”¨ G1 åƒåœ¾å›æ”¶æœŸæ§åˆ¶ STW åœé¡¿æ—¶é—´, æé«˜ååé‡.</p>
</blockquote>
<h3 id="è¯´è¯´-MySQL-ä¼˜åŒ–"><a href="#è¯´è¯´-MySQL-ä¼˜åŒ–" class="headerlink" title="è¯´è¯´ MySQL ä¼˜åŒ–"></a>è¯´è¯´ MySQL ä¼˜åŒ–</h3><blockquote>
<p>é¦–å…ˆæ˜¯ SQL æŸ¥è¯¢ä¼˜åŒ–, é€šè¿‡å¯¹è”è¡¨å­—æ®µ, æŸ¥è¯¢æ¡ä»¶, åˆ†ç»„å­—æ®µ, æ’åºå­—æ®µè¿›è¡Œç»¼åˆåˆ†æ, æ ¹æ®æœ€å·¦åŸåˆ™å»ºç«‹ä¸€ä¸ªæˆ–å¤šä¸ªå¤åˆç´¢å¼•, ç„¶åä½¿ç”¨ explain åˆ†æSQLæ‰§è¡Œè®¡åˆ’, åˆ¤æ–­ç´¢å¼•ä½¿ç”¨æƒ…å†µ, æ ¹æ®åˆ†æç»“æœè¿›ä¸€æ­¥æ”¹è¿›ç´¢å¼•.</p>
<p>ç„¶åæ˜¯å¯¹äºæ•°æ®é‡å¤§çš„è¡¨, è€ƒè™‘å‚ç›´æˆ–æ°´å¹³åˆ†è¡¨, è¯»å¤šå†™å°‘çš„æƒ…å†µ, å¯ä»¥ä¸€ä¸»å¤šä»é›†ç¾¤. å¦å¤–å¯¹äºä¸€äº›ç»Ÿè®¡ç±»çš„æŸ¥è¯¢, å¯ä»¥ç”¨å®šæ—¶ä»»åŠ¡å°†ç»Ÿè®¡ç»“æœå­˜å‚¨èµ·æ¥, è€Œéå®æ—¶æŸ¥è¯¢.</p>
</blockquote>
<h3 id="ä½ ç”¨-Redis-åšäº†ä»€ä¹ˆ"><a href="#ä½ ç”¨-Redis-åšäº†ä»€ä¹ˆ" class="headerlink" title="ä½ ç”¨ Redis åšäº†ä»€ä¹ˆ?"></a>ä½ ç”¨ Redis åšäº†ä»€ä¹ˆ?</h3><blockquote>
<p>å°†é«˜è®¿é—®çš„é¦–é¡µå•†å“åˆ—è¡¨ç¼“å­˜åˆ° redis ä¸­, é¿å…æ•°æ®åº“ç“¶é¢ˆ, æé«˜å“åº”é€Ÿåº¦. </p>
<p>å•†å“åŒæ­¥é—®é¢˜: å®šæ—¶ä»»åŠ¡åˆ·æ–°. æˆ–ä¿®æ”¹å•†å“æ—¶æ›´æ–°, ç¼“å­˜è®¾ç½®å¤±æ•ˆæ—¶é—´, å¤±æ•ˆåè‡ªåŠ¨è¯»å–æ•°æ®åº“.</p>
<p>å°†è´­ç‰©è½¦æ•°æ®å­˜æ”¾åˆ° redis, æé«˜è´­ç‰©è½¦äº¤äº’ä½“éªŒ(åŠ å¿«å“åº”é€Ÿåº¦).</p>
</blockquote>
<h3 id="ä½ ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—åšäº†ä»€ä¹ˆ"><a href="#ä½ ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—åšäº†ä»€ä¹ˆ" class="headerlink" title="ä½ ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—åšäº†ä»€ä¹ˆ?"></a>ä½ ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—åšäº†ä»€ä¹ˆ?</h3><blockquote>
<p>è§£è€¦: å¦‚ä¸‹å•ç³»ç»Ÿè°ƒç”¨åº“å­˜ç³»ç»Ÿå‡åº“å­˜, è‹¥è°ƒç”¨æ—¶åº“å­˜ç³»ç»ŸæŒ‚äº†æˆ–å‡ºé”™äº†, ä¸‹å•ç³»ç»Ÿè¿˜éœ€è¦åšé‡è¯•å¤„ç†, å¼‚å¸¸å¤„ç†, æ­¤æ—¶å¯å°†å‡åº“å­˜è¯·æ±‚æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­, åº“å­˜ç³»ç»Ÿè¯»å–æ¶ˆæ¯è¿›è¡Œå¤„ç†, è‹¥å‡ºé”™åˆ™æ”¾å›æ¶ˆæ¯é˜Ÿåˆ—é‡è¯•. è¿™æ ·å³ä½¿ä»£ç  bug å¯¼è‡´ä¸€ç›´ä¸æˆåŠŸä¹Ÿå¯åœ¨å‡çº§åè‡ªåŠ¨é‡è¯•, æ— éœ€äººå·¥å¹²é¢„. å¦å¾®ä¿¡æ”¯ä»˜å›è°ƒä¹Ÿå¯å¦‚æ­¤å¤„ç†.</p>
<p>å‰Šå³°: å¦‚ç§’æ€ç¬é—´è¯·æ±‚è¿‡é«˜, å¯å°†è¯·æ±‚æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­, å¦ä¸€ç«¯ç¼“æ…¢æ¶ˆè´¹, å¯é˜²æ­¢ç³»ç»Ÿå¡ä½.</p>
<p>å¼‚æ­¥: æ¯”å¦‚ä¸‹å•åå‘é€ä¸‹å•é€šçŸ¥, æœ‰çŸ­ä¿¡é€šçŸ¥, å¾®ä¿¡å…¬ä¼—å·é€šçŸ¥ç­‰, ä¸€ä¸ªä¸€ä¸ªå‘é€ä¼šå¯¼è‡´ä¸‹å•è¿™ä¸ªè¯·æ±‚å“åº”å¾ˆæ…¢, å› æ­¤å¯ä»¥å°†å‡ ä¸ªé€šçŸ¥åšæˆä¸€ä¸ªæ¶ˆæ¯, æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—, ç”±å¦ä¸€å¤„ä»£ç å¼‚æ­¥æ‰§è¡Œ.</p>
</blockquote>
<h3 id="ä½ ä½¿ç”¨çº¿ç¨‹æ± åšäº†ä»€ä¹ˆ"><a href="#ä½ ä½¿ç”¨çº¿ç¨‹æ± åšäº†ä»€ä¹ˆ" class="headerlink" title="ä½ ä½¿ç”¨çº¿ç¨‹æ± åšäº†ä»€ä¹ˆ?"></a>ä½ ä½¿ç”¨çº¿ç¨‹æ± åšäº†ä»€ä¹ˆ?</h3><blockquote>
<p>å°†çº¿ç¨‹æ± å°è£…åˆ°ä¸€ä¸ªå·¥å…·ç±»ä¸­, å·¥å…·ç±»å†åšæˆå•ä¾‹æ¨¡å¼. è¿™æ ·ä½¿ç”¨åˆ°å¤šçº¿ç¨‹çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªå…¬å…±çº¿ç¨‹æ± , å‡å°‘çº¿ç¨‹å¯¹è±¡åˆ›å»ºé”€æ¯. æé«˜çº¿ç¨‹çš„åˆ©ç”¨ç‡.</p>
<p>ä¸€äº›åœ°æ–¹å¼‚æ­¥æ“ä½œ, æ‹¦æˆªå™¨æ·»åŠ è¯·æ±‚æ—¥å¿—æ—¶å¼‚æ­¥æ·»åŠ .</p>
</blockquote>
<h3 id="ä½ åœ¨ä»£ç ä¸­ä½¿ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼"><a href="#ä½ åœ¨ä»£ç ä¸­ä½¿ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼" class="headerlink" title="ä½ åœ¨ä»£ç ä¸­ä½¿ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼?"></a>ä½ åœ¨ä»£ç ä¸­ä½¿ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼?</h3><blockquote>
<p>å•ä¾‹æ¨¡å¼, é™æ€å·¥å‚æ¨¡å¼, æ¨¡æ¿æ–¹æ³•, è§‚å¯Ÿè€…, è£…é¥°è€…, ç­–ç•¥æ¨¡å¼, çŠ¶æ€æ¨¡å¼, èŒè´£é“¾æ¨¡å¼.</p>
<p>è§‚å¯Ÿè€…: ç›‘å¬å•†å“ä¿¡æ¯æ›´æ–°, æ ¹æ®ä½£é‡‘å˜åŒ–å¹…åº¦å†³å®šæ˜¯å¦åˆ é™¤, æ ¹æ®ä½£é‡‘å˜åŒ–å’Œä»·æ ¼å˜åŒ–å¹…åº¦å†³å®šæ˜¯å¦é€šçŸ¥ç”¨æˆ·æ”¶è—å•†å“å˜åŒ–.</p>
<p>ç­–ç•¥æ¨¡å¼: è®¢å•ä¸åŒç±»å‹, å¯¹åº”çš„å•†å“æºä¸åŒ, æŸ¥è¯¢æ•°æ®æ–¹å¼ä¸åŒ, å› æ­¤ä½¿ç”¨ç­–ç•¥æ¨¡å¼, ä¾¿äºæ–°å¢ç±»å‹çš„æ‰©å±•.</p>
<p>çŠ¶æ€æ¨¡å¼: çº¢åŒ…çŠ¶æ€çš„å˜åŒ–, å¯ä»¥åšæˆçŠ¶æ€æ¨¡å¼, ä½¿å¾—çº¢åŒ…æ–°å¢çŠ¶æ€æ—¶æ‰©å±•æ›´ç®€å•.</p>
</blockquote>
<h2 id="æ¶æ„"><a href="#æ¶æ„" class="headerlink" title="æ¶æ„"></a>æ¶æ„</h2><h3 id="é‡æ„"><a href="#é‡æ„" class="headerlink" title="é‡æ„"></a>é‡æ„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">é‡å¤ä»£ç é‡æ„, æŠ½è±¡å‡ºå·¥å…·ç±», è¿”å›å€¼&#x2F;è‡ªå®šä¹‰å¼‚å¸¸ æ•´ç†é‡æ„, ç»Ÿä¸€è¯·æ±‚é£æ ¼</span><br><span class="line">ä½¿ç”¨çŠ¶æ€æ¨¡å¼&#x2F;ç­–ç•¥æ¨¡å¼ä¼˜åŒ– if&#x2F;else</span><br><span class="line">ä½¿ç”¨å·¥å‚æ¨¡å¼ç»Ÿä¸€ç®¡ç†éœ€è¦çš„å®ä¾‹å¯¹è±¡, å¦‚å·¥å…·ç±», é‚®ä»¶æœåŠ¡ç­‰</span><br><span class="line">å°è£…é€šç”¨ CRUD æ¥å£åŠå®ç°, å‡å°‘ Dao å±‚ä»£ç </span><br><span class="line"></span><br><span class="line">æ¨¡å—çš„æ‹†åˆ†, æ•°æ®åº“åˆ†åº“åˆ†è¡¨, å¾®æœåŠ¡æ‹†åˆ†</span><br></pre></td></tr></table></figure>

<h3 id="é›†ç¾¤"><a href="#é›†ç¾¤" class="headerlink" title="é›†ç¾¤"></a>é›†ç¾¤</h3><h4 id="MySQL-é›†ç¾¤"><a href="#MySQL-é›†ç¾¤" class="headerlink" title="MySQL é›†ç¾¤"></a>MySQL é›†ç¾¤</h4><blockquote>
<p>MySQL é»˜è®¤æ”¯æŒä¸»ä»æ¶æ„é›†ç¾¤, å¯é…åˆ mycat å®ç°è¯»å†™åˆ†ç¦».</p>
</blockquote>
<h4 id="Redis-é›†ç¾¤"><a href="#Redis-é›†ç¾¤" class="headerlink" title="Redis é›†ç¾¤"></a>Redis é›†ç¾¤</h4><blockquote>
<p>Redis Cluster, Codis</p>
</blockquote>
<h4 id="Tomcat-é›†ç¾¤"><a href="#Tomcat-é›†ç¾¤" class="headerlink" title="Tomcat é›†ç¾¤"></a>Tomcat é›†ç¾¤</h4><blockquote>
<p>tomcat é›†ç¾¤ä¸€èˆ¬éœ€è¦è€ƒè™‘ session å…±äº«, å¯é€šè¿‡ redis å®ç° session å…±äº«.</p>
</blockquote>
<h3 id="åˆ†å¸ƒå¼"><a href="#åˆ†å¸ƒå¼" class="headerlink" title="åˆ†å¸ƒå¼"></a>åˆ†å¸ƒå¼</h3><h4 id="SpringCloud"><a href="#SpringCloud" class="headerlink" title="SpringCloud"></a>SpringCloud</h4><blockquote>
<p>Spring Cloud æ˜¯ä¸€å¥—åˆ†å¸ƒå¼å¼€å‘çš„è§£å†³æ–¹æ¡ˆ, é›†åˆäº†åˆ†å¸ƒå¼è°ƒç”¨, é“¾è·¯è¿½è¸ª, é™çº§å¤„ç†, æœåŠ¡æ³¨å†Œå‘ç°.</p>
</blockquote>
<h4 id="Dubbo"><a href="#Dubbo" class="headerlink" title="Dubbo"></a>Dubbo</h4><blockquote>
<p>Dubbo æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ RPC è°ƒç”¨æ¡†æ¶, åº•å±‚ä½¿ç”¨ netty æ¡†æ¶.</p>
</blockquote>
<h3 id="è¿ç»´"><a href="#è¿ç»´" class="headerlink" title="è¿ç»´"></a>è¿ç»´</h3><h4 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h4><blockquote>
<p>docker æ˜¯ä¸€ä¸ªå®¹å™¨, æä¾›äº†æ ‡å‡†åŒ–çš„æ¥å£, å¯ç”¨äºå¿«é€Ÿæ„å»ºéƒ¨ç½²ç¯å¢ƒ, ç®€åŒ–éƒ¨ç½²æµç¨‹</p>
</blockquote>
<h4 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h4><blockquote>
<p>docker-compose ä½¿ç”¨ yml æ–‡ä»¶æè¿°å®¹å™¨é—´çš„å…³ç³»ä»¥åŠå®¹å™¨çš„é…ç½®, å¯ç”¨äºå¿«é€Ÿæ„å»ºå¤æ‚çš„è¿è¡Œç¯å¢ƒ.</p>
</blockquote>
<h4 id="K8s"><a href="#K8s" class="headerlink" title="K8s"></a>K8s</h4><blockquote>
<p>K8s æ˜¯ä¸€ä¸ªæ ¹æ®å®¹å™¨å¿«é€Ÿæ­å»ºå’Œç®¡ç†é›†ç¾¤çš„å·¥å…·.</p>
</blockquote>
<h2 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h2><h3 id="JVM-å†…å­˜æ¨¡å‹"><a href="#JVM-å†…å­˜æ¨¡å‹" class="headerlink" title="JVM å†…å­˜æ¨¡å‹"></a>JVM å†…å­˜æ¨¡å‹</h3><blockquote>
<p>æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„å†…å­˜åŒºåŸŸ, å¤šçº¿ç¨‹ä¹‹é—´é€šä¿¡ä¸»è¦é€šè¿‡å…±äº«å†…å­˜æ¥å®ç°.</p>
</blockquote>
<ul>
<li>æœ‰åºæ€§: åœ¨ CPU æ‰§è¡ŒæŒ‡ä»¤æ—¶, å¯èƒ½ä¼šå¯¹é happens-before æŒ‡ä»¤è¿›è¡Œé‡æ’, ä¼˜åŒ–æ‰§è¡Œæ•ˆç‡. åœ¨å•çº¿ç¨‹æƒ…å†µ, å¾€å¾€ä¸ä¼šäº§ç”Ÿé—®é¢˜, ä½†æ¶‰åŠå¤šçº¿ç¨‹æ—¶, å¯èƒ½å¯¼è‡´ bug.</li>
<li>å¯è§æ€§: ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†ä¸€ä¸ªå…±äº«å˜é‡, å¦ä¸€ä¸ªçº¿ç¨‹ä¸ä¼šçŸ¥é“è¿™ä¸ªæ”¹å˜, è¿™å°±æ˜¯ä¸å¯è§, è¦ç¡®ä¿å¯è§æ€§, ä¸€èˆ¬ä½¿ç”¨ volatile å…³é”®è¯, å½“ç„¶, åŠ é”ä¹Ÿå¯ä»¥.</li>
<li>åŸå­æ€§: å³å¯¹äºæŸä»£ç , å®é™…æ‰§è¡Œæ—¶ä¼šåˆ†ä¸ºå¥½å‡ ä¸ªåŸå­æŒ‡ä»¤, ç¡®ä¿åŸå­æ€§å¿…é¡»åŠ é” (å¦‚synchronized) å¤„ç†</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">happens-before:</span><br><span class="line">è¯»åå†™</span><br><span class="line">å†™åå†™</span><br><span class="line">é”åè§£é”</span><br><span class="line">å¯ä¼ é€’æ€§</span><br></pre></td></tr></table></figure>

<h3 id="å¤šçº¿ç¨‹"><a href="#å¤šçº¿ç¨‹" class="headerlink" title="å¤šçº¿ç¨‹"></a>å¤šçº¿ç¨‹</h3><blockquote>
<p>çº¿ç¨‹æ˜¯ä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸åŒæ‰§è¡Œè·¯å¾„, ä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªä¸»çº¿ç¨‹.</p>
<p>è¿›ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºçš„æŠ½è±¡, ä¸€ä¸ªç¨‹åºè¿è¡Œåä¸€èˆ¬ä¸ºä¸€ä¸ªè¿›ç¨‹.</p>
</blockquote>
<p>çº¿ç¨‹çŠ¶æ€:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1.New (æ–°å»º)</span><br><span class="line">2.Runnable (å°±ç»ª)</span><br><span class="line">3.Running (è¿è¡Œä¸­)</span><br><span class="line">4.Blocked (é˜»å¡)</span><br><span class="line">5.WAITING (ç­‰å¾…)</span><br><span class="line">6.TIMED_WAITING (è¶…æ—¶ç­‰å¾…)</span><br><span class="line">7.Dead (æ­»äº¡)</span><br><span class="line"></span><br><span class="line">[t:threadå¯¹è±¡, obj: åŒæ­¥å—ä¸­çš„å¯¹è±¡]</span><br><span class="line">New: new Thread()</span><br><span class="line">Runnable: t.start(), t.yield()</span><br><span class="line">Running: after t.start() and cpu run it</span><br><span class="line">Blocked: when enter synchronized block</span><br><span class="line">WAITING: obj.wait(), t.join(), LockSupport.park()</span><br><span class="line">TIMED_WAITING: Thread.sleep(x), obj.wait(x), t.join(x)</span><br><span class="line">Dead: when t.run() is over</span><br></pre></td></tr></table></figure>



<h3 id="JVM-å¯¹è±¡ç»“æ„"><a href="#JVM-å¯¹è±¡ç»“æ„" class="headerlink" title="JVM å¯¹è±¡ç»“æ„"></a>JVM å¯¹è±¡ç»“æ„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å¯¹è±¡å¤´:</span><br><span class="line">	Mark Word(hash, é”çŠ¶æ€, åˆ†ä»£å¹´é¾„)</span><br><span class="line">	ç±»å‹æŒ‡é’ˆ</span><br><span class="line">	[æ•°ç»„é•¿åº¦]</span><br><span class="line">å®ä¾‹æ•°æ®</span><br><span class="line">å¯¹é½</span><br></pre></td></tr></table></figure>



<h3 id="åƒåœ¾å›æ”¶"><a href="#åƒåœ¾å›æ”¶" class="headerlink" title="åƒåœ¾å›æ”¶"></a>åƒåœ¾å›æ”¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">æ ‡è®°ç®—æ³•:</span><br><span class="line">	1.å¼•ç”¨è®¡æ•°æ³•</span><br><span class="line">	2.å¯è¾¾æ€§åˆ†æç®—æ³•(æ ¹æœç´¢)(æ ¹å¯¹è±¡: æ ˆä¸­çš„å¯¹è±¡, é™æ€å±æ€§å¼•ç”¨å¯¹è±¡, å¸¸é‡å¼•ç”¨å¯¹è±¡)</span><br><span class="line">å›æ”¶ç®—æ³•:</span><br><span class="line">	1.æ ‡è®°-æ¸…é™¤ç®—æ³•</span><br><span class="line">	2.æ ‡è®°-æ•´ç†ç®—æ³•</span><br><span class="line">	3.æ ‡è®°-å¤åˆ¶ç®—æ³•</span><br><span class="line">	4.åˆ†ä»£ç®—æ³•( Eden åŒº(å¤åˆ¶ç®—æ³•)--&gt; Survivor åŒº(ç¼“å­˜, å¤åˆ¶ç®—æ³•) --&gt; Old åŒº(æ ‡è®°-æ•´ç†)</span><br><span class="line"></span><br><span class="line">å›æ”¶å™¨: (å‰ 3 ä¸ª Young GC ä½¿ç”¨, åé¢çš„ Full GC ä½¿ç”¨)</span><br><span class="line">	1.Serial (ä¸²è¡Œ, å¤åˆ¶ç®—æ³•)</span><br><span class="line">	2.ParNew (å¤šçº¿ç¨‹, å¤åˆ¶ç®—æ³•)</span><br><span class="line">	3.Parallel Scavenge (å¤šçº¿ç¨‹, æ”¹è¿›ç‰ˆ, å¯æ§åˆ¶ååé‡)</span><br><span class="line">	4.Serial Old(å•çº¿ç¨‹, æ ‡è®°-æ•´ç†)</span><br><span class="line">	5.Parallel Old (å¤šçº¿ç¨‹, æ§åˆ¶ååé‡, æ ‡è®°-æ•´ç†ç®—æ³•)</span><br><span class="line">	6.CMS (å¤šçº¿ç¨‹, ä½åœé¡¿, æ ‡è®°-æ¸…é™¤ç®—æ³•) : åˆå§‹(STW)-å¹¶å‘-é‡æ–°(STW)-æ¸…é™¤</span><br><span class="line">	7.G1 (å¤šçº¿ç¨‹, CMS å‡çº§ç‰ˆ, æ ‡è®°-æ•´ç†ç®—æ³•): åˆå§‹(STW)-å¹¶å‘-æœ€ç»ˆ(STW)-ç­›é€‰æ¸…é™¤(å¯æ§åˆ¶åœé¡¿æ—¶é—´)</span><br></pre></td></tr></table></figure>



<h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><h3 id="SQL-ä¼˜åŒ–"><a href="#SQL-ä¼˜åŒ–" class="headerlink" title="SQL ä¼˜åŒ–"></a>SQL ä¼˜åŒ–</h3><h4 id="ç´¢å¼•åŸç†"><a href="#ç´¢å¼•åŸç†" class="headerlink" title="ç´¢å¼•åŸç†"></a>ç´¢å¼•åŸç†</h4><blockquote>
<p>MySQL ç´¢å¼•ä¸€èˆ¬é€‰æ‹© B+æ ‘åšä¸ºæ•°æ®ç»“æ„å­˜å‚¨. B+ æ ‘çš„ä¼˜ç‚¹æ˜¯, å¯¹æ–‡ä»¶IOçš„è®¿é—®æ¬¡æ•°æ§åˆ¶åœ¨ 3 æ¬¡, ä¿è¯é€Ÿåº¦çš„åŒæ—¶, èƒ½å­˜å‚¨åƒä¸‡è¡Œæ•°æ®.</p>
</blockquote>
<h4 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.å¯¹å¸¸ç”¨åˆ—æ·»åŠ ç´¢å¼•, è§†å…·ä½“æƒ…å†µé€‰æ‹©å•ä¸€ç´¢å¼•æˆ–å¤åˆç´¢å¼•(ä¸€èˆ¬ä¸ºå¤åˆ)</span><br><span class="line">2.é€šè¿‡ Explain è¯­å¥åˆ†ææ‰§è¡Œè®¡åˆ’, å°† type æå‡åˆ°è‡³å°‘ index çº§åˆ«.</span><br><span class="line">3.é€šè¿‡ Explain è¯­å¥åˆ†ææ‰§è¡Œè®¡åˆ’, å°† extra ä¸­ Using filesortæ¶ˆé™¤(æ’åºåˆ—åŠ ç´¢å¼•), Using join bufferæ¶ˆé™¤ (é€šè¿‡ç»™å…³è”è¡¨çš„å…³è”åˆ—åŠ ç´¢å¼•), Using temporary (ä¸€èˆ¬é€šè¿‡åˆ†ç»„åˆ—åŠ ç´¢å¼•), Using where(æ ¹æ®æœ€å·¦åŸåˆ™å¯¹æ¡ä»¶åˆ—åŠ å¤åˆç´¢å¼•)</span><br></pre></td></tr></table></figure>



<h3 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ACID:</span><br><span class="line">A: åŸå­æ€§, å¤šä¸ªæ“ä½œè¦ä¹ˆéƒ½åš, è¦ä¹ˆéƒ½ä¸åš</span><br><span class="line">C: ä¸€è‡´æ€§, æ•°æ®åº“æ–‡ä»¶çš„çŠ¶æ€å¿…é¡»ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€.</span><br><span class="line">I: éš”ç¦»æ€§, äº‹ç‰©ä¹‹é—´ç›¸äº’éš”ç¦», äº’ä¸å½±å“.</span><br><span class="line">D: æŒç»­æ€§, ä¸€ä¸ªäº‹åŠ¡ä¸€ä½†æäº¤, åˆ™å¯¹æ•°æ®åº“çš„æ”¹å˜æ˜¯æ°¸ä¹…çš„.</span><br></pre></td></tr></table></figure>



<h3 id="æ•°æ®åº“éš”ç¦»çº§åˆ«"><a href="#æ•°æ®åº“éš”ç¦»çº§åˆ«" class="headerlink" title="æ•°æ®åº“éš”ç¦»çº§åˆ«"></a>æ•°æ®åº“éš”ç¦»çº§åˆ«</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.è¯»æœªæäº¤: å¯è¯»å–å…¶ä»–æœªæäº¤äº‹åŠ¡çš„æ‰§è¡Œç»“æœ(å¦‚æ›´æ–°äº†æŸä¸ªå­—æ®µ), å¯èƒ½ä¼šé€ æˆè¯»å–é”™è¯¯çš„æ•°æ®(æœªæäº¤çš„äº‹åŠ¡å›æ»šäº†), é€ æˆè„è¯».</span><br><span class="line">2.è¯»å·²æäº¤: å¯è¯»å–å…¶ä»–å·²æäº¤äº‹åŠ¡çš„æ‰§è¡Œç»“æœ, 2æ¬¡è¯»å–æ•°æ®è¿˜æ˜¯å¯èƒ½ä¸ä¸€è‡´(å…¶ä»–äº‹åŠ¡åˆæäº¤äº†), é€ æˆä¸å¯é‡å¤è¯».</span><br><span class="line">3.å¯é‡å¤è¯»: ç¡®ä¿åŒä¸€äº‹åŠ¡å†…å¤šæ¬¡è¯»å–æ•°æ®æ—¶, ä¼šçœ‹åˆ°ç›¸åŒçš„æ•°æ®. ä½†å¯èƒ½é€ æˆå¹»è¯», å¦‚æ‰¹é‡ä¿®æ”¹ç™»å½•å¯†ç å, å¦ä¸€ä¸ªäº‹åŠ¡æ–°å¢äº†ä¸€æ¡è®°å½•, å¯¼è‡´æ–°çºªå½•æœªä¿®æ”¹.</span><br><span class="line">4.ä¸²è¡ŒåŒ–: äº‹åŠ¡ä¸²è¡ŒåŒ–æ‰§è¡Œ, æ•ˆç‡ä½.</span><br></pre></td></tr></table></figure>

<h4 id="MySQL-é»˜è®¤éš”ç¦»çº§åˆ«"><a href="#MySQL-é»˜è®¤éš”ç¦»çº§åˆ«" class="headerlink" title="MySQL é»˜è®¤éš”ç¦»çº§åˆ«"></a>MySQL é»˜è®¤éš”ç¦»çº§åˆ«</h4><p><code>å¯é‡è¯»è¯»</code></p>
<h3 id="æ•°æ®åº“é”"><a href="#æ•°æ®åº“é”" class="headerlink" title="æ•°æ®åº“é”"></a>æ•°æ®åº“é”</h3><h4 id="é”åŸç†"><a href="#é”åŸç†" class="headerlink" title="é”åŸç†"></a>é”åŸç†</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¡Œé”: åˆ†ä¸ºæ’å®ƒé”(X) å’Œå…±äº«é”(S). å³å†™é”å’Œè¯»é”.</span><br><span class="line">è¡¨é”: åˆ†ä¸ºå…ƒæ•°æ®é”(MDL)å’Œè¡¨é”.</span><br></pre></td></tr></table></figure>

<h4 id="é”è§¦å‘æ–¹å¼"><a href="#é”è§¦å‘æ–¹å¼" class="headerlink" title="é”è§¦å‘æ–¹å¼"></a>é”è§¦å‘æ–¹å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¡Œé”: éšå¼(æ¡ä»¶å¸¦æœ‰ç´¢å¼•åˆ™é”å¯¹åº”åˆ—, ä¸å¸¦ç´¢å¼•åˆ™é”å…¨éƒ¨è¡Œ, RR æ€»ä¼šå¸¦æœ‰ GAP é”, RC ä¸ä¼š), æ˜¾å¼(ä½¿ç”¨ for update, lock in share mode)</span><br><span class="line">è¡¨é”: éšå¼(å¯¹æ•´ä¸ªè¡¨ä¸å¸¦æ¡ä»¶è¿›è¡Œå¢åˆ æ”¹, æˆ–ä»»ä½• DDL æ“ä½œ) æ˜¾ç¤º(ä½¿ç”¨ for update, lock in share mode)</span><br></pre></td></tr></table></figure>



<h2 id="æºç å’Œæ¡†æ¶"><a href="#æºç å’Œæ¡†æ¶" class="headerlink" title="æºç å’Œæ¡†æ¶"></a>æºç å’Œæ¡†æ¶</h2><h3 id="ReentrantLock"><a href="#ReentrantLock" class="headerlink" title="ReentrantLock"></a><code>ReentrantLock</code></h3><h4 id="åŠ é”æµç¨‹-lock"><a href="#åŠ é”æµç¨‹-lock" class="headerlink" title="åŠ é”æµç¨‹ lock()"></a>åŠ é”æµç¨‹ <code>lock()</code></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>) acquire(): å°è¯•è·å–ä¸€ä¸ªè®¸å¯è¯, è·å–æˆåŠŸåˆ™ç›´æ¥è¿”å›(lockç»“æŸ), è·å–å¤±è´¥åˆ™éœ€è¦æ’é˜Ÿ</span><br><span class="line"><span class="number">2</span>) tryAcquire(): åˆ¤æ–­å½“å‰è®¸å¯è¯æ•°é‡(state), è‹¥ä¸º<span class="number">0</span>åˆ™å°è¯•è·å–</span><br><span class="line">     åˆ†å…¬å¹³å’Œéå…¬å¹³, å…¬å¹³é”ä¼šåˆ¤æ–­ hasQueuedPredecessors, éå…¬å¹³åˆ™ç›´æ¥æŠ¢ compareAndSetState</span><br><span class="line">     è‹¥ä¸ä¸º<span class="number">0</span>, åˆ™åˆ¤æ–­æŒæœ‰é”çš„äººæ˜¯å¦ä¸ºæˆ‘æœ¬èº«, æ˜¯åˆ™å¢åŠ å½“å‰è®¸å¯è¯æ•°é‡, è¿”å›<span class="keyword">true</span>è·å–æˆåŠŸ</span><br><span class="line">     ä¸æ˜¯åˆ™ è¿”å› <span class="keyword">false</span>, è·å–å¤±è´¥(å°†æ’é˜Ÿ).</span><br><span class="line"><span class="number">3</span>) addWaiter(): AQS é˜Ÿåˆ—å°¾éƒ¨æ·»åŠ ä¸€ä¸ª Node(waiter=X[ç‹¬å é”]), è‹¥ tail ä¸å­˜åœ¨, åˆ™å…ˆåˆå§‹åŒ–ä¸€ä¸ª ç©ºhead[ç©ºæŒ‡ä¸ä»£è¡¨ä»»ä½•çº¿ç¨‹] åå†åŠ å…¥é˜Ÿåˆ—</span><br><span class="line"><span class="number">4</span>) acquireQueued: è¿›å…¥é˜Ÿåˆ—çš„èŠ‚ç‚¹, å°è¯•è·å–è®¸å¯è¯, å¤±è´¥åˆ™ park()</span><br><span class="line">     å…ˆåˆ¤æ–­nodeçš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦ä¸º head èŠ‚ç‚¹, è‹¥æ˜¯, åˆ™è¦å°è¯•è·å–ä¸€æ¬¡è®¸å¯è¯(å› ä¸ºè¿™è¯´æ˜ä¸Šä¸€ä¸ªçº¿ç¨‹å·²ç»åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­äº†, ä¹Ÿè®¸å·²ç»èµ°å®Œäº†unlock() æ–¹æ³•(å³å·²ç»è¿è¡Œè¿‡å”¤é†’é˜Ÿåˆ—ä¸‹ä¸€ä½çš„ä»£ç äº†,è€Œå› ä¸ºä½ é‚£æ—¶è¿˜ä¸åœ¨é˜Ÿåˆ—ä¸­æˆ–æ²¡è¿›å…¥ç¡çœ ä¸­, å”¤é†’ä»£ç æ˜¯æ— æ„ä¹‰çš„), è€Œä½ åˆ™åˆšåŠ å…¥é˜Ÿåˆ—, å¦‚æœä½ æ­¤æ—¶ç›´æ¥park()å»ç­‰å¾…å”¤é†’, åˆ™æ ¹æœ¬æ— äººå”¤é†’ä½ , åŒç†ä½ çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå°±ç­‰ä¸åˆ°ä½ å»å”¤é†’å®ƒ.)</span><br><span class="line">     å¦‚æœä¸æ˜¯, è®¾ç½®äº†ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„ waitStatus ä¸º SINGLE å, è‡ªå·±ç¡çœ  park(), ç­‰å¾…å”¤é†’</span><br><span class="line"></span><br><span class="line">å”¤é†’å:  </span><br><span class="line"><span class="number">5</span>) åˆ¤æ–­ä¸Šä¸€ä¸ªèŠ‚ç‚¹æ˜¯ä¸æ˜¯ head, ä¸€èˆ¬æ¥è¯´æ˜¯(å› ä¸ºunkockå”¤é†’çš„ä¸€èˆ¬å°±æ˜¯head.next)</span><br><span class="line">     å¦‚æœä¸æ˜¯åˆ™è¿›å…¥ shouldParkAfterFailedAcquire: å°†é˜Ÿåˆ—ä¸­ä¸€äº›å·²å–æ¶ˆçš„èŠ‚ç‚¹ä»é˜Ÿåˆ—ä¸­åˆ é™¤, é‡æ–°è®¾ç½®èŠ‚ç‚¹çš„prev</span><br><span class="line">     å› ä¸ºæ˜¯<span class="keyword">for</span>å¾ªç¯, æ‰€ä»¥åˆä¼šå†å›æ¥åˆ¤æ–­, è¿™æ—¶åº”è¯¥æ˜¯headäº†, å°è¯•è·å–è®¸å¯è¯, <span class="number">2</span>ç§å¯èƒ½, éå…¬å¹³æ—¶è¢«åˆšlockçš„äººæŠ¢äº†(æ¦‚ç‡è¾ƒå°å§), å¦ä¸€ç§å°±æ˜¯è·å–æˆåŠŸ</span><br><span class="line">     è·å–æˆåŠŸå, æŠŠåŸheadèŠ‚ç‚¹åˆ æ‰, è‡ªå·±è®¾ä¸ºheadèŠ‚ç‚¹(headè±¡å¾ä¸€ä¸ªæ‹¿åˆ°è®¸å¯è¯çš„èŠ‚ç‚¹,é™¤é˜Ÿåˆ—ç¬¬ä¸€æ¬¡åˆå§‹åŒ–), ç„¶åè¿”å›åˆ°acquire(), ä¸­é€”æ²¡æœ‰çº¿ç¨‹è¢«æ‰“æ–­å°±æ­£å¸¸å‡ºæ–¹æ³•, lockç»“æŸ</span><br><span class="line"></span><br><span class="line">æ€»ç»“:</span><br><span class="line">å¾—åˆ°æ–¹å¼<span class="number">1</span>: acquire æ—¶ state = <span class="number">0</span>, ä¸”æŠ¢åˆ°äº†.</span><br><span class="line">å¾—åˆ°æ–¹å¼<span class="number">2</span>: æ²¡æŠ¢åˆ°æˆ–ä¸è®©æŠ¢(å…¬å¹³é”), è¿›å…¥é˜Ÿåˆ—ç­‰ä¸Šä¸€ä¸ªæ¥å”¤é†’æˆ‘, ä¸Šä¸€ä¸ªç­‰ä¸Šä¸Šä¸ªæ¥å”¤é†’ä»–, ä¸Šä¸Šä¸ªç­‰ä¸Šä¸Šä¸Šä¸ªå”¤é†’....</span><br><span class="line">    unlock å”¤é†’é˜Ÿåˆ—ç¬¬äºŒä¸ªéå–æ¶ˆçš„çº¿ç¨‹å¹¶åˆ é™¤é˜Ÿåˆ—ç¬¬ä¸€ä¸ªå…ƒç´  [å…¶ä»–å…ƒç´ ç§»ä½]</span><br><span class="line">    è¿™æ ·ç¬¬äºŒä¸ªçº¿ç¨‹å°±å¯ä»¥å”¤é†’éå–æ¶ˆçš„ç¬¬ä¸‰ä¸ªçº¿ç¨‹[ç›¸å¯¹è€Œè¨€çš„ç¬¬ä¸‰ä¸ª,å®é™…ä¸Šå”¤é†’æ—¶è¿˜æ˜¯ç¬¬äºŒä¸ª, åªæ˜¯å”¤é†’åä¼šåˆ é™¤ç¬¬ä¸€ä¸ª, æ‰€ä»¥ç¬¬ä¸‰å˜ç¬¬äºŒ]</span><br></pre></td></tr></table></figure>

<h4 id="è§£é”æµç¨‹-unlock"><a href="#è§£é”æµç¨‹-unlock" class="headerlink" title="è§£é”æµç¨‹ unlock()"></a>è§£é”æµç¨‹ <code>unlock()</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1) release(): é‡Šæ”¾ä¸€ä¸ªè®¸å¯è¯, å¹¶æ ¹æ®å½“å‰è®¸å¯è¯æ•°é‡æ˜¯å¦ä¸º0 åˆ¤æ–­æ˜¯å¦å¯ä»¥å”¤é†’ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br><span class="line">2) tryRelease(): é‡Šæ”¾ä¸€ä¸ªè®¸å¯è¯, åˆ¤æ–­çº¿ç¨‹æ˜¯å¦æ­£ç¡®(æ˜¯ä¸æ˜¯å½“å‰ç‹¬å é”), è®¸å¯è¯å‡ä¸€</span><br><span class="line">	å½“å‰è®¸å¯è¯æ•°é‡æ˜¯å¦ä¸º 0 è¿”å›æ˜¯å¦å¯ä»¥å”¤é†’é˜Ÿåˆ—çš„ bool æ ‡è¯†.</span><br><span class="line">3) unparkSuccessor(): å”¤é†’é˜Ÿåˆ—ä¸­é™¤headå¤–ç¬¬ä¸€ä¸ªå¤„äºé˜»å¡(éå–æ¶ˆ)çš„èŠ‚ç‚¹(æŸ¥æ‰¾æ–¹å¼, å…ˆçœ‹next, nextçŠ¶æ€ä¸å¯¹åˆ™ä»åå¾€å‰æ‰¾æœ€å‰çš„éå–æ¶ˆçš„èŠ‚ç‚¹, å› ä¸ºnextå¦‚æœä¸ºnull, æ— æ³•æ‰¾nullçš„next).</span><br><span class="line">4) å”¤é†’å, ä¼šå°†headè®¾ç½®ä¸ºå”¤é†’çš„èŠ‚ç‚¹, ä»¥æ­¤è¾¾åˆ°ä¸‹æ¬¡å”¤é†’ä¸‹ä¸€ä¸ªçš„ç›®çš„.</span><br><span class="line"></span><br><span class="line">æ€»ç»“:</span><br><span class="line">å”¤é†’çš„é€»è¾‘å°±æ˜¯å°†æ’é˜Ÿçš„æ‰€æœ‰èŠ‚ç‚¹æŒ¨ä¸ªå”¤é†’, è€ŒèŠ‚ç‚¹è¢«å”¤é†’ååˆä¼šå‡ºé˜Ÿåˆ—; æ‰€ä»¥ä»£ç å°†å‡ºé˜Ÿåˆ—å’Œå”¤é†’é€»è¾‘ä¸€èµ·åš, å…ˆå”¤é†’ä¸‹ä¸€ä¸ª, ä¸‹ä¸€ä¸ªè´Ÿè´£æŠŠå‰ä¸€ä¸ªç§»å‡ºé˜Ÿåˆ—. ç„¶åå”¤é†’è‡ªå·±çš„ä¸‹ä¸€ä¸ª, ä»¥æ­¤ç±»æ¨, å°±å®ç°äº†å”¤é†’å’Œå‡ºé˜Ÿåˆ—çš„æ“ä½œ.</span><br></pre></td></tr></table></figure>

<h3 id="ReentrantReadWriteLock"><a href="#ReentrantReadWriteLock" class="headerlink" title="ReentrantReadWriteLock"></a><code>ReentrantReadWriteLock</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">è¯»é”</span><br><span class="line">	è·å–é” tryAcquireShared(), è‹¥å½“å‰æ²¡æœ‰å†™é”å­˜åœ¨, åˆ™ state + <span class="number">1</span>ä¸ªè¯»å•ä½, ç„¶åè¿”å›è·å–æˆåŠŸ. é˜²æ­¢è¿”å›è·å–å¤±è´¥, è¿›å…¥é˜Ÿåˆ—ä¼‘çœ .</span><br><span class="line">	é‡Šæ”¾é” tryReleaseShared(), state - <span class="number">1</span>ä¸ªè¯»å•ä½, ç„¶åæ ¹æ® state = <span class="number">0</span> åˆ¤æ–­è¿”å›æ˜¯å¦å¯ä»¥å”¤é†’é˜Ÿåˆ—.</span><br><span class="line">	</span><br><span class="line">å†™é”</span><br><span class="line">	è·å–é” tryAcquire(), è‹¥å­˜åœ¨è¯»é”, åˆ™å¤±è´¥, è‹¥å­˜åœ¨å†™é”, åˆ¤æ–­æ˜¯å¦é‡å…¥è·å–, æ˜¯åˆ™è¿”å›è·å–æˆåŠŸ. å¦åˆ™å¤±è´¥; å¤±è´¥å°±æ„å‘³ç€åŠ é˜Ÿåˆ—,ä¼‘çœ .</span><br><span class="line">    é‡Šæ”¾é” tryRelease(), state - <span class="number">1</span>, åˆ¤æ–­ state ä¸­å†™é”æ•°é‡æ˜¯å¦ä¸º<span class="number">0</span>, æ˜¯åˆ™å¯ä»¥å”¤é†’é˜Ÿåˆ—. å¦åˆ™ä»£è¡¨è¿™æ—¶ä¸€ä¸ªå¯é‡å…¥é”çš„é‡Šæ”¾é€»è¾‘.</span><br><span class="line">   </span><br><span class="line">æ€»ç»“: è¯»å†™é”ä¹Ÿå¥½, å¯é‡å…¥é”ä¹Ÿå¥½, CountDownLatch ç­‰å·¥å…·ç±»ä¹Ÿå¥½, éƒ½æ˜¯å¯¹ state æ“ä½œä¸ºå¤š, æˆ–è€…è¯´, å®ç°äº† AQSçš„å®ƒä»¬, åªè´Ÿè´£æ“ä½œ state, è€Œé˜Ÿåˆ—, å”¤é†’, éƒ½äº¤ç»™ AQS æ¥å¤„ç†.</span><br></pre></td></tr></table></figure>



<h3 id="CountDownLatch"><a href="#CountDownLatch" class="headerlink" title="CountDownLatch"></a><code>CountDownLatch</code></h3><h4 id="countDown"><a href="#countDown" class="headerlink" title="countDown()"></a><code>countDown()</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1) state æ•°é‡å‡ä¸€, ç„¶ååˆ¤æ–­ state æ•°é‡æ˜¯å¦ä¸º0, è‹¥æ˜¯åˆ™å”¤é†’ç­‰å¾…é˜Ÿåˆ—çš„çº¿ç¨‹.</span><br></pre></td></tr></table></figure>

<h4 id="await"><a href="#await" class="headerlink" title="await()"></a><code>await()</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1) new ä¹‹å, state æ•°é‡å¤§äº0, æ‰€ä»¥ä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—, ç„¶åçº¿ç¨‹ä¼šè¿›å…¥ä¼‘çœ .</span><br><span class="line">2) ç­‰å¾…countDowné‡Šæ”¾é”, é‡Šæ”¾åˆ°è®¸å¯è¯ä¸º0æ—¶, å”¤é†’ç­‰å¾…é˜Ÿåˆ—çš„çº¿ç¨‹.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ€»ç»“:</p>
<p>åˆ©ç”¨äº†åŠ å…±äº«é”è¿›å…¥é˜Ÿåˆ—ç­‰å¾…ç‰¹æ€§å®ç° <code>await()</code></p>
<p>é‡Šæ”¾å…±äº«é”å‡å°‘è®¸å¯è¯æ•°é‡ä¸”å”¤é†’é˜Ÿåˆ—ä¸­çš„ç­‰å¾…çš„çº¿ç¨‹ å®ç° <code>countDown()</code></p>
</blockquote>
<h3 id="Semaphore"><a href="#Semaphore" class="headerlink" title="Semaphore"></a><code>Semaphore</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä¸ CountDownLatch ç›¸å, åˆå§‹æ•°é‡ä¸€èˆ¬ä¸º 0, acquire() æ—¶åˆ¤æ–­æ˜¯å¦æœ‰è®¸å¯è¯, æœ‰åˆ™æˆåŠŸ, æ— åˆ™é˜Ÿåˆ—ä¼‘çœ </span><br><span class="line">è€Œ release åˆ™æ˜¯æ·»åŠ ä¸€ä¸ªè®¸å¯è¯, æ·»åŠ åæ€»æ˜¯å”¤é†’é˜Ÿåˆ—.</span><br></pre></td></tr></table></figure>

<h3 id="CycleBarrier"><a href="#CycleBarrier" class="headerlink" title="CycleBarrier"></a><code>CycleBarrier</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å«ä¹‰: å‡‘è¶³ä¸€å®šä¸ªæ•°çº¿ç¨‹, ç„¶åæ‰¹é‡å”¤é†’.</span><br><span class="line">await(): åˆ©ç”¨ ReenrantLock çš„ lock å’Œ condition çš„ await è¿›å…¥ä¼‘çœ </span><br><span class="line">å½“å‡‘è¶³åï¼Œç”¨condition çš„ singleAll å”¤é†’æ‰€æœ‰ await çš„çº¿ç¨‹.</span><br></pre></td></tr></table></figure>





<h3 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a><code>HashMap</code></h3><h4 id="è¯·ç®€è¿°-HashMap-çš„åº•å±‚æ•°æ®ç»“æ„"><a href="#è¯·ç®€è¿°-HashMap-çš„åº•å±‚æ•°æ®ç»“æ„" class="headerlink" title="è¯·ç®€è¿° HashMap çš„åº•å±‚æ•°æ®ç»“æ„"></a>è¯·ç®€è¿° <code>HashMap</code> çš„åº•å±‚æ•°æ®ç»“æ„</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. ä½¿ç”¨äº†æ•°ç»„åŠ é“¾è¡¨, ä»¥æ•°ç»„ä¸ºä¸», é“¾è¡¨åŠ çº¢é»‘æ ‘ä¸ºè¡¥å……çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨é”®å€¼å¯¹.</span><br><span class="line">2. å½“é”®å‘é€å†²çª(ç¢°æ’)æ—¶, æ•°æ®å°†ä¸²æˆé“¾è¡¨å­˜äºæ•°ç»„ä¸­, å½“é“¾è¡¨é•¿åº¦è¶…è¿‡æŒ‡å®šå€¼(é»˜è®¤ 8)æ—¶, é“¾è¡¨è½¬æˆçº¢é»‘æ ‘, å½“çº¢é»‘æ ‘é•¿åº¦å°äºæŒ‡å®šå€¼æ—¶(é»˜è®¤ 6), åˆ™åˆè½¬æˆé“¾è¡¨</span><br></pre></td></tr></table></figure>

<h4 id="ä¸ºä»€ä¹ˆ-HashMap-çš„åˆå§‹å®¹é‡ä»¥åŠæ‰©å®¹åçš„å®¹é‡å‡ä¸º-2-çš„æŒ‡æ•°å¹‚"><a href="#ä¸ºä»€ä¹ˆ-HashMap-çš„åˆå§‹å®¹é‡ä»¥åŠæ‰©å®¹åçš„å®¹é‡å‡ä¸º-2-çš„æŒ‡æ•°å¹‚" class="headerlink" title="ä¸ºä»€ä¹ˆ HashMap çš„åˆå§‹å®¹é‡ä»¥åŠæ‰©å®¹åçš„å®¹é‡å‡ä¸º 2 çš„æŒ‡æ•°å¹‚"></a>ä¸ºä»€ä¹ˆ <code>HashMap</code> çš„åˆå§‹å®¹é‡ä»¥åŠæ‰©å®¹åçš„å®¹é‡å‡ä¸º 2 çš„æŒ‡æ•°å¹‚</h4><blockquote>
<p>å› ä¸ºè®¡ç®—æœºåšè¿ç®—æ—¶, å–æ¨¡è¿ç®—é€Ÿåº¦è¿œè¿œæ…¢äºä½è¿ç®—, è€Œè‹¥å®¹é‡å§‹ç»ˆä¸º 2 çš„æŒ‡æ•°å¹‚, åˆ™æ ¹æ® hash è·å–æ•°ç»„ä¸‹æ ‡æ—¶åªéœ€è¦ ä½¿ç”¨ <code>(æ•°ç»„é•¿åº¦-1) &amp; hash å€¼</code> å³å¯ç¡®å®šæ•°ç»„ä¸‹æ ‡, ä¸å–æ¨¡å¾—åˆ°çš„ä¸‹æ ‡ä¸€æ ·å¯é .</p>
<p>è€Œæ‰©å®¹åå, å› ä¸ºéœ€è¦è¿›è¡Œ rehash è¿ç®—æ¥ç¡®å®š æ•°æ®çš„æ–°ä¸‹æ ‡, å¤šæ¬¡è¿›è¡Œå–æ•°ç»„ä¸‹æ ‡åˆ™æ›´èƒ½ä½“ç°ä½è¿ç®—çš„ä¼˜åŠ¿.</p>
</blockquote>
<h4 id="ä¸ºä»€ä¹ˆ-HashMap-çš„åŠ è½½å› å­æ˜¯-0-75-3-4"><a href="#ä¸ºä»€ä¹ˆ-HashMap-çš„åŠ è½½å› å­æ˜¯-0-75-3-4" class="headerlink" title="ä¸ºä»€ä¹ˆ HashMap çš„åŠ è½½å› å­æ˜¯ 0.75 (3/4)"></a>ä¸ºä»€ä¹ˆ <code>HashMap</code> çš„åŠ è½½å› å­æ˜¯ 0.75 (3/4)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨æ’é™¤æ³•:</span><br><span class="line">1.è‹¥åŠ è½½å› å­ä¸º 1. åˆ™æ¯æ¬¡ HashMap æ»¡äº†æ‰è¿›è¡Œæ‰©å®¹, å¿…å°†æœ‰æ›´é«˜çš„å‡ ç‡è§¦å‘ hash ç¢°æ’å¯¼è‡´æ•°ç»„ä¸‹æ ‡ä¸€è‡´éœ€è¦è½¬æˆé“¾è¡¨æˆ–çº¢é»‘æ ‘, å¯¼è‡´è¯»å–å’Œæ›´æ–°é€Ÿåº¦é™ä½.</span><br><span class="line">2.è‹¥åŠ è½½å› å­ä¸º 0.5. åˆ™æ¯æ¬¡ HashMap éƒ½æœ‰ä¸€åŠå®¹é‡å‰©ä½™, ç©ºé—´å¤§å¤§æµªè´¹, å¯¹å†…å­˜å¼€é”€å¤ªå¤§. å®¹æ˜“å¼•å‘ OOM äº‹æ•….</span><br><span class="line"></span><br><span class="line">å¦å¤–:</span><br><span class="line">0.5-1 ä¹‹é—´é‚£ä¹ˆå¤šå¯èƒ½, é€‰å“ªä¸ªéƒ½è¡Œ, ä½†ä½œä¸º HashMap çš„é»˜è®¤å€¼, é€‰ä¸­é—´çš„ 0.75, èµ°ä¸­åº¸ä¹‹è·¯, ä¹Ÿæ˜¯è§£é‡Šçš„é€šçš„.</span><br></pre></td></tr></table></figure>

<h4 id="ä¸ºä»€ä¹ˆ-HashMap-1-8-æ‰©å®¹æ— éœ€-rehash"><a href="#ä¸ºä»€ä¹ˆ-HashMap-1-8-æ‰©å®¹æ— éœ€-rehash" class="headerlink" title="ä¸ºä»€ä¹ˆ HashMap 1.8 æ‰©å®¹æ— éœ€ rehash"></a>ä¸ºä»€ä¹ˆ <code>HashMap</code> 1.8 æ‰©å®¹æ— éœ€ rehash</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1. å› ä¸º1.8çš„è·å– hash å€¼çš„ç®—æ³•ä¼˜åŒ–äº†. æ— éœ€ä¸€ä¸ª hashSeed è¿›è¡Œè¾…åŠ©è¿ç®— (ä¸»å› )</span><br><span class="line">2. ç”±äº hash å€¼ä¸å˜, åŸé“¾è¡¨ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹åªæœ‰ 2 ç§å¯èƒ½:</span><br><span class="line">	ä¸€æ˜¯ hash å€¼é«˜äºåŸæ•°ç»„é•¿åº¦, åˆ™å±äºé«˜ä½, è¿™äº›é«˜ä½çš„èŠ‚ç‚¹, æ–°çš„ä¸‹æ ‡ä¸€å®šæ˜¯ (å½“å‰ä¸‹æ ‡ + æ—§æ•°ç»„é•¿åº¦). </span><br><span class="line">	å¦ä¸€ç§æ˜¯ hash å€¼ä½äºåŸæ•°ç»„é•¿åº¦, å±äºä½ä½, è¿™äº›èŠ‚ç‚¹çš„ä¸‹æ ‡æ— éœ€é‡æ–°è®¡ç®—, å¿…ç„¶ä¸å½“å‰ä¸‹æ ‡ä¸€è‡´</span><br><span class="line">	(ä¸ä¿¡è‡ªå·±é‚£å‡ ä¸ªç¤ºä¾‹æ•°æ®ç”¨ç”»å‡ºå®Œæ•´äºŒè¿›åˆ¶è®¡ç®—ä¸€ä¸‹)(ç¥å¥‡çš„ä½è¿ç®—)</span><br><span class="line">3. é‡æ–°è®¡ç®—ä¸‹æ ‡æ—¶, æ ¹æ®ç¬¬ 2 ç‚¹å¯çŸ¥, å…¶ä¸‹æ ‡å¤§å°ä¸€å®šä¸é«˜äº(å½“å‰ä¸‹æ ‡+æ—§æ•°ç»„é•¿åº¦), å³ä¸‹ä¸€æ¬¡å¾ªç¯çš„ä¸‹æ ‡å¿…ç„¶æ¯”ä¸Šä¸€æ¬¡å¾ªç¯çš„ä¸‹æ ‡è¦é«˜, æ‰€ä»¥ 1.8 æºç  resize è¿›è¡Œé«˜ä½ä½åˆ†ç»„ç„¶åè½¬ç§»æ•°æ®æ—¶, æ— éœ€æ‹…å¿ƒä¸‹ä¸€æ¬¡å¾ªç¯ä¼šå°†åˆšåˆšæ”¾åˆ°æ–°æ•°ç»„çš„å€¼è¦†ç›–(ä¸‹æ ‡ç›¸åŒåˆ™ä¼šè¦†ç›–)</span><br><span class="line">4. 1.8 çš„ resize ä¼˜åŒ–äº†ç®—æ³•, ä¿æŒäº†åŸæœ‰çš„é“¾è¡¨é¡ºåº(ä¸çŸ¥é“æœ‰å•¥ç”¨)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ€»å¾—æ¥è¯´, 1.8 ä¼˜åŒ–äº† hash ç®—æ³•, ä½¿ <code>hashcode</code> çš„é«˜ 16 ä½ä¸ ä½ 16 ä½è¿›è¡Œå¼‚æˆ–è¿ç®—, é™ä½äº†ç¢°æ’ç‡</p>
<p>è€Œ resize ç®—æ³•ä¹Ÿä¼˜åŒ–é“¾è¡¨èŠ‚ç‚¹çš„è¿ç§», é¿å…äº† 1.7 çš„é“¾ç¯äº§ç”Ÿ</p>
<p>æœ€å¤§çš„åŒºåˆ«å°±æ˜¯, 1.7 æ²¡æœ‰å°†äºŒè¿›åˆ¶çš„ç¥å¥‡å‘æŒ¥åˆ°æè‡´, ä¾ç„¶åƒæ™®é€š java ç¨‹åºä¸€èˆ¬é€»è¾‘. è€Œ 1.8 åˆ™å……åˆ†åˆ©ç”¨äº†äºŒè¿›åˆ¶çš„ä¼˜ç‚¹(ä¹Ÿå……åˆ†çš„è®©äººå¤´æ™•), æé«˜äº† <code>HashMap</code> çš„æ•ˆç‡.</p>
</blockquote>
<h4 id="ä¸ºä»€ä¹ˆ-HashMap-ä»é“¾è¡¨è¾¾åˆ°-8-ä¸ªæ—¶è½¬æˆçº¢é»‘æ ‘-è¾¾åˆ°-6-ä¸ªæ—¶è½¬å›é“¾è¡¨"><a href="#ä¸ºä»€ä¹ˆ-HashMap-ä»é“¾è¡¨è¾¾åˆ°-8-ä¸ªæ—¶è½¬æˆçº¢é»‘æ ‘-è¾¾åˆ°-6-ä¸ªæ—¶è½¬å›é“¾è¡¨" class="headerlink" title="ä¸ºä»€ä¹ˆ HashMap ä»é“¾è¡¨è¾¾åˆ° 8 ä¸ªæ—¶è½¬æˆçº¢é»‘æ ‘, è¾¾åˆ° 6 ä¸ªæ—¶è½¬å›é“¾è¡¨?"></a>ä¸ºä»€ä¹ˆ <code>HashMap</code> ä»é“¾è¡¨è¾¾åˆ° 8 ä¸ªæ—¶è½¬æˆçº¢é»‘æ ‘, è¾¾åˆ° 6 ä¸ªæ—¶è½¬å›é“¾è¡¨?</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.æ ¹æ® Poisson distribution å®šå¾‹, å‡‘é½8ä¸ªèŠ‚ç‚¹ç¢°æ’åˆ°åŒä¸€ä¸ªä¸‹æ ‡, ç»„æˆé•¿åº¦ä¸º 8 çš„é“¾è¡¨æ¦‚ç‡æä½, çº¦ä¸º 0.00000006, è€Œè¶…è¿‡ 8 ä¸ªçš„å‡ ç‡åˆ™æ›´ä½, å¤§çº¦ä¸ºåƒä¸‡åˆ†ä¹‹ä¸€. æ‰€ä»¥å°†é˜ˆå€¼è®¾ç½®ä¸º 8, å› ä¸ºè¿™ç§æ¦‚ç‡æä½. å› æ­¤å¯ä»¥å‡å°‘é“¾è¡¨è½¬çº¢é»‘æ ‘çš„, æé«˜å¢åˆ æ”¹æ•ˆç‡.</span><br><span class="line">2.è‹¥è¾¾åˆ° 7 ä¸ªæ—¶è½¬å›é“¾è¡¨, åˆ™å¯èƒ½ä¼šå¯¼è‡´HashMap ä¸åœçš„åœ¨é“¾è¡¨å’Œçº¢é»‘æ ‘ä¹‹é—´è½¬æ¢, æ‰€ä»¥é˜ˆå€¼è®¾ç½®ä¸º 6, å¯èµ·åˆ°ç¼“å†²æ•ˆæœ.</span><br></pre></td></tr></table></figure>



<h3 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h3><h4 id="å…³é”®ç±»è§£æ"><a href="#å…³é”®ç±»è§£æ" class="headerlink" title="å…³é”®ç±»è§£æ"></a>å…³é”®ç±»è§£æ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext</span><br><span class="line">	æ˜¯ä¸€ä¸ªåªè¯»çš„ bean å®¹å™¨</span><br><span class="line">	å¯ä»¥åŠ è½½è§£æé…ç½®æ–‡ä»¶(å¦‚xml)</span><br><span class="line">	å¯ä»¥å‘å¸ƒäº‹ä»¶å’Œæ³¨å†Œç›‘å¬</span><br><span class="line">	å…·æœ‰å›½é™…åŒ–æ¶ˆæ¯å¤„ç†èƒ½åŠ›</span><br><span class="line">ConfigurableApplicationContext</span><br><span class="line">	æ˜¯ä¸€ä¸ªå…·æœ‰å¯é…ç½®èƒ½åŠ›çš„ å®¹å™¨(å¯è®¾ç½®å„ä¸ªå‚æ•°, å¦‚id, çˆ¶å®¹å™¨)</span><br><span class="line">	å…·æœ‰å®¹å™¨ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µ, å¦‚å¯åŠ¨,åœæ­¢,å…³é—­.</span><br><span class="line">AbstractApplicationContext</span><br><span class="line">	æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„æŠ½è±¡ç±», å®šä¹‰äº†å®¹å™¨çš„æ¨¡æ¿(refreshæ–¹æ³•), ä½†ç”±å…·ä½“çš„å­ç±»å®ç°éƒ¨åˆ†æ–¹æ³•</span><br><span class="line">	ç®¡ç†Beanå’ŒBeanFactoryçš„PostProcessor</span><br><span class="line">	ç®¡ç†äº‹ä»¶çš„ç›‘å¬å’Œå¤„ç†</span><br><span class="line">AbstractRefreshableApplicationContext</span><br><span class="line">	ä¸ºå¯é‡å¤åˆ·æ–°çš„å®¹å™¨æä¾›åŸºç±»</span><br><span class="line">	åŠ å…¥äº†BeanFactoryçš„ç®¡ç†(åˆ›å»º&#x2F;å…³é—­ç­‰)</span><br><span class="line">AbstractRefreshableConfigApplicationContext</span><br><span class="line">	åŠ å…¥äº†configLocationå­—æ®µ, ç”¨äºæŸäº›å®¹å™¨åˆå§‹åŒ–BeanFactoryå’ŒBean</span><br><span class="line">AbstractXmlApplicationContext</span><br><span class="line">	å®šä¹‰äº†è¯»å–xmlé…ç½®æ–‡ä»¶æ¥åŠ è½½BeanFactoryçš„ä»£ç , ä½¿å¾—å­ç±»åªéœ€æä¾›é…ç½®æ–‡ä»¶åœ°å€æˆ–Resource</span><br><span class="line">ClassPathXmlApplicationContext</span><br><span class="line">	ç»§æ‰¿åŸºç±», æä¾›é…ç½®æ–‡ä»¶åœ°å€çš„æ„é€ æ–¹æ³•, è°ƒç”¨refreshåŠ è½½BeanFactory</span><br><span class="line">						</span><br><span class="line">BeanFactoryPostProcessor</span><br><span class="line">	ç”¨äºç»™BeanFactoryæ·»åŠ æ’ä»¶å¼åŠŸèƒ½, å¦‚é…ç½®æ–‡ä»¶è§£æ $&#123;&#125; å ä½ç¬¦</span><br><span class="line">	å¦‚ConfigurationClassPostProcessor å°†@Configurationç±»ä¸‹çš„å¸¦@Beançš„methodè¿”å›å€¼æ³¨å†Œåˆ°beanDefinitions ä¸­</span><br><span class="line"></span><br><span class="line">BeanPostProcessor</span><br><span class="line">	ç”¨äºç»™beanæ·»åŠ åŠŸèƒ½, å¦‚ApplicationContextAwareçš„è‡ªåŠ¨æ³¨å…¥å°±æ˜¯å¦‚æ­¤å®ç°çš„</span><br></pre></td></tr></table></figure>

<h4 id="å®¹å™¨åˆå§‹åŒ–æµç¨‹"><a href="#å®¹å™¨åˆå§‹åŒ–æµç¨‹" class="headerlink" title="å®¹å™¨åˆå§‹åŒ–æµç¨‹"></a>å®¹å™¨åˆå§‹åŒ–æµç¨‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1) ä»XmlClassPathApplicationContextæ„é€ æ–¹æ³•ä¸­è¿›å…¥ refresh æ–¹æ³•</span><br><span class="line">2) å…ˆè®¾ç½®å®¹å™¨çŠ¶æ€</span><br><span class="line">3) è°ƒç”¨å­ç±»åˆå§‹åŒ– BeanFactory</span><br><span class="line">4) è®¾ç½®BeanFactory ä¸€äº›å±æ€§,æ·»åŠ ä¸€äº›å†…ç½®çš„PostProcessor æ³¨å†Œä¸€äº› environment ç›¸å…³çš„bean</span><br><span class="line">5) å­ç±»è®¾ç½®ä¸€äº›å†…ç½®çš„PostProcessor</span><br><span class="line">6) æ‰«ææ·»åŠ å¹¶æ‰§è¡Œå®¹å™¨å†…çš„ BeanFactoryPostProcessor</span><br><span class="line">7) æ‰«æå®¹å™¨å†…çš„ BeanPostProcessor å¹¶æ³¨å†Œ</span><br><span class="line">8) åˆå§‹åŒ–å›½é™…åŒ–æ¶ˆæ¯å¤„ç†å™¨</span><br><span class="line">9) åˆå§‹åŒ–äº‹ä»¶å¹¿æ’­å¤„ç†å™¨</span><br><span class="line">10) æ‰§è¡Œå­ç±»çš„ refresh é€»è¾‘</span><br><span class="line">11) æ‰«æå®¹å™¨å†…çš„ ApplicationEvent (æŒ‡å®ç°ç±») å¹¶æ³¨å†Œåˆ°äº‹ä»¶å¹¿æ’­å¤„ç†å™¨</span><br><span class="line">12) å®ŒæˆBeanFactoryçš„åˆå§‹åŒ–, å¹¶åŠ è½½ä¸€äº›å•ä¾‹å¯¹è±¡(è®¾ç½®äº†æ€¥äºåŠ è½½çš„bean)</span><br><span class="line">13) åˆå§‹åŒ–LifcycleProcessor, è°ƒç”¨onRefreshæ–¹æ³•, å‘å¸ƒ ContextRefreshedEvent äº‹ä»¶.</span><br><span class="line">14) æ¸…é™¤ä¸€äº›ç¼“å­˜(å¦‚åå°„ç¼“å­˜, æ³¨è§£ç­‰)</span><br></pre></td></tr></table></figure>

<h4 id="æŸäº›å®ç°åŸç†"><a href="#æŸäº›å®ç°åŸç†" class="headerlink" title="æŸäº›å®ç°åŸç†"></a>æŸäº›å®ç°åŸç†</h4><h5 id="å®ç°-ApplicationContextAware-ä¸ºä½•ä¼šè‡ªåŠ¨æ³¨å…¥-applicationContext"><a href="#å®ç°-ApplicationContextAware-ä¸ºä½•ä¼šè‡ªåŠ¨æ³¨å…¥-applicationContext" class="headerlink" title="å®ç° ApplicationContextAware ä¸ºä½•ä¼šè‡ªåŠ¨æ³¨å…¥ applicationContext?"></a>å®ç° <code>ApplicationContextAware</code> ä¸ºä½•ä¼šè‡ªåŠ¨æ³¨å…¥ <code>applicationContext</code>?</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1) é¦–å…ˆ AbstractApplicationContext#prepareBeanFactory ä¼šæ·»åŠ ä¸€ä¸ªApplicationContextAwareProcessor</span><br><span class="line"><span class="number">2</span>) è¿™ä¸ª beanPostProcessor è´Ÿè´£åœ¨beanåˆå§‹åŒ–ä¹‹å‰æ³¨å…¥contextå¯¹è±¡.</span><br><span class="line"><span class="number">3</span>) è¿™ä¸ª beanPostProcessor çš„æ‰§è¡Œæ—¶æœºæ˜¯åœ¨ doCreateBean ä¸­çš„ postProcessBeforeInitialization()</span><br></pre></td></tr></table></figure>

<h5 id="å®ç°-ApplicationListener-ä¸ºä½•ä¼šåœ¨äº‹ä»¶è§¦å‘æ—¶è‡ªåŠ¨æ‰§è¡Œæˆ‘ä»¬å®ç°çš„æ–¹æ³•"><a href="#å®ç°-ApplicationListener-ä¸ºä½•ä¼šåœ¨äº‹ä»¶è§¦å‘æ—¶è‡ªåŠ¨æ‰§è¡Œæˆ‘ä»¬å®ç°çš„æ–¹æ³•" class="headerlink" title="å®ç° ApplicationListener ä¸ºä½•ä¼šåœ¨äº‹ä»¶è§¦å‘æ—¶è‡ªåŠ¨æ‰§è¡Œæˆ‘ä»¬å®ç°çš„æ–¹æ³•?"></a>å®ç° <code>ApplicationListener</code> ä¸ºä½•ä¼šåœ¨äº‹ä»¶è§¦å‘æ—¶è‡ªåŠ¨æ‰§è¡Œæˆ‘ä»¬å®ç°çš„æ–¹æ³•?</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1) åœ¨ AbstractApplicationContext#registerListeners() ä¸­æ‰«æå®¹å™¨å†…æ‰€æœ‰ç›¸å…³å®ç°ç±»åŠ å…¥åˆ°äº‹ä»¶ç›‘å¬è€…é›†åˆä¸­</span><br><span class="line"><span class="number">2</span>) ç„¶ååœ¨publishEventæ—¶ï¼Œéå†äº‹ä»¶ç›‘å¬è€…é›†åˆè°ƒç”¨beançš„æ–¹æ³•å³å¯ã€‚è§‚å¯Ÿè€…æ¨¡å¼ï¼</span><br><span class="line"><span class="number">3</span>) å¦å¤–ä¹Ÿç”¨äº†BeanPostProcessorå»å®ç°, å« ApplicationListenerDetector, åŠ å…¥æ—¶æœºåŒ<span class="number">1</span>, æ‰§è¡Œæ—¶æœºåŒ<span class="number">1</span>.</span><br><span class="line"><span class="number">4</span>) è‡³äºä¸ºä½•ä½¿ç”¨<span class="number">2</span>ç§æœºåˆ¶ï¼Œä¸å¤šä¾‹æœ‰å…³å§ï¼(scope=<span class="string">"prototype"</span>)</span><br></pre></td></tr></table></figure>

<h5 id="å®ç°Orderæ¥å£æˆ–æ³¨è§£æ—¶å¦‚ä½•è‡ªåŠ¨æ’åºçš„"><a href="#å®ç°Orderæ¥å£æˆ–æ³¨è§£æ—¶å¦‚ä½•è‡ªåŠ¨æ’åºçš„" class="headerlink" title="å®ç°Orderæ¥å£æˆ–æ³¨è§£æ—¶å¦‚ä½•è‡ªåŠ¨æ’åºçš„?"></a>å®ç°<code>Order</code>æ¥å£æˆ–æ³¨è§£æ—¶å¦‚ä½•è‡ªåŠ¨æ’åºçš„?</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1) æ¯”å¦‚è¯´ BeanPostProcesser, å®¹å™¨æ‰«æå, ä¼šåƒå¯¹beané›†åˆæ’åº, å†éå†æ‰§è¡Œ.</span><br><span class="line">2) è¯¦ç»†è¿‡ç¨‹è§ PostProcessorRegistrationDelegate<span class="comment">#sortPostProcessors()</span></span><br></pre></td></tr></table></figure>

<h5 id="å•ä¾‹å¯¹è±¡å¦‚ä½•å®ç°å¾ªç¯ä¾èµ–æ³¨å…¥ï¼Ÿ"><a href="#å•ä¾‹å¯¹è±¡å¦‚ä½•å®ç°å¾ªç¯ä¾èµ–æ³¨å…¥ï¼Ÿ" class="headerlink" title="å•ä¾‹å¯¹è±¡å¦‚ä½•å®ç°å¾ªç¯ä¾èµ–æ³¨å…¥ï¼Ÿ"></a>å•ä¾‹å¯¹è±¡å¦‚ä½•å®ç°å¾ªç¯ä¾èµ–æ³¨å…¥ï¼Ÿ</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1) é¦–å…ˆï¼Œ è®¾å®šå¯¹è±¡Aï¼ŒBï¼Œ A æŒæœ‰ B, B æŒæœ‰Aï¼Œ æ„æˆå¾ªç¯</span><br><span class="line">2) æ­¤æ—¶ç¨‹åºè°ƒç”¨getBeanè·å–Aï¼Œåˆ™åœ¨ doCreateBean ä¸­ åˆ›å»ºåå°†beanç¼“å­˜åˆ° singletonFactories ä¸­</span><br><span class="line">3) ç„¶åè®¾ç½®å±æ€§B, è§£æå±æ€§, éœ€è¦è·å–Bå¯¹è±¡</span><br><span class="line">4) è·å–B, åˆ™æ‰§è¡ŒdoCreateBean åæ‰§è¡Œè§£æå±æ€§, éœ€è¦è·å– Aå¯¹è±¡ (åˆä¸€æ¬¡)</span><br><span class="line">5) è·å–A, è¿›å…¥ doGetBean ä¸­çš„ getSingleton, æ­¤æ—¶åˆ¤æ–­singletonFactoriesä¸­æœ‰A, åˆ™å¯ä»¥ç›´æ¥å–å‡ºA</span><br><span class="line">6) è·å¾—Aå, å³å¯å®ŒæˆBçš„å±æ€§èµ‹å€¼, ç„¶åä¼šå®ŒæˆBçš„åˆ›å»º.</span><br><span class="line">7) Båˆ›å»ºå®Œå, Aå°±èƒ½è·å¾—B, åˆ™Aä¹Ÿå®Œæˆäº†å±æ€§èµ‹å€¼, æœ€åå®Œæˆåˆ›å»ºA.</span><br><span class="line">8) åˆ°æ­¤, è¿”å›å³å¯.</span><br><span class="line"></span><br><span class="line">&gt; æ€»ç»“: é¦–æ¬¡è·å–A, åˆ›å»ºAå¯¹è±¡åç¼“å­˜ä¸€ä¸ªå­˜å‚¨Aå¯¹è±¡çš„ ObjectFactory å®ä¾‹, å†è§£æå±æ€§æ—¶è§¦å‘ getBean(B), åŒç†ä¹Ÿä¼šåšç¼“å­˜, ç„¶åä¹Ÿè§£æå±æ€§, è§¦å‘getBean(A), ç¬¬äºŒæ¬¡è·å–A, è¿›å…¥å¦ä¸€ä¸ªé€»è¾‘, è¿”å› ObjectFactory å®ä¾‹ä¸­å­˜å‚¨çš„å¯¹è±¡A, å³å¯å®ŒæˆgetBean(A), ç„¶åå®ŒæˆgetBean(B), å†å®Œæˆå¤–å±‚çš„getBean(A).</span><br></pre></td></tr></table></figure>

<p>TIPS</p>
<blockquote>
<p>è§‚å¯Ÿæºç , å‘ç°æœ‰2ä¸ªç¼“å­˜, ä¸€ä¸ªæ˜¯ <code>singletonFactories</code>, å¦ä¸€ä¸ªæ˜¯ <code>earlySingletonObjects</code>.<br>å…¶ä¸­<code>earlySingletonObjects</code>çš„ç®¡ç†éƒ½åœ¨ <code>getSingleton</code> æ–¹æ³•ä¸­åš, è€Œ <code>singletonFactories</code> åˆ™åœ¨<code>doCreateBean</code>ä¸­åŠ å…¥, åœ¨ <code>getSingleton</code> ä¸­åˆ é™¤(æœ‰<code>earlySingletonObjects</code>åå°±å¯ä»¥åˆ é™¤äº†).<br>è™½ç„¶æœ‰2ä¸ªç¼“å­˜, ä½†å¦‚æœä½ çš„beanæ²¡æœ‰ä½¿ç”¨<code>BeanFactory</code>åˆ›å»º, åˆ™å…¶å®ä¸€ä¸ªç¼“å­˜ä¹Ÿè¶³å¤Ÿäº†<br>(å› ä¸ºè¿™æ ·çš„è¯ <code>singletonFactories</code> æ¯æ¬¡åˆ›å»ºè¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ª, å› ä¸ºæ­¤æ—¶ <code>singletonFactories</code>å­˜çš„åªæ˜¯ä»£ç åŒ…è£…çš„ä¸€ä¸ªå†…éƒ¨ç±», è€Œéç”¨æˆ·è‡ªå®šä¹‰çš„.)</p>
</blockquote>
<h5 id="InstantiationAwareBeanPostProcessorç­‰ä¸€äº›ç‰¹æ®ŠBeanProcessorçš„æ‰©å±•æ–¹æ³•æ˜¯ä½•æ—¶è‡ªåŠ¨è°ƒç”¨çš„"><a href="#InstantiationAwareBeanPostProcessorç­‰ä¸€äº›ç‰¹æ®ŠBeanProcessorçš„æ‰©å±•æ–¹æ³•æ˜¯ä½•æ—¶è‡ªåŠ¨è°ƒç”¨çš„" class="headerlink" title="InstantiationAwareBeanPostProcessorç­‰ä¸€äº›ç‰¹æ®ŠBeanProcessorçš„æ‰©å±•æ–¹æ³•æ˜¯ä½•æ—¶è‡ªåŠ¨è°ƒç”¨çš„?"></a><code>InstantiationAwareBeanPostProcessor</code>ç­‰ä¸€äº›ç‰¹æ®Š<code>BeanProcessor</code>çš„æ‰©å±•æ–¹æ³•æ˜¯ä½•æ—¶è‡ªåŠ¨è°ƒç”¨çš„?</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>) é¦–å…ˆ getBeanPostProcessorCache è·å–ä¸€äº›ç‰¹æ®Šçš„BeanPostProcessor</span><br><span class="line"><span class="number">2</span>) å¦‚ InstantiationAwareBeanPostProcessor/SmartInstantiationAwareBeanPostProcessor</span><br><span class="line"><span class="number">3</span>) ç„¶å createBeanæ—¶, ä¼šåœ¨æ­£ç¡®çš„æ—¶æœºä½¿ç”¨åˆ°è¿™äº›ç‰¹æ®Šçš„ PostProcessor, å–å‡ºæ¥, ç„¶åæ‰§è¡Œå¯¹åº”æ–¹æ³•</span><br><span class="line"><span class="number">4</span>) å…·ä½“ä½•æ—¶å¯ä»¥æŸ¥çœ‹ getBeanPostProcessorCache() çš„è°ƒç”¨ä½ç½®ä¸€ä¸€æŸ¥çœ‹.</span><br></pre></td></tr></table></figure>

<h4 id="æ³¨è§£çš„å®ç°"><a href="#æ³¨è§£çš„å®ç°" class="headerlink" title="æ³¨è§£çš„å®ç°"></a>æ³¨è§£çš„å®ç°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>) é¦–å…ˆæ˜¯æŒ‡å®šåŒ…åæˆ–æŒ‡å®šç±»å</span><br><span class="line">	å¦‚æŒ‡å®šåŒ…ååˆ™scanæ—¶ä¼šæ‰§è¡Œ, å¦‚æŒ‡å®šç±»ååˆ™åœ¨æ„é€ æ–¹æ³•åˆå§‹åŒ– reader æ—¶æ‰§è¡Œ</span><br><span class="line">2) æ— è®ºå“ªç§, æœ€ç»ˆéƒ½ä¼šèµ°ä¸€æ®µä»£ç  AnnotationConfigUtils#registerAnnotationConfigProcessors()</span><br><span class="line"><span class="number">3</span>) è¿™æ®µä»£ç ä¼šæ·»åŠ ä¸€äº› BeanFactoryPostProcessor</span><br><span class="line">	å¦‚ ConfigurationClassPostProcessor è´Ÿè´£è§£æ <span class="meta">@Configuration</span>/<span class="meta">@Import</span>/<span class="meta">@Bean</span> æ³¨è§£</span><br><span class="line">    	postProcessBeanDefinitionRegistry() ä¸­ parse æ‰€æœ‰çš„å¸¦ä»¥ä¸Šæ³¨è§£çš„ beanDefinitions</span><br><span class="line">    	ConfigurationClassParser å°†æ³¨è§£ä¿¡æ¯è§£æä¿å­˜ï¼Œ</span><br><span class="line">    	ç„¶åç”± ConfigurationClassBeanDefinitionReader è´Ÿè´£æ³¨å†Œåˆ°å®¹å™¨ã€‚</span><br><span class="line">	å¦‚ AutowiredAnnotationBeanPostProcessor è´Ÿè´£è§£æ <span class="meta">@Autowired</span>/<span class="meta">@Value</span> æ³¨è§£</span><br><span class="line">    å¦‚ CommonAnnotationBeanPostProcessor è´Ÿè´£è§£æ <span class="meta">@Resource</span> æ³¨è§£</span><br><span class="line">    è§£ææ”¾åœ¨ postProcessProperties() æ–¹æ³•ä¸­ï¼Œ å…ˆæ‰«æbeançš„å­—æ®µå’Œæ–¹æ³•ï¼Œ ç„¶åä¸€ä¸€è°ƒç”¨æ–¹æ³•å’Œä¸ºå­—æ®µæ³¨å…¥å€¼</span><br><span class="line"><span class="number">4</span>) ä¹‹å, ä»–ä¼šå°†æ‰«æçš„ç±»æ”¾åˆ° beanDefinitions ä¸­(æˆ–æŒ‡å®šçš„ç±»æ³¨å†Œè¿›å»)</span><br><span class="line"><span class="number">5</span>) BeanFactoryåŠ è½½å®Œæ¯•å, å›åˆ°AbstractApplicationContextçš„refreshé€»è¾‘</span><br><span class="line">	å¦‚ä¼šæ‰§è¡Œ postProcessBeanFactory(), è°ƒç”¨å‰é¢åŠ å…¥çš„ConfigurationClassPostProcessor</span><br><span class="line">	ç„¶åä¼šæ·»åŠ æ›´å¤šçš„ç±»åˆ°å®¹å™¨ä¸­.</span><br><span class="line">    </span><br><span class="line">æ³¨æ„äº‹é¡¹ï¼š</span><br><span class="line">    <span class="meta">@Configuration</span> å’Œ <span class="meta">@Component</span>çš„åŒºåˆ«ï¼Ÿ</span><br><span class="line">    è§‚å¯Ÿå‘ç°ï¼Œå³ä½¿ä½¿ç”¨<span class="meta">@Component</span> å…¶ä¸‹å¸¦ <span class="meta">@Bean</span> çš„æ–¹æ³•ä¾ç„¶å¯ä»¥æ³¨å…¥åˆ°å®¹å™¨ä¸­ã€‚æ‰€ä»¥ä¼¼ä¹ä¸¤è€…æ²¡æœ‰åŒºåˆ«ï¼Ÿ</span><br><span class="line">    ä»”ç»†æŸ¥çœ‹æºç å’Œèµ„æ–™åï¼Œå‘ç° postProcessBeanFactory() æ–¹æ³•åœ¨ processConfigBeanDefinitions() åè¿˜ä¼šè°ƒç”¨ enhanceConfigurationClasses()</span><br><span class="line">    è€Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­, å¯¹å‰é¢è§£æäº†<span class="class"><span class="keyword">class</span> æ˜¯ <span class="title">CONFIGURATION_CLASS_FULL</span> (å³ä»£è¡¨@<span class="title">Configuration</span>)çš„ç±»</span></span><br><span class="line"><span class="class">    ä¼šç”Ÿæˆä¸€ä¸ª <span class="title">cglib</span> çš„ä»£ç†, è¿™æ ·è·å–@<span class="title">Bean</span>æ³¨è§£çš„æ–¹æ³•çš„<span class="title">bean</span>æ—¶,ä¸ä¼šæ¯æ¬¡è°ƒç”¨æ–¹æ³•<span class="title">new</span> ä¸€ä¸ª, è€Œæ˜¯æœ‰ç¼“å­˜.</span></span><br></pre></td></tr></table></figure>

<h4 id="AOP-æµç¨‹"><a href="#AOP-æµç¨‹" class="headerlink" title="AOP æµç¨‹"></a>AOP æµç¨‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>) ä½¿ç”¨ <span class="meta">@EnableAspectJAutoProxy</span></span><br><span class="line"><span class="number">2</span>) <span class="meta">@EnableAspectJAutoProxy</span> ä¸­ä½¿ç”¨äº† <span class="meta">@Import</span>(AspectJAutoProxyRegistrar<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">3) <span class="title">ConfigurationClassPostProcessor</span> ä¼šè§£æ@<span class="title">Import</span>, è¿›å…¥ <span class="title">registerBeanDefinitions</span>() ä¸­</span></span><br><span class="line"><span class="class">4) <span class="title">registerBeanDefinitions</span>() ä¸­æ·»åŠ äº† <span class="title">AnnotationAwareAspectJAutoProxyCreator</span> åˆ°å®¹å™¨ä¸­</span></span><br><span class="line"><span class="class">5) <span class="title">AnnotationAwareAspectJAutoProxyCreator</span> æœ¬è´¨ä¸Šæ—¶ä¸€ä¸ª <span class="title">BeanPostProcessor</span></span></span><br><span class="line"><span class="class">6) å› æ­¤åœ¨ <span class="title">createBean</span> æ—¶, ä¼šè¢«è‡ªåŠ¨è°ƒç”¨. å…¶ä¸­ <span class="title">postProcessAfterInitialization</span>() è´Ÿè´£åˆ›å»ºä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="class">7) è€Œ <span class="title">getAdvicesAndAdvisorsForBean</span>() åˆ™è´Ÿè´£æŸ¥æ‰¾å¯¹åº”çš„å¢å¼º. ç„¶åä¼šè°ƒç”¨å­ç±»çš„<span class="title">findCandidateAdvisors</span></span></span><br><span class="line"><span class="class">8) å¦‚ <span class="title">AnnotationAwareAspectJAutoProxyCreator</span>#<span class="title">findCandidateAdvisors</span>() è´Ÿè´£æ³¨è§£ç¼–å†™å¢å¼º@<span class="title">Before</span>/@<span class="title">After</span>ç­‰</span></span><br><span class="line"><span class="class">9) ç®€å•è¯´ä¸‹é€»è¾‘, å°±æ˜¯æŸ¥æ‰¾å®¹å™¨æ‰€æœ‰ç±», åˆ¤æ–­è¿™ä¸ªç±»æœ‰æ²¡æœ‰ @<span class="title">Aspect</span> æ³¨è§£, ç„¶åå…ˆæ‰¾å‡ºæ‰€æœ‰<span class="title">Pointcut</span></span></span><br><span class="line"><span class="class">	å†éå†æ‰€æœ‰æ–¹æ³•, æ‰¾å‡ºæ–¹æ³•ä¸Šå¸¦æœ‰@<span class="title">Before</span>ç­‰æ³¨è§£ä¸”æœ‰å…³è”çš„<span class="title">Pointcut</span>çš„æ–¹æ³•,</span></span><br><span class="line"><span class="class">    ç„¶åä½¿ç”¨è¿™ä¸ªæ–¹æ³•å’Œå…³è”çš„<span class="title">Pointcut</span> æ¥<span class="title">new</span> ä¸€ä¸ª<span class="title">Advisor</span>, åŠ å…¥åˆ°<span class="title">Advisor</span>é›†åˆä¸­, éå†ç»“æŸåè¿”å›å³å¯.</span></span><br><span class="line"><span class="class">10) æŸ¥æ‰¾åˆ°æ‰€æœ‰çš„å¢å¼ºå, å†æ¯”è¾ƒ<span class="title">Pointcut</span>è¡¨è¾¾å¼æ˜¯å¦åŒ¹é…å½“å‰çš„<span class="title">bean</span>, å¦‚å¯ä»¥åˆ™åŠ å…¥.</span></span><br><span class="line"><span class="class">11) æ ¹æ®æ‰¾åˆ°çš„<span class="title">Advisor</span>é›†åˆ, åˆ›å»ºä¸€ä¸ªå¸¦é…ç½®(<span class="title">advisor</span>é›†åˆç­‰)çš„ä»£ç†å¯¹è±¡, ä»£ç†å¯¹è±¡æ‰§è¡Œæ–¹æ³•å‰</span></span><br><span class="line"><span class="class">12) ä¼šå…ˆæ ¹æ®é…ç½®ä¸­çš„<span class="title">advisor</span>é›†åˆç”Ÿæˆä¸€ä¸ªæ‰§è¡Œé“¾, ç„¶ååœ¨æ‹¦æˆªä»£ç†æ–¹æ³•å¤„è°ƒç”¨. æ‰§è¡Œé“¾ä¼šè´Ÿè´£æ‰§è¡Œé€šçŸ¥.</span></span><br><span class="line"><span class="class">13) ä¸åŒçš„é€šçŸ¥ç”±ä¸åŒçš„é€‚é…å™¨æ‰§è¡Œ.</span></span><br></pre></td></tr></table></figure>

<h4 id="Spring-äº‹åŠ¡å®ç°"><a href="#Spring-äº‹åŠ¡å®ç°" class="headerlink" title="Spring äº‹åŠ¡å®ç°"></a>Spring äº‹åŠ¡å®ç°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>) äº‹åŠ¡æ˜¯ç”±AOPå®ç°çš„, æ‰€ä»¥éœ€è¦æ‰¾åˆ°å¯¹åº”çš„Pointcut å’Œ Advisor</span><br><span class="line"><span class="number">1</span>) æ‰“å¼€äº† <span class="meta">@EnableTransactionManagement</span> æ³¨è§£</span><br><span class="line"><span class="number">2</span>) ç„¶å<span class="meta">@Import</span> äº† TransactionManagementConfigurationSelector</span><br><span class="line"><span class="number">3</span>) ä¹‹åå¯¼å…¥äº† ProxyTransactionManagementConfiguration åˆ°å®¹å™¨ä¸­</span><br><span class="line"><span class="number">4</span>) ProxyTransactionManagementConfiguration å¸¦æœ‰ <span class="meta">@Configuration</span></span><br><span class="line"><span class="number">5</span>) <span class="meta">@Bean</span> æ³¨å…¥äº†ä¸€ä¸ªé€šç”¨çš„Advisor: BeanFactoryTransactionAttributeSourceAdvisor</span><br><span class="line"><span class="number">6</span>) è¿™ä¸ªAdvisorçš„ Pointcut æ˜¯ç”± TransactionAttributeSourcePointcut å®ç°çš„</span><br><span class="line">	å®ç°é€»è¾‘æ˜¯ TransactionAttributeSourcePointcut çš„ matches()</span><br><span class="line">    è¿™ä¸ªæ–¹æ³•è°ƒç”¨äº† getTransactionAttributeSource() è·å– AnnotationTransactionAttributeSource</span><br><span class="line">    ç„¶åé€šè¿‡ getTransactionAttribute() è°ƒç”¨äº† findTransactionAttribute()</span><br><span class="line">    æœ€ç»ˆä½¿ç”¨SpringTransactionAnnotationParser ç±»åˆ¤æ–­æ–¹æ³•æ˜¯å¦æœ‰<span class="meta">@Transactional</span>æ³¨è§£</span><br><span class="line">    å¹¶è§£ææ³¨è§£ä¿¡æ¯ç„¶åè¿”å›. å¦å¤–è¿™ä¸ªæ–¹æ³•è¿˜å¯ä»¥è·å–<span class="meta">@Transactional</span>æ³¨è§£çš„ä¿¡æ¯, è€Œè¿™é‡Œåªç”¨äºåˆ¤æ–­æ˜¯å¦éœ€è¦æ‹¦æˆªè¿™ä¸ªæ–¹æ³•.</span><br><span class="line"><span class="number">7</span>) TransactionInterceptor æ˜¯ä¸€ä¸ªAdvisor</span><br><span class="line">    ä¹Ÿå¯ä»¥é€šè¿‡AnnotationTransactionAttributeSourceè·å–<span class="meta">@Transactional</span>æ³¨è§£ä¸Šçš„ä¿¡æ¯</span><br><span class="line">    ç„¶ååœ¨invokeä¸­, æ‹¦æˆªæ–¹æ³•, æ‰“å¼€äº‹åŠ¡, åœ¨æ‰§è¡Œå®Œæ–¹æ³•å, æäº¤äº‹åŠ¡, æŠ¥é”™æ—¶å›æ»šäº‹åŠ¡</span><br><span class="line">    è¿™ä¸ª Advisor ä¸åŒäºä¼ ç»Ÿçš„å‰ç½®/åç½®, è€Œæ˜¯æ›´å…·ä½“çš„ MethodInterceptor.</span><br></pre></td></tr></table></figure>



<h3 id="Spring-Boot-æºç "><a href="#Spring-Boot-æºç " class="headerlink" title="Spring Boot æºç "></a>Spring Boot æºç </h3><h4 id="ç®€åŒ–äº†å¤šå°‘æ“ä½œï¼Ÿ"><a href="#ç®€åŒ–äº†å¤šå°‘æ“ä½œï¼Ÿ" class="headerlink" title="ç®€åŒ–äº†å¤šå°‘æ“ä½œï¼Ÿ"></a>ç®€åŒ–äº†å¤šå°‘æ“ä½œï¼Ÿ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.MultipartAutoConfiguration</span><br><span class="line">	æ·»åŠ äº†ä¸€ä¸ªbean StandardServletMultipartResolver, å¹¶è®¾ç½®ä¸Šä¼ æ–‡ä»¶å¤§å°ç­‰å±æ€§</span><br><span class="line">	ä½¿å¾—Spring MVCä¸­çš„ DispatcherServlet å¯ä»¥è·å– multipartResolver, å¤„ç†æ–‡ä»¶ä¸Šä¼ .</span><br><span class="line">    è‹¥ä¸æ˜¯Spring Boot, éœ€è¦åœ¨xmlæˆ–æ³¨è§£ä¸­æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ª è¿™æ ·çš„beanæ‰èƒ½å¤„ç†æ–‡ä»¶ä¸Šä¼ , è€Œä¸”é…ç½®æ–‡ä»¶è¿˜è¦è‡ªå·±è¯»å–.</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.MailSenderAutoConfiguration</span><br><span class="line">    æ·»åŠ äº†ä¸€ä¸ª JavaMailSenderImpl çš„beanåˆ°å®¹å™¨ä¸­, å¹¶è®¾ç½®é‚®ç®±æœåŠ¡å™¨/è´¦å·/å¯†ç ç­‰å±æ€§</span><br><span class="line">    è‹¥ä¸æ˜¯Spring Boot, éœ€è¦åœ¨xmlä¸­é…ç½®ä¸€ä¸ªbeanå³é…ç½®ä»–çš„å±æ€§(é‚®ç®±é…ç½®)</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>.TransactionAutoConfiguration</span><br><span class="line">    åœ¨å†…éƒ¨ç±»æ·»åŠ  <span class="meta">@EnableTransactionManagement</span>ï¼Œå‰©ä¸‹çš„å‚è€ƒä¸Šé¢çš„ Spring äº‹åŠ¡å®ç°</span><br><span class="line">    </span><br><span class="line"><span class="number">4</span>.WebMvcAutoConfiguration</span><br><span class="line">    æ·»åŠ äº† RequestMappingHandlerAdapter/RequestMappingHandlerMapping</span><br><span class="line">    æ·»åŠ äº† ContentNegotiatingViewResolver</span><br></pre></td></tr></table></figure>

<h4 id="å¯åŠ¨æµç¨‹"><a href="#å¯åŠ¨æµç¨‹" class="headerlink" title="å¯åŠ¨æµç¨‹"></a>å¯åŠ¨æµç¨‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>) åˆ›å»º SpringApplicationRunListeners ç®¡ç† run è¿‡ç¨‹çš„äº‹ä»¶, ç›‘å¬è€…å–è‡ª spring.factories</span><br><span class="line"><span class="number">2</span>) è§¦å‘ run çš„å¼€å§‹(starting)äº‹ä»¶</span><br><span class="line"><span class="number">3</span>) åˆå§‹åŒ– environment å¯¹è±¡, å¹¶åˆ©ç”¨ run çš„ environmentPrepared äº‹ä»¶å°†application.ymlçš„æ•°æ®æ³¨å…¥</span><br><span class="line"><span class="number">4</span>) æ‰“å° Banner, å¯è‡ªå®šä¹‰ Banner é€šè¿‡ banner.txt æ–‡ä»¶</span><br><span class="line"><span class="number">5</span>) æ ¹æ®webApplicationTypeåˆ›å»ºä¸€ä¸ªApplicationContext å®¹å™¨</span><br><span class="line">    é»˜è®¤ä½¿ç”¨ AnnotationConfigApplicationContext</span><br><span class="line"><span class="number">6</span>) ä¸º context åšä¸€äº›åˆå§‹åŒ–å’Œè®¾ç½®</span><br><span class="line">    è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œ ä½¿å¾— context å¯ä»¥è·å– application.yml ä¸­çš„é…ç½®</span><br><span class="line">    è°ƒç”¨å­ç±»æ‰©å±•çš„è®¾ç½®</span><br><span class="line">    åŠ è½½ å®¹å™¨çš„ initializers</span><br><span class="line">    è§¦å‘ run çš„ contextPrepared äº‹ä»¶</span><br><span class="line">    æ‰“å°æ—¥å¿—</span><br><span class="line">    æ·»åŠ spring boot å¯åŠ¨å‚æ•°ä¿¡æ¯åˆ° bean å®¹å™¨ä¸­</span><br><span class="line">    è®¾ç½®beanFactoryçš„ allowBeanDefinitionOverriding å±æ€§</span><br><span class="line">    è®¾ç½® æ‡’åŠ è½½ç­–ç•¥ï¼Œ æ·»åŠ  postProcessor åˆ™ä¼šå°†æ¯ä¸ª beanDefinition çš„ lazyInit è®¾ç½®ä¸º <span class="keyword">true</span></span><br><span class="line">    æŠŠå¯åŠ¨ç±»<span class="class"><span class="keyword">class</span>å°è£…æˆ <span class="title">BeanDefinition</span> æ”¾åˆ°å®¹å™¨ä¸­, ä½¿å¾—@<span class="title">Configuration</span>ä¹‹ç±»çš„æ³¨è§£ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="class">    è§¦å‘ <span class="title">run</span> çš„ <span class="title">contextLoaded</span> äº‹ä»¶</span></span><br><span class="line"><span class="class">7) è°ƒç”¨ <span class="title">context</span> çš„ <span class="title">refresh</span>()</span></span><br><span class="line"><span class="class">    æ‰§è¡Œ <span class="title">BeanFactoryPostProcessor</span>, å¦‚ <span class="title">ConfigurationClassPostProcessor</span> è§£æ @<span class="title">Import</span> æ³¨è§£</span></span><br><span class="line"><span class="class">    @<span class="title">Import</span> ä¼šå®ç° @<span class="title">EnableAutoConfiguration</span>, æ€»ä¹‹éƒ½æ˜¯ç†Ÿæ‚‰çš„ <span class="title">spring</span> å¥—è·¯. <span class="title">boot</span>çš„ä¸œè¥¿å°±å°‘äº†.</span></span><br><span class="line"><span class="class">8) è°ƒç”¨ç•™ç»™å­ç±»çš„ <span class="title">afterRefresh</span>() æ–¹æ³•, é»˜è®¤ç©ºå®ç°</span></span><br><span class="line"><span class="class">9) æ‰“å°å¯åŠ¨å®Œæ¯•ä¿¡æ¯</span></span><br><span class="line"><span class="class">10) è§¦å‘ <span class="title">run</span> çš„ <span class="title">started</span> äº‹ä»¶</span></span><br><span class="line"><span class="class">11) è°ƒç”¨ å®¹å™¨å†…æ‰€æœ‰çš„ <span class="title">ApplicationRunner</span> å’Œ <span class="title">CommandLineRunner</span> å®ç°ç±», ç±»ä¼¼äº‹ä»¶ç›‘å¬.</span></span><br><span class="line"><span class="class">12) ä½¿ç”¨ <span class="title">spring</span>.<span class="title">factories</span> ä¸­çš„ <span class="title">exceptionReporters</span> å¤„ç†å¯èƒ½å‡ºç°çš„å¼‚å¸¸.</span></span><br><span class="line"><span class="class">13) è§¦å‘ <span class="title">run</span> çš„ <span class="title">running</span> äº‹ä»¶</span></span><br></pre></td></tr></table></figure>



<h4 id="ä¸€äº›ä¸œè¥¿çš„å®ç°åŸç†"><a href="#ä¸€äº›ä¸œè¥¿çš„å®ç°åŸç†" class="headerlink" title="ä¸€äº›ä¸œè¥¿çš„å®ç°åŸç†"></a>ä¸€äº›ä¸œè¥¿çš„å®ç°åŸç†</h4><h5 id="ConfigurationProperties-å¦‚ä½•å®ç°è‡ªåŠ¨æ³¨å…¥application-propertiesä¸­é…ç½®çš„å€¼"><a href="#ConfigurationProperties-å¦‚ä½•å®ç°è‡ªåŠ¨æ³¨å…¥application-propertiesä¸­é…ç½®çš„å€¼" class="headerlink" title="@ConfigurationProperties å¦‚ä½•å®ç°è‡ªåŠ¨æ³¨å…¥application.propertiesä¸­é…ç½®çš„å€¼?"></a><code>@ConfigurationProperties</code> å¦‚ä½•å®ç°è‡ªåŠ¨æ³¨å…¥<code>application.properties</code>ä¸­é…ç½®çš„å€¼?</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>) é¦–å…ˆåŠ äº† <span class="meta">@EnableConfigurationProperties</span> ä¹Ÿä¼šè§£æé‡Œé¢çš„ <span class="meta">@Import</span> </span><br><span class="line"><span class="number">2</span>) <span class="meta">@Import</span> åˆ™å¼•å…¥äº† EnableConfigurationPropertiesRegistrar<span class="class">.<span class="keyword">class</span></span></span><br><span class="line"><span class="class">3) è¿™æ˜¯ä¸€ä¸ª <span class="title">ImportBeanDefinitionRegistrar</span> çš„å®ç°ç±», ä¼šåœ¨è§£æ @<span class="title">Configuration</span> æ³¨è§£æ—¶è°ƒç”¨æŒ‡å®šæ–¹æ³•</span></span><br><span class="line"><span class="class">4) æŒ‡å®šæ–¹æ³• <span class="title">registerBeanDefinitions</span>() è·å– @<span class="title">EnableConfigurationPropertiesRegistrar</span> çš„æ•°æ®</span></span><br><span class="line"><span class="class">    å¦‚ @<span class="title">EnableConfigurationProperties</span>(<span class="title">RabbitProperties</span>.<span class="title">class</span>) åŠ è½½ <span class="title">RabbitProperties</span>.<span class="title">class</span></span></span><br><span class="line"><span class="class">    ç„¶å, å°†è¿™äº› <span class="title">class</span> éƒ½æ³¨å†Œåˆ°å®¹å™¨ä¸­</span></span><br><span class="line"><span class="class">5) æŒ‡å®šæ–¹æ³•è¿˜æ³¨å†Œäº†ä¸€äº›å·¥å…·<span class="title">bean</span>å’Œä¸€ä¸ªé‡è¦çš„ <span class="title">BeanPostProcessor</span> åœ¨ <span class="title">registerInfrastructureBeans</span>()ä¸­</span></span><br><span class="line"><span class="class">6) <span class="title">registerInfrastructureBeans</span>() åŠ è½½äº† <span class="title">ConfigurationPropertiesBindingPostProcessor</span>.<span class="title">class</span></span></span><br><span class="line"><span class="class">7) åœ¨ <span class="title">postProcessorBeforeInitialization</span>() ä¸­ è°ƒç”¨ <span class="title">ConfigurationPropertiesBinder</span></span></span><br><span class="line"><span class="class">8) è°ƒç”¨é“¾å¾ˆé•¿, æœ€å <span class="title">property</span>.<span class="title">setValue</span>(<span class="title">beanSupplier</span>, <span class="title">bound</span>)</span>;è®¾ç½®äº†å€¼ -- JavaBeanBinder</span><br><span class="line"></span><br><span class="line">æ€»ç»“: å°±æ˜¯å…ˆå°† XxxProperties ç±»å®šä¹‰æ³¨å…¥åˆ°å®¹å™¨ä¸­, è¿™æ ·å¯ä»¥getBean, ç„¶åé€šè¿‡ BeanPostProcessor</span><br><span class="line">    å†å®ä¾‹åŒ–åå°†å±æ€§å€¼ä¸€ä¸€ç»‘å®š.</span><br></pre></td></tr></table></figure>

<h5 id="ConditionalXxx-çš„å®ç°åŸç†"><a href="#ConditionalXxx-çš„å®ç°åŸç†" class="headerlink" title="@ConditionalXxx çš„å®ç°åŸç†"></a><code>@ConditionalXxx</code> çš„å®ç°åŸç†</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>) åœ¨ç±»ä¸ŠåŠ ä¸Šæ³¨è§£ <span class="meta">@Conditional</span> æˆ– å¸¦æœ‰ <span class="meta">@Conditional</span> çš„å…¶ä»–æ³¨è§£:å…¶ä»–æ‰©å±•å®ç°</span><br><span class="line"><span class="number">2</span>) åœ¨æ‰€æœ‰çš„æ‰«æç±»å’Œæ³¨è§£çš„åœ°æ–¹,å¦‚è§£æ<span class="meta">@Configuration</span>, AnotatedBeanDefinitionReaderç­‰reader</span><br><span class="line">    ä¼šä½¿ç”¨ ConditionEvaluator çš„ shouldSkip() åˆ¤æ–­æ˜¯å¦å¯ä»¥åŠ è½½, æ—¶æœºç‚¹å¦‚ä¸‹</span><br><span class="line">    AnnotatedBeanDefinitionReader#doRegisterBean() çš„ç¬¬äºŒè¡Œä»£ç </span><br><span class="line">    ConfigurationClassBeanDefinitionReader#loadBeanDefinitionsForBeanMethod() ç¬¬å››è¡Œ</span><br><span class="line">    ConfigurationClassBeanDefinitionReader#loadBeanDefinitionsForConfigurationClass()</span><br><span class="line">    ConfigurationClassParser#doProcessConfigurationClass() å¤„ç† ComponentScan é‚£æ®µ</span><br><span class="line"><span class="number">3</span>) ç„¶åå† shouldSkip ä¸­åˆ¤æ–­ï¼Œ åˆ¤æ–­é€»è¾‘å¤§è‡´å¦‚ä¸‹ï¼š</span><br><span class="line">    å…ˆéå†æ‰€æœ‰æ³¨è§£å–å¾—æ‰€æœ‰çš„ <span class="meta">@Conditional</span> ä¸‹çš„ æ‰€æœ‰ value, è¿™ä¸ª value æ˜¯å…·ä½“çš„Conditionå®ç°, å¦‚OnClassCondition</span><br><span class="line">    å®ä¾‹åŒ– Condition ç„¶åæ·»åŠ åˆ° conditionsä¸­</span><br><span class="line">    æ’åºå¹¶éå†è°ƒç”¨ matches(), ä¸€ä¸ªä¸åŒ¹é…åˆ™è¿”å›<span class="keyword">true</span>, ä»£è¡¨åº”è¯¥è·³è¿‡.</span><br><span class="line"></span><br><span class="line">TIPS:</span><br><span class="line">ConditionOutcome å°è£…äº†æ˜¯å¦åŒ¹é…å’ŒåŒ¹é…æ—¥å¿—ä¿¡æ¯[ä¸ºå•¥æˆåŠŸ/ä¸ºå•¥å¤±è´¥]</span><br><span class="line">SpringBootCondition æä¾›äº†é€šç”¨çš„æ ¹æ® ConditionOutcome åˆ¤æ–­æ˜¯å¦åŒ¹é…å¹¶è®°å½•æ—¥å¿—ä¿¡æ¯çš„æŠ½è±¡ç±».</span><br><span class="line">    å­ç±»åªéœ€å®ç° getMatchOutcome(): æ ¹æ® metadata[æ³¨è§£ä¿¡æ¯] è¿”å› ConditionOutcome å¯¹è±¡.</span><br><span class="line">    å› æ­¤, å¦‚æœæˆ‘ä»¬è¦å®ç°è‡ªå·±çš„ Condition, å¯ä»¥ç»§æ‰¿å®ƒ.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¦å‘ç° <code>AutoConfigurationImportSelector</code> ä¹Ÿå«æœ‰åˆ¤æ–­Conditionçš„é€»è¾‘,<br>åˆšå¼€å§‹ä»¥ä¸ºæ˜¯ <code>AutoConfiguration</code> çš„ç±»æ²¡æœ‰èµ°ä¹‹å‰è¯´åˆ°çš„åˆ¤æ–­, æ‰€ä»¥è¿™é‡Œè¦åšåˆ¤æ–­.<br>åæ¥æˆ‘ä¸€æƒ³, è¿™æ˜¯ @Import å¼•å…¥çš„, æ‰€ä»¥, æ˜¯èµ°äº†åˆ¤æ–­çš„. å› æ­¤è¿™é‡Œå¤šå‡ºçš„ä¸€ä¸ª <code>AutoConfigurationImportFilter</code>, åº”è¯¥æ˜¯ä¸€ä¸ªé¢å¤–çš„æ’ä»¶, ä¸“é—¨è¿‡æ»¤é…ç½®åœ¨ <code>spring.factories</code> ä¸­çš„ <code>AutoConfiguration</code> ç±»çš„. è€Œæ’ä»¶çš„è¯»å–, ä¹Ÿæ˜¯è¯»å– <code>spring.factories</code> æ¥éå†. </p>
</blockquote>
<h5 id="AutoConfigureAfter-çš„å®ç°åŸç†"><a href="#AutoConfigureAfter-çš„å®ç°åŸç†" class="headerlink" title="@AutoConfigureAfter  çš„å®ç°åŸç†"></a><code>@AutoConfigureAfter</code>  çš„å®ç°åŸç†</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>) é¦–å…ˆ AutoConfigurationImportSelector æ˜¯ä¸€ä¸ª DeferredImportSelector  </span><br><span class="line"><span class="number">2</span>) è¿™ç§ DeferredImportSelector ä¼šå»¶è¿ŸåŠ è½½, åŸç†æ˜¯ parse åå†åŠ è½½, è€Œéparseæ‰§è¡Œè¿‡ç¨‹ä¸­å°±åŠ è½½.</span><br><span class="line"><span class="number">3</span>) å»¶è¿ŸåŠ è½½æœºåˆ¶ ä¼šå…ˆè°ƒç”¨ process æ–¹æ³•, å°†è¦åŠ è½½çš„<span class="class"><span class="keyword">class</span>ä¿å­˜èµ·æ¥, ç„¶åå†è°ƒç”¨ <span class="title">selectImports</span> è¿”å›.</span></span><br><span class="line"><span class="class">4) æ­¤æ—¶ <span class="title">AutoConfigurationImportSelector</span>.<span class="title">AutoConfigurationGroup</span> çš„ <span class="title">selectImports</span>() ä¼šè°ƒç”¨ <span class="title">sortAutoConfigurations</span>(), ä¹Ÿå°±æ˜¯è°ƒç”¨äº† <span class="title">AutoConfigurationSorter</span>.<span class="title">getInPriorityOrder</span>()</span></span><br><span class="line"><span class="class">5) <span class="title">getInPriorityOrder</span>() è°ƒç”¨äº† <span class="title">sortByAnnotation</span>() è¿™ä¸ªæ–¹æ³•æ ¹æ®2ä¸ªæ³¨è§£ @<span class="title">AutoConfigureBefore</span> @<span class="title">AutoConfigureAfter</span> æ’åº.</span></span><br><span class="line"><span class="class">6) æœ€åè¿”å›çš„å°±æ˜¯æœ‰åºçš„äº†. å¦å¤–, è¿™ä¸¤ä¸ªæ³¨è§£åªèƒ½ä½œç”¨å† <span class="title">AutoConfiguration</span> ä¸Š.</span></span><br><span class="line"><span class="class"></span></span><br><span class="line">æ€»ç»“:</span><br><span class="line">æ‰€æœ‰çš„ AutoConfiguration æ‰€å¼•å…¥çš„<span class="class"><span class="keyword">class</span>æ–‡ä»¶è§£æå®Œæ¯•å, å†å‡†å¤‡åŠ è½½ä¹‹å‰, è¿›è¡Œæ’åº, ç„¶åä¸€ä¸€åŠ è½½.</span></span><br></pre></td></tr></table></figure>



<h5 id="å„ç§-AutoConfiguration-å®ç°å¤§è‡´æµç¨‹"><a href="#å„ç§-AutoConfiguration-å®ç°å¤§è‡´æµç¨‹" class="headerlink" title="å„ç§ AutoConfiguration å®ç°å¤§è‡´æµç¨‹."></a>å„ç§ <code>AutoConfiguration</code> å®ç°å¤§è‡´æµç¨‹.</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1) é¦–å…ˆæ˜¯ @SpringBootApplication å¯ç”¨äº† @EnableAutoConfiguration</span><br><span class="line">2) @EnableAutoConfiguration åˆä½¿ç”¨ @Import å¯¼å…¥äº† AutoConfigurationImportSelector.class</span><br><span class="line">3) ç„¶å AutoConfigurationImportSelector å¯¼å…¥ spring.factoriesæ‰€æœ‰çš„ EnableAutoConfiguration</span><br><span class="line">4) æœ€åï¼Œå½“ä¸€ä¸ªé¡¹ç›®ä¾èµ–ä¸€ä¸ªstarter-xxxï¼Œä¼šç»§æ‰¿starterçš„ä¾èµ–é¡¹, spring-boot-autoconfigure ç”±æ­¤è¢«ä¾èµ–</span><br><span class="line">5) spring-boot-autoconfigure å¸¦æœ‰æ‰€æœ‰ boot å®ç°çš„ AutoConfiguration å’Œ spring.factories é…ç½®</span><br><span class="line">6) æ‰€ä»¥ä¼šåŠ è½½è¯¥é¡¹ç›®ä¸‹ spirng.factories ä¸­å®šä¹‰çš„ EnableAutoConfiguration</span><br><span class="line">7) æ¯ä¸ª AutoConfiguration å®ç°ç±»è¢«å¯¼å…¥åˆ°å®¹å™¨ä¸­å</span><br><span class="line">	åˆè¢« ConfigurationClassPostProcessor è§£æ@Configuration, @Import ç­‰æ³¨è§£ (è€åƒå±‚é¥¼äº†)</span><br><span class="line">	è¿™äº›AutoConfigurationä¼šæ·»åŠ ä¸€äº›æä¾›æœåŠ¡çš„ beanï¼Œæˆ–è€…å†åµŒå¥—ä¸€å±‚@Importï¼Œ@Configurationç­‰ã€‚</span><br><span class="line">	å¦å¤–, è¿™äº›beanè¿˜æ˜¯è¢«è‡ªåŠ¨é…ç½®äº†å±æ€§å€¼çš„, å±æ€§å€¼å“ªé‡Œæ¥? éƒ½åœ¨ application.yml ä¸­, æˆ–æ˜¯é»˜è®¤é…ç½®ä¸­.</span><br><span class="line">9) è¿™æ ·ï¼Œå®¹å™¨ä¸­å°±åŠ å…¥äº†ä¸€ä¸ªæˆ–å¤šä¸ªé…ç½®å¥½çš„beanäº†, å¯ä»¥ç›´æ¥ä½¿ç”¨. å¦‚ stringRedisTemplate, jdbcTemplate</span><br></pre></td></tr></table></figure>

<h5 id="Spring-Boot-æ˜¯å¦‚ä½•è‡ªåŠ¨æ‰«æmainæ–¹æ³•æ‰€åœ¨ç±»æ‰€åœ¨åŒ…çš„"><a href="#Spring-Boot-æ˜¯å¦‚ä½•è‡ªåŠ¨æ‰«æmainæ–¹æ³•æ‰€åœ¨ç±»æ‰€åœ¨åŒ…çš„" class="headerlink" title="Spring Boot æ˜¯å¦‚ä½•è‡ªåŠ¨æ‰«æmainæ–¹æ³•æ‰€åœ¨ç±»æ‰€åœ¨åŒ…çš„?"></a>Spring Boot æ˜¯å¦‚ä½•è‡ªåŠ¨æ‰«æmainæ–¹æ³•æ‰€åœ¨ç±»æ‰€åœ¨åŒ…çš„?</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1) é¦–å…ˆæ˜¯ @SpringBootApplication å¯ç”¨äº† @EnableAutoConfiguration</span><br><span class="line">2) @EnableAutoConfiguration åˆä½¿ç”¨ @AutoConfigurationPackage</span><br><span class="line">3) @AutoConfigurationPackage ä¸­çš„ @Import ä¼šè¢«è§£æ, Registrar.class çš„registerBeanDefinitionsä¼šè¢«æ‰§è¡Œ</span><br><span class="line">4) æœ€ç»ˆæ ¹æ®å¸¦æœ‰ @SpringBootApplication çš„ç±»å¯¹åº”çš„åŒ…å, ç„¶åè‡ªåŠ¨æ‰«æåˆ°å®¹å™¨ä¸­, æ•ˆæœåŒ @ComponentScan</span><br></pre></td></tr></table></figure>

<h5 id="application-properties-æ˜¯å¦‚ä½•è¢«åŠ è½½åˆ°Environmentä¸­çš„"><a href="#application-properties-æ˜¯å¦‚ä½•è¢«åŠ è½½åˆ°Environmentä¸­çš„" class="headerlink" title="application.properties æ˜¯å¦‚ä½•è¢«åŠ è½½åˆ°Environmentä¸­çš„?"></a><code>application.properties</code> æ˜¯å¦‚ä½•è¢«åŠ è½½åˆ°Environmentä¸­çš„?</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>) runæ–¹æ³•ä¸­åˆ›å»ºäº†Environmentå¯¹è±¡, å½“åˆå§‹åŒ–å¥½ä¸€äº›ä¸œè¥¿åä¼šè§¦å‘äº‹ä»¶</span><br><span class="line"><span class="number">2</span>) é€šè¿‡ SpringApplicationRunListeners çš„ environmentPrepared() å‘ŠçŸ¥ç›‘å¬è€…</span><br><span class="line"><span class="number">3</span>) é»˜è®¤å­˜åœ¨ spring.factories ä¸­çš„ EventPublishingRunListener ç›‘å¬è€…è´Ÿè´£è½¬å‘äº‹ä»¶</span><br><span class="line"><span class="number">4</span>) äº‹ä»¶è¢«è½¬å‘åˆ° ApplicationListener ä¸‹çš„ç›‘å¬è€…æ¥å¤„ç†</span><br><span class="line"><span class="number">5</span>) ç›‘å¬è€…é…ç½®åœ¨ spring.factories ä¸­, å…¶ä¸­ ConfigFileApplicationListener ç›‘å¬äº†æ­¤äº‹ä»¶</span><br><span class="line"><span class="number">6</span>) æ­¤ç›‘å¬è€…æ¥å— ApplicationEnvironmentPreparedEvent äº‹ä»¶å</span><br><span class="line"><span class="number">7</span>) åŠ è½½ä¸€äº› postProcessor ä¸“é—¨ç”¨äºå¤„ç† environment å¯¹è±¡çš„ postProcessor</span><br><span class="line"><span class="number">8</span>) å…¶ä»–çš„ postProcessor æš‚æ—¶ä¸ç®¡, çœŸæ­£åšäº†åŠ è½½çš„æ˜¯ postProcessors.add(<span class="keyword">this</span>); è‡ªå·±çš„å®ç°</span><br><span class="line"><span class="number">9</span>) è‡ªå·±çš„å¤„ç†æ–¹æ³•æ˜¯: addPropertySources(), æ­¤æ–¹æ³•å°†ä¼šæ‰«ææŒ‡å®šçš„è·¯å¾„ä¸‹æŒ‡å®šçš„æŸäº›æ–‡ä»¶</span><br><span class="line"><span class="number">10</span>) ç„¶åä½¿ç”¨ spring.factories ä¸‹çš„ PropertySourceLoader ä¸€ä¸€å°è¯•è§£æ</span><br><span class="line"><span class="number">11</span>) æ–‡ä»¶å­˜åœ¨ä¸”è§£ææ­£ç¡®åˆ™åŠ å…¥åˆ° environment çš„ propertySources.</span><br><span class="line">	æŸäº›è·¯å¾„: getSearchLocations() ,é»˜è®¤: classpath:/,classpath:/config/ ...</span><br><span class="line">	æŸäº›æ–‡ä»¶: getSearchNames() ,é»˜è®¤: application</span><br><span class="line"></span><br><span class="line">TIPS: </span><br><span class="line">PropertySourceLoader æœ‰ PropertiesPropertySourceLoader/YamlPropertySourceLoader</span><br><span class="line">ä¸€ä¸ªå°è¯•åç¼€æœ‰ xml/properties, å¦ä¸€ä¸ªæ˜¯ yml/yaml, æ‰€ä»¥æ‰€æœ‰å¯èƒ½æ€§æœ‰:</span><br><span class="line">    classpath:/application.xml; classpath:/application.properties</span><br><span class="line">	classpath:/application.yml; classpath:/application.yaml</span><br><span class="line">    ......</span><br></pre></td></tr></table></figure>

<h5 id="SpringApplication-run-å¦‚ä½•åŠ è½½-tomcat-çš„"><a href="#SpringApplication-run-å¦‚ä½•åŠ è½½-tomcat-çš„" class="headerlink" title="SpringApplication.run() å¦‚ä½•åŠ è½½ tomcat çš„?"></a><code>SpringApplication.run()</code> å¦‚ä½•åŠ è½½ tomcat çš„?</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>) boot çš„ run é‡Œé¢ä¼šåˆ›å»º applicationContext, å¦‚æ˜¯ webApplicationType = SERVLET, åˆ™å®ç°ç±»ä¸º AnnotationConfigServletWebServerApplicationContext</span><br><span class="line">    å¦å¤–ä¸€æ, webApplicationType æ˜¯æ ¹æ® classpath ä¸‹æ˜¯å¦æœ‰å“ªäº›ç±»æ¥æ¨æ–­çš„.</span><br><span class="line"><span class="number">2</span>) è¿™ä¸ªç±»ç»§æ‰¿äº† ServletWebServerApplicationContext</span><br><span class="line"><span class="number">3</span>) ServletWebServerApplicationContext å®ç°äº† onRefresh()</span><br><span class="line"><span class="number">4</span>) onRefresh() è°ƒç”¨äº† createWebServer()</span><br><span class="line"><span class="number">5</span>) createWebServer() ä½¿ç”¨ ServletWebServerFactory.getWebServer() è·å– webServer å¯¹è±¡</span><br><span class="line"><span class="number">6</span>) ServletWebServerFactory ä¼šè¢« ServletWebServerFactoryAutoConfiguration å¼•å…¥</span><br><span class="line">    è¯¦ç»†è§ ServletWebServerFactoryConfiguration.EmbeddedTomcat<span class="class">.<span class="keyword">class</span></span></span><br><span class="line"><span class="class">7) å¼•å…¥åè°ƒç”¨ <span class="title">getWebServer</span>(), å¤§æ¦‚ä¸º <span class="title">new</span> <span class="title">Tomcat</span>(), è®¾ç½®å±æ€§, ç„¶åå¯åŠ¨.</span></span><br><span class="line"><span class="class">8) è‡³æ­¤, <span class="title">run</span>() å¯åŠ¨äº† <span class="title">tomcat</span> æˆ– <span class="title">jetty</span>/<span class="title">undertow</span>.</span></span><br><span class="line"><span class="class"> </span></span><br><span class="line">TIPS:</span><br><span class="line">spring ä½¿ç”¨å·¥å‚æ¨¡å¼è·å–webServer, ç„¶åå·¥å‚åˆé€šè¿‡AutoConfigurationè‡ªåŠ¨æ³¨å…¥(è¿˜ä¼šåˆ¤æ–­Condition).</span><br><span class="line">    è¿™æ ·å¦‚æœæ–°å¢ä¸€ç§ webServer, åªéœ€è¦åœ¨å†™ä¸€ä¸ª AutoConfiguration æ³¨å…¥ä¸€ä¸ª å·¥å‚å³å¯. éå¸¸çµæ´».</span><br></pre></td></tr></table></figure>



<h4 id="Spring-Boot-ç›‘å¬"><a href="#Spring-Boot-ç›‘å¬" class="headerlink" title="Spring Boot ç›‘å¬"></a>Spring Boot ç›‘å¬</h4><blockquote>
<p>Spring Boot runæ–¹æ³•ä¸­åˆå§‹åŒ–äº†ä¸€ä¸ªäº‹ä»¶ç®¡ç†å™¨, ç”¨äºåœ¨bootçš„æ¯ä¸ªç”Ÿå‘½å‘¨æœŸè§¦å‘ä¸åŒçš„äº‹ä»¶, è¿™äº›äº‹ä»¶å¯ä»¥æœ‰å¾ˆå¤šç›‘å¬è€…, è¿™äº›ç›‘å¬è€…éƒ½ä» <code>spring.factories</code> ä¸­å–å¾—.<br>ä½†æ˜¯, spring é»˜è®¤åªåŠ äº†ä¸€ä¸ªç›‘å¬è€…, å³ <code>EventPublishingRunListener</code><br>è™½ç„¶åªæœ‰ä¸€ä¸ª, ä½†ä»–çš„ä½œç”¨å¯ä¸å°, ä»–æ‰¿ä¸Šå¯ä¸‹, å°†bootçš„äº‹ä»¶è½¬å‘ç»™æ‰€æœ‰çš„ <code>ApplicationListener</code> çš„ç›‘å¬è€….<br>ä¹Ÿå°±æ˜¯è¯´, ä¹‹å‰springå°±å­˜åœ¨çš„ä½“ç³»å¯ä»¥ç›´æ¥å¤ç”¨, ä½†åˆæ²¡æœ‰ç›´æ¥ç”Ÿæ¬ç¡¬å¥—, è€Œæ˜¯é€šè¿‡ <code>EventPublishingRunListener</code> åšä¸€ä¸ªä¸­è½¬, å°† boot çš„äº‹ä»¶è½¬å‘å‡ºå». ä½¿å¾—é…ç½®çš„ç›‘å¬è€… <code>ApplicationListener</code>ä¹Ÿèƒ½æ¥å— boot äº‹ä»¶å¹¶å¤„ç†. å¦‚ <code>ConfigFileApplicationListener</code>.</p>
<p>spring boot è¿™ä¹ˆåš, ä½¿å¾— æ·»åŠ åˆ° <code>spring.factories</code> ä¸­çš„ç±», å¯ä»¥åŒæ—¶ç›‘å¬bootçš„runäº§ç”Ÿçš„äº‹ä»¶å’Œcontextçš„ç”Ÿå‘½å‘¨æœŸ.</p>
<p>ä¸¥æ ¼è¯´, <code>EventPublishingRunListener</code> è¿™æ ·çš„ç›‘å¬è€…, ç›‘å¬çš„å¹¶ä¸æ˜¯é€šç”¨çš„äº‹ä»¶, è€Œæ˜¯ boot run äº§ç”Ÿçš„ç‰¹å®šäº‹ä»¶<br>æ‰€ä»¥ <code>EventPublishingRunListener</code> å°†ç‰¹å®šäº‹ä»¶å°è£…æˆç»Ÿä¸€çš„ <code>ApplicationEvent</code>, ç„¶åå¹¿æ’­å‡ºå».</p>
<p>å¦å¤–ï¼Œspring boot æ˜¯åœ¨ <code>EventPublishingRunListener#contextLoaded</code> ä¸­å°† <code>spring.factories</code> ä¸­çš„ listens æ³¨å…¥åˆ° <code>ApplicationContext</code> ä¸­çš„ã€‚</p>
<p>æ€»ç»“: æˆ‘ç›‘å¬ä½ ç›‘å¬çš„ç›‘å¬!</p>
</blockquote>
<h3 id="Spring-MVC-æºç "><a href="#Spring-MVC-æºç " class="headerlink" title="Spring MVC æºç "></a>Spring MVC æºç </h3><h4 id="å…³é”®ç±»è§£æ-1"><a href="#å…³é”®ç±»è§£æ-1" class="headerlink" title="å…³é”®ç±»è§£æ"></a>å…³é”®ç±»è§£æ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">WebMvcConfigurationSupport</span><br><span class="line">	é»˜è®¤æ³¨å†Œäº†å¾ˆå¤šä¸œè¥¿,å¦‚HandlerMappingå‡ ä¸ªå®ç°, HandlerAdaptorå‡ ä¸ªå®ç°</span><br><span class="line"></span><br><span class="line">HandlerMapping</span><br><span class="line">	æ·»åŠ å®¹å™¨å†…æ‰€æœ‰å¸¦æœ‰RequestMapingçš„ç±»çš„å…¬å¼€æ–¹æ³•åˆ° mappings ä¸­</span><br><span class="line">		(AbstractHandlerMethodMapping#afterPropertiesSetä¸­)</span><br><span class="line">    æ ¹æ®requestçš„uriæŸ¥æ‰¾å¯¹åº”çš„HandlerMethod, æ­¥éª¤æ¦‚è¿°:</span><br><span class="line">    	æŠŠRequestMappingæ³¨è§£å†…çš„pathä½œä¸ºkeyä¿æŒåˆ°ä¸€ä¸ªmap1</span><br><span class="line">    	å…¶ä»–ä¿¡æ¯å°è£…æˆmappingä½œä¸ºkeyä¹Ÿä¿æŒåˆ°å¦ä¸€ä¸ªmap2</span><br><span class="line">    	æ ¹æ®uriå» map1 è·å– mapping, å†æ ¹æ®mapping è·å– HandlerMethod</span><br><span class="line">    	å°è£…æˆMatchå¯¹è±¡, ä¸å…¶ä»–åŒ¹é…å¯¹è±¡åšæ¯”è¾ƒå, è¿”å› HandlerMethod</span><br><span class="line"></span><br><span class="line">HandlerAdapter</span><br><span class="line">	åˆå§‹åŒ–å‚æ•°è§£æï¼Œè¿”å›å€¼è§£æç­‰</span><br><span class="line">		(RequestMappingHandlerAdapter#afterPropertiesSet)</span><br><span class="line">	æ ¹æ®Handleç¡®å®šå¯¹åº”çš„HandlerAdapter, ç„¶åæ‰§è¡Œè¿™ä¸ª handler</span><br><span class="line">    å¦‚RequestMappingHandlerAdapter åˆ™è´Ÿè´£æ‰§è¡Œ HandlerMethod</span><br><span class="line">    	ç®€å•è¯´å°±æ˜¯å°è£… HandlerMethod, æ ¹æ®å‚æ•°å€¼è®¾ç½®å‚æ•°, ç„¶åè°ƒç”¨æ–¹æ³•, å†å¤„ç†è¿”å›å€¼å°è£…æˆModelAndView</span><br><span class="line">    å¦å¤–ï¼Œ è¿™é‡Œå¦‚æœä½¿ç”¨äº†@ResponseBodyï¼Œä¼šè¿›å…¥ RequestResponseBodyMethodProcessor</span><br><span class="line">    	ç„¶åä½¿ç”¨messageConvertersï¼ˆjsonï¼‰å†™å…¥åˆ°å“åº”æµ</span><br><span class="line">    	æœ€åmvä¹Ÿç›´æ¥è¿”å›nullï¼Œ ä¸éœ€è¦renderäº†ã€‚</span><br><span class="line"></span><br><span class="line">ViewResolver</span><br><span class="line">	è´Ÿè´£å°†ModelAndViewè§£ææˆHTML, å¦‚JSP, FreeMarker</span><br><span class="line"></span><br><span class="line">HandlerExecutionChian</span><br><span class="line">	ç®¡ç†æ‹¦æˆªå™¨å’Œå°è£…Handler, è´Ÿè´£æ‹¦æˆªå™¨çš„å®é™…è°ƒç”¨é€»è¾‘å®ç°</span><br><span class="line">	</span><br><span class="line">DispatcherServlet</span><br><span class="line">	è°ƒåº¦æ•´ä¸ªHTTPè¯·æ±‚å“åº”æµç¨‹, è°ƒç”¨å„ä¸ªå­ç»„ä»¶è´Ÿè´£æ‰§è¡Œå¤„ç†æ–¹æ³•, è§£æè§†å›¾, å¤„ç†å¼‚å¸¸ç­‰.</span><br></pre></td></tr></table></figure>

<h4 id="æ‰§è¡Œæµç¨‹"><a href="#æ‰§è¡Œæµç¨‹" class="headerlink" title="æ‰§è¡Œæµç¨‹"></a>æ‰§è¡Œæµç¨‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">GET</span><br><span class="line">HttpServlet#service()</span><br><span class="line">HttpServlet#doGet()</span><br><span class="line">FrameworkServlet#doGet()</span><br><span class="line">FrameworkServlet#processRequest()</span><br><span class="line">FrameworkServlet#doService()</span><br><span class="line">DispatcherServlet#doService()</span><br><span class="line">DispatcherServlet#doDispatch()</span><br><span class="line">	è°ƒç”¨å®¹å™¨å†…æ‰€æœ‰çš„HandlerMappingçš„å®ç°ç±»çš„getHandleræ–¹æ³•, è¿”å›HandlerExecutionChain</span><br><span class="line">	è°ƒç”¨å®¹å™¨å†…æ‰€æœ‰çš„HandlerAdaptorçš„å®ç°ç±»å¯»æ‰¾é€‚åˆçš„å½“å‰Hanlderçš„HandlerAdaptor</span><br><span class="line">	æ‰§è¡Œæ‹¦æˆªå™¨çš„ preHandle æ–¹æ³•, å¹¶æ ¹æ®è¿”å›ç»“æœåˆ¤æ–­æ˜¯å¦æ¥ç»­æ‰§è¡Œ</span><br><span class="line">	HandlerAdaptoræ‰§è¡Œhandleæ–¹æ³•</span><br><span class="line">	è¿›å…¥RequestMappingHandlerAdaptoræ‰§è¡Œhandle-&gt;handlerInternal-&gt;invokeHandlerMethod</span><br><span class="line">	ç”ŸæˆServletInvocableHandlerMethod(å°±æ˜¯å®ç°äº†åå°„è°ƒç”¨æ–¹æ³•å’Œè®¾ç½®å‚æ•°,å¤„ç†è¿”å›å€¼ç­‰æ“ä½œ)</span><br><span class="line">	è°ƒç”¨invokeAndHandle--&gt;invokeForRequest</span><br><span class="line">		å…¶ä¸­getMethodArgumentValuesæŒ¨ä¸ªè°ƒç”¨HandlerMethodArgumentResolverè·å–å‚æ•°å€¼</span><br><span class="line">	ç„¶åæ‰§è¡Œ doInvoke, åˆ©ç”¨åå°„æŠ€æœ¯è°ƒç”¨ Method, method.invoke(obj, args);</span><br><span class="line">	æ‰§è¡Œå®Œå, è¿”å›ç»“æœ, å›åˆ° invokeAndHandle è°ƒç”¨ returnValueHandlers å¤„ç†è¿”å›ç»“æœ</span><br><span class="line">	è¿”å›å å›åˆ° invokeHandlerMethod, è°ƒç”¨ getModelAndView è·å–é€šç”¨çš„è¿”å›å€¼(å¯èƒ½æ˜¯ç©º)</span><br><span class="line">	è¿”å›ModelAndViewå, å›åˆ°doDispatch, è®¾ç½®é»˜è®¤viewName (mvä¸ºç©ºåˆ™ä¸éœ€è¦è®¾ç½®)</span><br><span class="line">	æ‰§è¡Œæ‹¦æˆªå™¨çš„ postHandle æ–¹æ³•</span><br><span class="line">	processDispatchResult ä¸­çš„ render è§£æè§†å›¾åé€šè¿‡response å“åº”è¿™ä¸ªview</span><br><span class="line">	æ ¹æ®å¼‚å¸¸æƒ…å†µæ‰§è¡Œå¼‚å¸¸å¤„ç†å™¨, ä»¥åŠæ‰§è¡Œæ‹¦æˆªå™¨çš„ afterCompletion æ–¹æ³•</span><br></pre></td></tr></table></figure>

<h4 id="æ‹¦æˆªå™¨åŸç†"><a href="#æ‹¦æˆªå™¨åŸç†" class="headerlink" title="æ‹¦æˆªå™¨åŸç†"></a>æ‹¦æˆªå™¨åŸç†</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ä½•æ—¶åŠ å…¥?</span><br><span class="line">	ä»WebMvcConfigurationSupportçš„å­ç±»ä¸­è°ƒç”¨addInterceptors </span><br><span class="line">	æ·»åŠ ä¸€äº›æ‹¦æˆªå™¨å’Œæ‹¦æˆªå™¨çš„è·¯å¾„é…ç½® InterceptorRegistry å’Œ MappedInterceptor</span><br><span class="line">    å®ç°æ‹¦æˆªå™¨è·¯å¾„åŒ¹é…, åœ¨ new HandlerExecutionChian æ—¶åˆ¤æ–­</span><br><span class="line"></span><br><span class="line">ä½•æ—¶æ‰§è¡Œ?</span><br><span class="line">	DispatcherServlet è´Ÿè´£åœ¨æ­£ç¡®çš„æ—¶æœºè°ƒç”¨ HandlerExecutionChian æ¥è°ƒç”¨ preHanlde ç­‰æ–¹æ³•.</span><br><span class="line">	æ‹¿åˆ° HandlerExecutionChian åè°ƒç”¨ preHanlde</span><br><span class="line">	HandlerAdapteræ‰§è¡Œå®Œhandlerå, è°ƒç”¨ postHandle</span><br><span class="line">	è§£æè§†å›¾å¹¶æ¸²æŸ“åˆ°responseä¹‹å, è°ƒç”¨ afterCompletion</span><br><span class="line">	å¦‚æœä¸­é€”å‡ºç°å¼‚å¸¸, æˆ–preHandleæå‰ç»“æŸ, åˆ™ä¹Ÿè°ƒç”¨afterCompletion</span><br><span class="line"></span><br><span class="line">æ€»ç»“</span><br><span class="line">	DispatcherServlet å»è°ƒç”¨ HandlerExecutionChianå»è°ƒç”¨ æ‹¦æˆªå™¨å…·ä½“æ–¹æ³•. </span><br><span class="line">	å¤æ‚ç‚¹æ˜¯æ·»åŠ ä¸€ä¸ªæ‹¦æˆªå™¨åˆ°è¢«åŠ å…¥åˆ°HandlerExecutionChianæ¯”è¾ƒå¤æ‚ä¸€ç‚¹, ä»¥åŠå¸¦è·¯å¾„åŒ¹é…çš„æ‹¦æˆªå™¨å®ç°ç•¥å¤æ‚ä¸€äº›.</span><br></pre></td></tr></table></figure>



<h3 id="Mybatis-æºç "><a href="#Mybatis-æºç " class="headerlink" title="Mybatis æºç "></a><code>Mybatis</code> æºç </h3><h4 id="å…³é”®ç±»è§£æ-2"><a href="#å…³é”®ç±»è§£æ-2" class="headerlink" title="å…³é”®ç±»è§£æ"></a>å…³é”®ç±»è§£æ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Configuration</span><br><span class="line">	ä½œç”¨: è§£æå’Œä¿å­˜å¤§é…ç½®(mybatiså…¨å±€é…ç½®,å¦‚æ•°æ®åº“è¿æ¥, åˆ«åç­‰), å°é…ç½®(æ¯ä¸ªmapperæ–‡ä»¶)ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">MapperProxy, MapperMethod</span><br><span class="line">	ä½œç”¨: ç”ŸæˆdaoImplä»£ç†å¯¹è±¡å’Œå®ç°æ¥å£æ–¹æ³•: è°ƒç”¨sqlSession æ“ä½œæ–¹æ³•</span><br><span class="line"></span><br><span class="line">Executor</span><br><span class="line">	ä½œç”¨: åè°ƒå’Œç®¡ç†StatementHandler, ParameterHandler, ResultSetHandler, è§£æmapperStatementé…ç½®ä¿¡æ¯æˆBoundSql.</span><br><span class="line"></span><br><span class="line">StatementHandler</span><br><span class="line">	ä½œç”¨: ç”ŸæˆpreparedStatmentå¯¹è±¡(JDBCçš„), è°ƒç”¨executeæ–¹æ³•.</span><br><span class="line"></span><br><span class="line">ParameterHandler</span><br><span class="line">	ä½œç”¨: ç®¡ç†å¹¶ä½¿ç”¨TypeHandlerä¸ºpreparedStatmentå¯¹è±¡è®¾ç½®å‚æ•°,</span><br><span class="line"></span><br><span class="line">ResultSetHandler</span><br><span class="line">	ä½œç”¨: å°†ResultSetç»“æœé›†è½¬æˆæ¥å£è¿”å›å€¼è®¤è¯†çš„æ•°æ®, è´Ÿè´£å»¶è¿ŸåŠ è½½.</span><br></pre></td></tr></table></figure>

<h4 id="ç”Ÿå‘½å‘¨æœŸä¸æ‰§è¡Œæµç¨‹"><a href="#ç”Ÿå‘½å‘¨æœŸä¸æ‰§è¡Œæµç¨‹" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸä¸æ‰§è¡Œæµç¨‹"></a>ç”Ÿå‘½å‘¨æœŸä¸æ‰§è¡Œæµç¨‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.è¯»å–é…ç½®æ–‡ä»¶, è§£æxml(æˆ–properties)è·å¾—é…ç½®ä¿¡æ¯(æ•°æ®åº“é…ç½®å’ŒmapperSqlç­‰) Configuration</span><br><span class="line">2.è·å–æ•°æ®åº“è¿æ¥, å¼€å¯äº‹åŠ¡, å‡†å¤‡æ‰§è¡Œsql (openSession)</span><br><span class="line">3.ä½¿ç”¨åŠ¨æ€ä»£ç†æŠ€æœ¯ç”Ÿæˆä»£ç†ç±»</span><br><span class="line">4.ä»£ç†ç±»æ ¹æ®ä»£ç†æ–¹æ³•å¯¹åº”çš„mapperStatementç±»å‹è°ƒç”¨sqlSessionçš„insert,update,delete,selectXxxæ–¹æ³• (MapperProxy, MapperMethod)</span><br><span class="line">4.sqlSessionè°ƒç”¨Executoræ‰§è¡Œsql (Exector, SimpleExecutor, CachingExecutor)</span><br><span class="line">5.Executor ç”ŸæˆStatementHandlerå¯¹è±¡å¹¶è§£æxmlä¸­sqlå‚æ•°, å†ä½¿ç”¨ParameterHandlerè®¾ç½®å‚æ•°. (BaseExecutor, StatmentHandler, ParameterHandler, TypeHandler å‰ä¸‰ä¸ªå¯è¢«æ’ä»¶æ‹¦æˆªä»»æ„æ–¹æ³•)</span><br><span class="line">6.æœ€åä½¿ç”¨OGNLè¡¨è¾¾å¼è§£æåº“å¯¹ if,foreach,whereç­‰æ ‡ç­¾è§£æç”Ÿæˆæœ€æ€»sql (ONGL)</span><br><span class="line">7.æ‰§è¡Œsqlåè·å¾—resultSet, ä½¿ç”¨ ResultSetHandler å¤„ç†åè¿”å›ç»“æœ(resultMap, resultTypeçš„å¤„ç†åœ¨è¿™é‡Œ) (ResultSetHandler å¯è¢«æ’ä»¶æ‹¦æˆªä»»æ„æ–¹æ³•)</span><br><span class="line">8.æ ¹æ®äº‹åŠ¡é…ç½®æäº¤äº‹åŠ¡(è‡ªåŠ¨æäº¤), ä¿å­˜ä¸€çº§ç¼“å­˜</span><br><span class="line">9.å¦‚å¼€å¯äºŒçº§ç¼“å­˜, Executorè¿˜ä¼šè¢«è£…é¥°å™¨æ¨¡å¼åŒ…è£…ä¸€å±‚, å°†ç»“æœç¼“å­˜åˆ°MapperStatementçš„cacheå˜é‡ä¸­.</span><br><span class="line"></span><br><span class="line">TIPS:</span><br><span class="line">1.æ’ä»¶çš„ä½¿ç”¨å®åœ¨Executor, StatementHandler, ParameterHandler, ResultSetHandlerè¿™å‡ ä¸ªå¯¹è±¡å®ä¾‹åŒ–çš„æ—¶å€™, ä½¿ç”¨jdkåŠ¨æ€ä»£ç†å°†é…ç½®é‡Œé…ç½®çš„å½¢æˆä»£ç†é“¾. è¿”å›ä»£ç†å¯¹è±¡, ä½†è°ƒç”¨æ–¹æ³•æ—¶, ä¼šåˆ¤æ–­æ˜¯å¦æ‹¦æˆªæ­¤æ–¹æ³•å¹¶æ‰§è¡Œæ’ä»¶çš„ä»£ç .</span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼"><a href="#ä½¿ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼" class="headerlink" title="ä½¿ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼"></a>ä½¿ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">1.ä»£ç†æ¨¡å¼</span><br><span class="line">	MapperProxy ç”Ÿæˆ mapper å®ç°ç±» jdkä»£ç†</span><br><span class="line">	Plugin ç”Ÿæˆä»£ç†å¯¹è±¡å®ç°æ’ä»¶ jdkä»£ç†</span><br><span class="line">	ResultSetHandler(LazyLoad) cblib, javassist</span><br><span class="line">2.è£…é¥°è€…æ¨¡å¼</span><br><span class="line">	CachingExecutor: è£…é¥°SimpleExecutoræ·»åŠ äºŒçº§ç¼“å­˜åŠŸèƒ½</span><br><span class="line">	Cache,FifoCache... ä½¿ç”¨è£…é¥°è€…æ¨¡å¼ä¸ºç¼“å­˜æ·»åŠ ä¸åŒç‰¹æ€§(åŠŸèƒ½)</span><br><span class="line">3.é€‚é…å™¨æ¨¡å¼</span><br><span class="line">	StatementHandler</span><br><span class="line">4.è´£ä»»é“¾æ¨¡å¼</span><br><span class="line">	Interceptor(æ‹¦æˆªExecutorã€StatementHandlerã€ParameterHandlerã€ResultSetHandlerå¯¹è±¡)</span><br><span class="line">5.ç­–ç•¥æ¨¡å¼			</span><br><span class="line">	StatementHandler</span><br><span class="line">		PreparedStatementHandler,CallableStatementHandler,SimpleStatementHandler</span><br><span class="line">	Executor</span><br><span class="line">		SimpleExecutor,ReuseExecutor,BatchExecutor</span><br><span class="line">	TypeHandler</span><br><span class="line">		UnknownTypeHandler, IntegerTypeHandler, NStringTypeHandler</span><br><span class="line">6.å»ºé€ å™¨æ¨¡å¼</span><br><span class="line">	org.apache.ibatis.mapping.MappedStatement.Builder</span><br><span class="line">	org.apache.ibatis.builder.xml.XMLConfigBuilder</span><br></pre></td></tr></table></figure>

<h4 id="ä¸€çº§ç¼“å­˜å®ç°"><a href="#ä¸€çº§ç¼“å­˜å®ç°" class="headerlink" title="ä¸€çº§ç¼“å­˜å®ç°"></a>ä¸€çº§ç¼“å­˜å®ç°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.putæ—¶æœº: </span><br><span class="line">	org.apache.ibatis.executor.BaseExecutor#queryFromDatabase çš„ localCache.putObject(key, list)</span><br><span class="line">	</span><br><span class="line">2.getæ—¶æœº:</span><br><span class="line">	org.apache.ibatis.executor.BaseExecutor#query çš„ localCache.getObject(key)</span><br><span class="line">	</span><br><span class="line">3.å­˜åœ¨å“ªé‡Œ</span><br><span class="line">	org.apache.ibatis.executor.BaseExecutor#localCache</span><br><span class="line">	è¿™ä¸ªç±»æ¯æ¬¡openSessionä¼šæ–°å»ºä¸€ä¸ªExecutorå®ä¾‹</span><br></pre></td></tr></table></figure>

<h4 id="äºŒçº§ç¼“å­˜å®ç°"><a href="#äºŒçº§ç¼“å­˜å®ç°" class="headerlink" title="äºŒçº§ç¼“å­˜å®ç°"></a>äºŒçº§ç¼“å­˜å®ç°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1.putæ—¶æœº: </span><br><span class="line">	org.apache.ibatis.executor.CachingExecutor#queryçš„tcm.putObject</span><br><span class="line">	ç„¶åå®é™…ä¸Šæ˜¯è°ƒç”¨äº†cacheçš„put, cacheå®é™…ä¸Šæ¥è‡ªConfigurationè§£æmapperæ–‡ä»¶æ—¶åˆ›å»ºçš„, å³åŒä¸€ä¸ªmapperå…±ç”¨åŒä¸€ä¸ªcache.</span><br><span class="line">	</span><br><span class="line">2.getæ—¶æœº:</span><br><span class="line">	org.apache.ibatis.executor.CachingExecutor#queryçš„tcm.getObject, cacheå®é™…æ˜¯: åŒä¸Š</span><br><span class="line"></span><br><span class="line">3.removeæ—¶æœº:</span><br><span class="line">	org.apache.ibatis.executor.CachingExecutor#flushCacheIfRequired</span><br><span class="line"></span><br><span class="line">æ³¨æ„äº‹é¡¹: ä¸Šè¿°æ—¶æœºéƒ½æ˜¯TransactionCacheManagerçš„è°ƒç”¨, è€ŒTransactionCacheManagerä¼šæ ¹æ®äº‹åŠ¡çš„æäº¤å’Œå›æ»šæ¥å¤„ç†ç¼“å­˜çš„å†™å…¥ä¸ç§»é™¤æ—¶æœº, å¦‚çœŸå®ç§»é™¤æ—¶æœºæ˜¯ä¸‹ä¸€æ¬¡commitè§¦å‘, çœŸå®å†™å…¥ä¹Ÿæ˜¯commitæ—¶è§¦å‘.</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">4.å­˜åœ¨å“ªé‡Œ</span><br><span class="line">	org.apache.ibatis.mapping.MappedStatement</span><br><span class="line">	ä¹Ÿç®—æ˜¯åœ¨ org.apache.ibatis.session.Configuration ä¸­</span><br></pre></td></tr></table></figure>





<h3 id="Mybatis-Plus"><a href="#Mybatis-Plus" class="headerlink" title="Mybatis-Plus"></a><code>Mybatis-Plus</code></h3><h2 id="IO-ç½‘ç»œ"><a href="#IO-ç½‘ç»œ" class="headerlink" title="IO / ç½‘ç»œ"></a>IO / ç½‘ç»œ</h2><h3 id="AIO-NIO-BIO"><a href="#AIO-NIO-BIO" class="headerlink" title="AIO, NIO, BIO"></a>AIO, NIO, BIO</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">BIO: ä» jdk1.4 å‰, é‡‡ç”¨ ServerSocket API è¿›è¡Œç½‘ç»œè¿æ¥, æ‰€æœ‰æ“ä½œéƒ½æ˜¯é˜»å¡çš„(å¦‚ç›‘å¬, è¯»&#x2F;å†™)</span><br><span class="line">NIO: ä» jdk1.4 èµ·, å¯¹äºæ‰€æœ‰æ“ä½œéƒ½æ˜¯ä¾èµ–äº‹ä»¶é©±åŠ¨, åªéœ€è¾ƒå°‘çš„çº¿ç¨‹å³å¯å¤„ç†å¤§é‡è¯·æ±‚</span><br><span class="line">AIO: jdk1.7 èµ·, åœ¨ NIO åŸºç¡€ä¸Šå®ç°å¼‚æ­¥, æ‰€æœ‰äº‹ä»¶é€šçŸ¥ç”±ç³»ç»Ÿé€šçŸ¥, è€ŒéNIO é‚£æ ·è½®è¯¢</span><br></pre></td></tr></table></figure>

<h3 id="TCP-UDP"><a href="#TCP-UDP" class="headerlink" title="TCP/UDP"></a>TCP/UDP</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">TCP: æ˜¯é¢å‘è¿æ¥çš„åè®®, æ”¶å‘æ•°æ®å‰, å¿…é¡»å»ºç«‹å¯é çš„è¿æ¥(é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹)</span><br><span class="line">UDP: æ˜¯æ— è¿æ¥çš„åè®®, æ”¶å‘æ•°æ®ä¸éœ€è¦å»ºç«‹è¿æ¥(æ¡æ‰‹)</span><br><span class="line"></span><br><span class="line">åŒºåˆ«:</span><br><span class="line">é€Ÿåº¦: TCP æ»¡, UDP å¿«</span><br><span class="line">æ­£ç¡®æ€§&#x2F;å®Œæ•´æ€§: TCP å¥½, UDP æ— </span><br><span class="line">é¡ºåºæ€§: TCP å¥½, UDP æ— </span><br><span class="line"></span><br><span class="line">åº”ç”¨:</span><br><span class="line">TCP: æ–‡ä»¶ä¸‹è½½, HTTP, DNS, IM é€šè®¯</span><br><span class="line">UDP: ç½‘ç»œæ¸¸æˆ, ç›´æ’­æ¨æµ</span><br></pre></td></tr></table></figure>

<h3 id="Netty"><a href="#Netty" class="headerlink" title="Netty"></a>Netty</h3><blockquote>
<p>å°è£…äº†å¤æ‚çš„NIOæ¥å£, æä¾›äº†ç®€å•çš„ API å®ç°æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯é«˜å¹¶å‘é€šè®¯, å¹¶å°è£…äº†å¾ˆå¤šå·¥å…·, å¦‚å¿ƒè·³è¶…æ—¶, åŠåŒ…å¤„ç†, websocket ç­‰.</p>
</blockquote>
<h2 id="æ•°æ®ç»“æ„ä¸ç®—æ³•"><a href="#æ•°æ®ç»“æ„ä¸ç®—æ³•" class="headerlink" title="æ•°æ®ç»“æ„ä¸ç®—æ³•"></a>æ•°æ®ç»“æ„ä¸ç®—æ³•</h2><h3 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h3><h4 id="é˜Ÿåˆ—-æ ˆ"><a href="#é˜Ÿåˆ—-æ ˆ" class="headerlink" title="é˜Ÿåˆ—,  æ ˆ"></a>é˜Ÿåˆ—,  æ ˆ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é˜Ÿåˆ—: å…ˆè¿›å…ˆå‡º FIFO</span><br><span class="line">æ ˆ: LIFO</span><br></pre></td></tr></table></figure>

<h4 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å•å‘é“¾è¡¨: Node&#123;next: Node&#125;</span><br><span class="line">åŒå‘é“¾è¡¨: Node&#123;prev: Node, next: Node&#125;</span><br><span class="line">å¾ªç¯é“¾è¡¨: Node&#123;first: Node, last: Node, prev: Node, next: Node&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ ‘"><a href="#æ ‘" class="headerlink" title="æ ‘"></a>æ ‘</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">äºŒå‰æ ‘:</span><br><span class="line">	å…ˆåºéå†: æ ¹-&gt;å·¦-&gt;å³</span><br><span class="line">	ä¸­åºéå†: å·¦-&gt;æ ¹-&gt;å³</span><br><span class="line">	ååºéå†: å·¦-&gt;å³-&gt;æ ¹</span><br><span class="line"></span><br><span class="line">çº¢é»‘æ ‘:</span><br><span class="line">	çº¢é»‘æ ‘æ˜¯ä¸€ç§å«æœ‰çº¢é»‘ç»“ç‚¹å¹¶èƒ½è‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘.</span><br><span class="line">	ä»»æ„ä¸€ç»“ç‚¹åˆ°æ¯ä¸ªå¶å­ç»“ç‚¹çš„è·¯å¾„éƒ½åŒ…å«æ•°é‡ç›¸åŒçš„é»‘ç»“ç‚¹.</span><br><span class="line">	é€Ÿåº¦: O(log2 n) æœ€å: O(log n)</span><br><span class="line">	å¯¹æ¯” BST: æŸ¥æ‰¾æ›´å¿«, æ’å…¥æ›´æ…¢.</span><br><span class="line">	å¯¹æ¯” AVL: æŸ¥æ‰¾ç•¥æ…¢, æ’å…¥æ›´å¿«.</span><br><span class="line">	</span><br><span class="line">B+æ ‘:</span><br><span class="line">	æ‰€æœ‰è®°å½•èŠ‚ç‚¹å­˜æ”¾åœ¨å¶å­èŠ‚ç‚¹ä¸Šï¼Œä¸”æ˜¯é¡ºåºå­˜æ”¾ï¼Œç”±å„å¶å­èŠ‚ç‚¹æŒ‡é’ˆè¿›è¡Œè¿æ¥ã€‚</span><br><span class="line">	å¦‚æœä»æœ€å·¦è¾¹çš„å¶å­èŠ‚ç‚¹å¼€å§‹é¡ºåºéå†ï¼Œèƒ½å¾—åˆ°æ‰€æœ‰é”®å€¼çš„é¡ºåºæ’åºã€‚</span><br><span class="line">	æŸ¥æ‰¾é€Ÿåº¦å’Œæ ‘é«˜åº¦æœ‰å…³, å¦‚ MySQL æ ‘é«˜åº¦ä¸º 3, åˆ™æ€»æ˜¯æŸ¥è¯¢ 3 æ¬¡æ‰¾åˆ°å­èŠ‚ç‚¹, å³å¾—åˆ°æ•°æ®.</span><br></pre></td></tr></table></figure>



<h3 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h3><h4 id="æ’åºç®—æ³•"><a href="#æ’åºç®—æ³•" class="headerlink" title="æ’åºç®—æ³•"></a>æ’åºç®—æ³•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">å¿«é€Ÿæ’åº: O(nlog(n))</span><br><span class="line">	å°†æ•°ç»„åˆ†ä¸º2åŠï¼Œå¹¶è®¡ç®—ä¸€ä¸ªä¸­é—´å€¼ï¼Œå°†å·¦è¾¹æ‰€æœ‰å¤§äºä¸­é—´å€¼çš„ç§»åˆ°å³è¾¹ï¼ŒæŠŠå³è¾¹æ‰€æœ‰å°äºä¸­é—´å€¼çš„ç§»åˆ°å·¦è¾¹ï¼Œ</span><br><span class="line">	ç„¶ååˆ†åˆ«å¯¹å·¦è¾¹å’Œå³è¾¹é€’å½’å¤„ç†ï¼ˆå†åˆ†2åŠï¼Œå†å–ä¸­é—´å€¼ï¼Œå†ç§»åŠ¨ï¼Œå†é€’å½’ï¼‰ï¼Œç›´åˆ°æ— éœ€é€’å½’ä¸ºæ­¢ã€‚</span><br><span class="line"></span><br><span class="line">å½’å¹¶æ’åº: O(nlog(n))</span><br><span class="line">	å°†æ•°ç»„ä¸æ–­ä¸¤ä¸¤æ‹†åˆ†ï¼Œç›´åˆ°æ— æ³•æ‹†åˆ†ï¼ˆåªæœ‰2ä¸ªå…ƒç´ ï¼‰æ—¶å¼€å§‹å¯¹æ‹†åˆ†åçš„å…ƒç´ è¿›è¡Œæ’åºï¼Œç„¶åä¸æ–­å›æº¯ï¼Œ</span><br><span class="line">	ä¸æ–­æ’åºï¼Œç›´åˆ°ç¬¬ä¸€æ¬¡æ‹†åˆ†ï¼Œå³æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æœ‰åºçš„äº†ã€‚æ’åºæ–¹å¼ä¸ºå…ˆå–ä¸¤ä¸ªéƒ¨åˆ†çš„ç¬¬ä¸€ä¸ªä¸‹æ ‡ï¼Œ</span><br><span class="line">	äº’ç›¸åˆ¤æ–­ï¼Œè°å°è°æ”¾åˆ°æœ‰åºæ•°ç»„ä¸­ï¼Œç„¶åå°çš„é‚£ä¸ªä¸‹æ ‡ç§»ä½ï¼Œç»§ç»­åˆ¤æ–­ï¼Œç›´åˆ°å…¶ä¸­ä¸€ä¸ªéƒ¨åˆ†æ‰€æœ‰å…ƒç´ å–å®Œï¼Œ</span><br><span class="line">	åˆ™å°†å¦ä¸€éƒ¨åˆ†å‰©ä½™å…ƒç´ æ‰¹é‡ç›´æ¥æ‹·è´åˆ°æœ‰åºæ•°ç»„å³å¯ã€‚</span><br><span class="line"></span><br><span class="line">å†’æ³¡æ’åº: O(n^2) æœ€å¥½ O(n)</span><br><span class="line">	è¿›è¡Œ n - 1 è½®ï¼Œ æ¯è½®éå†æ•°ç»„ä¸¤ä¸¤æ¯”è¾ƒäº¤æ¢ï¼Œä»è€Œè¾¾åˆ°æŠŠæœ€å¤§çš„äº¤æ¢åˆ°æœ€åé¢ã€‚ä¸‹è½®éå†æ•°ç»„ä¸ªæ•°å‡ä¸€ã€‚</span><br><span class="line"></span><br><span class="line">é€‰æ‹©æ’åº: O(n^2)</span><br><span class="line">	è¿›è¡Œ n - 1 è½®ï¼Œæ¯è½®éå†é€‰æ‹©æ•°ç»„æœ€å°å€¼æ”¾åˆ°æœ€å‰é¢ï¼Œä¸‹è½®éå†æ•°ç»„ä¸ªæ•°å‡ä¸€</span><br><span class="line"></span><br><span class="line">æ’å…¥æ’åº: O(n^2) æœ€å¥½ O(n)</span><br><span class="line">	åˆ†2ä¸ªæ•°ç»„ï¼Œæœ‰åºå’Œæ— åºï¼Œå¼€å±€æœ‰åºé»˜è®¤å«æœ‰æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ— åºå«æœ‰å‰©ä½™çš„å…ƒç´ ã€‚</span><br><span class="line">	éå†æ— åºæ‰€æœ‰å…ƒç´ ï¼Œä»åå‘å‰æ¯”è¾ƒå¤§å°ï¼Œç„¶åè¿›è¡Œæ’å…¥åˆ°æœ‰åºæ•°ç»„ä¸­æˆ–å¯¹æ•°ç»„å…ƒç´ ç§»ä½ã€‚</span><br><span class="line"></span><br><span class="line">å¸Œå°”æ’åº: O(n^1.25)</span><br><span class="line">	å¯¹æ•°ç»„è¿›è¡Œåˆ†ç»„ï¼Œå¯¹æ¯ç»„ä½¿ç”¨æ’å…¥æ’åºçš„ç§»ä½è¿›è¡Œæ’åºï¼Œç¬¬ä¸€æ¬¡åˆ† æ•°ç»„é•¿åº¦&#x2F;2 ç»„ï¼Œ</span><br><span class="line">	ä¸‹ä¸€æ¬¡åˆ†ç»„ä¸ºæ•°ç»„é•¿åº¦&#x2F;2å†&#x2F;2ç»„ï¼Œè‹¥åˆ† é•¿åº¦&#x2F;2 ç»„ï¼Œåˆ™æ¯ç»„2ä¸ªï¼Œ è‹¥åˆ† é•¿åº¦&#x2F;2&#x2F;2 ç»„ï¼Œ</span><br><span class="line">	åˆ™æ¯ç»„ 2*2 ä¸ªï¼Œç›´åˆ°é•¿åº¦ä¸º1. è¿™æ˜¯ä¸€ä¸ªå°†æ•°ç»„åæ®µæ•°æ®å°½å¯èƒ½ä¸å‰æ®µæ•°æ®æ’åºï¼Œ</span><br><span class="line">	æ”¹è¿›æ’å…¥æ’åºåç«¯æ•°æ®è¿‡å°å¯¼è‡´ç§»ä½æ“ä½œè¿‡å¤šçš„é—®é¢˜ã€‚</span><br><span class="line"></span><br><span class="line">åŸºæ•°æ’åº: O(n)</span><br><span class="line">	åˆ›å»º10ä¸ªæ¡¶ï¼Œæ¯ä¸ªæ¡¶å¤§å°å‡ä¸ºæ•°ç»„é•¿åº¦ï¼Œç„¶åéå†æ•°ç»„ï¼Œä»å…ƒç´ çš„æœ€ä½ä½ï¼ˆä¸ªä½ï¼‰å¼€å§‹ï¼Œ</span><br><span class="line">	å–å‡ºå¹¶æ”¾åˆ°å¯¹åº”çš„æ¡¶ï¼ˆå¦‚ä¸ªä½æ˜¯8ï¼Œåˆ™æ”¾åˆ°ç¬¬8ä¸ªæ¡¶ä¸­ï¼‰ï¼Œæ”¾å®Œåï¼Œé¡ºåºéå†æ‰€æœ‰æ¡¶ï¼Œ</span><br><span class="line">	é¡ºåºå–å‡ºæ¯ä¸ªå…ƒç´ ï¼Œç»„æˆæ–°æ•°ç»„ï¼Œå†å°†æ–°æ•°ç»„æŒ‰ä»¥ä¸Šæµç¨‹å¤„ç†åä½ï¼Œå†ç™¾ä½ï¼Œç›´åˆ°æ•°ç»„ä¸­çš„æœ€å¤§æ•°çš„æœ€é«˜ä½ã€‚</span><br><span class="line">	</span><br><span class="line">å †æ’åºï¼š</span><br><span class="line">	ã€‚ã€‚ã€‚</span><br></pre></td></tr></table></figure>

<h4 id="ä¼˜åŒ–ç®—æ³•"><a href="#ä¼˜åŒ–ç®—æ³•" class="headerlink" title="ä¼˜åŒ–ç®—æ³•"></a>ä¼˜åŒ–ç®—æ³•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è´ªå¿ƒç®—æ³•</span><br><span class="line">çˆ¬å±±ç®—æ³•</span><br><span class="line">æ¨¡æ‹Ÿé€€ç«ç®—æ³•</span><br><span class="line">é—ä¼ ç®—æ³•</span><br><span class="line">èšç¾¤æœç´¢ç®—æ³•</span><br></pre></td></tr></table></figure>



<h2 id="è®¾è®¡æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼</h2><h3 id="7-å¤§åŸåˆ™"><a href="#7-å¤§åŸåˆ™" class="headerlink" title="7 å¤§åŸåˆ™"></a>7 å¤§åŸåˆ™</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å•ä¸€èŒè´£: æ¯ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªèŒè´£(æˆ–æ¯ä¸ªæ–¹æ³•)</span><br><span class="line">æ¥å£éš”ç¦»: ä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Š</span><br><span class="line">ä¾èµ–å€’è½¬: é«˜å±‚æ¨¡å—ä¸åº”ä¾èµ–ä½å±‚æ¨¡å—, äºŒè€…éƒ½åº”è¯¥ä¾èµ–æ¥å£è€Œéç»†èŠ‚. ç»†èŠ‚ä¾èµ–æŠ½è±¡, é¢å‘æ¥å£ç¼–ç¨‹</span><br><span class="line">é‡Œå¼æ›¿æ¢: å­ç±»åº”è¯¥åšåˆ°å¯ä»¥æ›¿æ¢çˆ¶ç±», åŠå­ç±»åº”å°½é‡ä¸é‡å†™çˆ¶ç±»æ–¹æ³•.</span><br><span class="line">å¼€é—­åŸåˆ™: å¯¹æä¾›è€…è€Œå·²å¯ä»¥ä¿®æ”¹, å¯¹ä½¿ç”¨è€…è€Œè¨€ä¸éœ€è¦ä¿®æ”¹(å³ä»£ç å…¼å®¹æ€§), å°½é‡ä½¿ç”¨æ‰©å±•å¢åŠ åŠŸèƒ½, è€Œéä¿®æ”¹åŸæœ‰ç±»</span><br><span class="line">è¿ªç±³ç‰¹æ³•åˆ™: ä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡ä¿æŒæœ€å°äº†è§£(æœ€å°‘çŸ¥é“åŸåˆ™)</span><br><span class="line">åˆæˆå¤ç”¨åŸåˆ™: ä¸€ä¸ªç±»ä½¿ç”¨å¦ä¸€ä¸ªç±»çš„ä»£ç (æ–¹æ³•), å°½é‡ä½¿ç”¨åˆæˆ, è€Œä¸æ˜¯ç»§æ‰¿</span><br></pre></td></tr></table></figure>



<h3 id="åˆ›å»ºå‹"><a href="#åˆ›å»ºå‹" class="headerlink" title="åˆ›å»ºå‹"></a>åˆ›å»ºå‹</h3><h4 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">åŸç†: ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›è¯¥å®ä¾‹çš„å…¨å±€è®¿é—®ç‚¹ã€‚</span><br><span class="line"></span><br><span class="line">é¥¿æ±‰å¼:</span><br><span class="line">	é™æ€å¸¸é‡</span><br><span class="line">	é™æ€ä»£ç å—</span><br><span class="line">æ‡’æ±‰å¼:</span><br><span class="line">	ç›´æ¥åˆ¤æ–­(çº¿ç¨‹ä¸å®‰å…¨)</span><br><span class="line">	æ–¹æ³•åŠ  synchronized(çº¿ç¨‹å®‰å…¨, æ•ˆç‡ä½)</span><br><span class="line">	åˆ¤æ–­åå†åŒæ­¥(é”™è¯¯å†™æ³•)</span><br><span class="line">	åŒé‡åˆ¤æ–­(if-åŒæ­¥-if) (æ¨èå†™æ³•)</span><br><span class="line">	åŒ¿åé™æ€å†…éƒ¨ç±» (ç®€å•, æ¨è)</span><br><span class="line">	æšä¸¾(ç®€å•, ä½†å¯¹è±¡æ–¹æ³•å†™åœ¨æšä¸¾ä¸­, ç•¥æœ‰ä¸é€‚)</span><br><span class="line">	</span><br><span class="line">ç¤ºä¾‹:</span><br><span class="line">	java.lang.Runtime#getRuntime()</span><br><span class="line">	java.awt.Desktop#getDesktop()</span><br></pre></td></tr></table></figure>

<h4 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">åŸç†: ä½¿ç”¨åŸå‹å®ä¾‹æŒ‡å®šè¦åˆ›å»ºå¯¹è±¡çš„ç±»å‹ï¼Œé€šè¿‡å¤åˆ¶è¿™ä¸ªåŸå‹æ¥åˆ›å»ºæ–°å¯¹è±¡.</span><br><span class="line">ç¤ºä¾‹: Java çš„ Object å¯¹è±¡çš„ clone æ–¹æ³•, java.util.Arrays.ArrayList#toArray()</span><br><span class="line"></span><br><span class="line">æµ…æ‹·è´: ä»…å¯¹åŸºç¡€ç±»å‹åŠå­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µæ‹·è´å€¼</span><br><span class="line">æ·±æ‹·è´: åŒæ—¶å¯¹å¼•ç”¨ç±»å‹(å¦‚æ•°ç»„,å¯¹è±¡) ä¹Ÿè¿›è¡Œæ‹·è´</span><br><span class="line"></span><br><span class="line">æ·±æ‹·è´å®ç°:</span><br><span class="line">1.é‡å†™ clone, ä¸€ä¸€å¤„ç†æ¯ä¸ªå¼•ç”¨å¯¹è±¡(è°ƒç”¨å¯¹è±¡çš„ clone), éº»çƒ¦, ä¸”è‹¥å¯¹è±¡ä¹‹é—´å…³ç³»å¤æ‚, å…¶ä¸­ä¸€ä¸ªæœªå®ç°æ·±æ‹·è´åˆ™å¯¼è‡´ bug.</span><br><span class="line">2.åˆ©ç”¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–, å¦‚ Json, æˆ– Java è‡ªå¸¦çš„åºåˆ—åŒ–æ–¹å¼(äºŒè¿›åˆ¶)</span><br></pre></td></tr></table></figure>

<h4 id="åˆ›å»ºè€…æ¨¡å¼-ç”Ÿæˆå™¨æ¨¡å¼"><a href="#åˆ›å»ºè€…æ¨¡å¼-ç”Ÿæˆå™¨æ¨¡å¼" class="headerlink" title="åˆ›å»ºè€…æ¨¡å¼(ç”Ÿæˆå™¨æ¨¡å¼)"></a>åˆ›å»ºè€…æ¨¡å¼(ç”Ÿæˆå™¨æ¨¡å¼)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å°è£…ä¸€ä¸ªå¯¹è±¡çš„æ„é€ è¿‡ç¨‹ï¼Œå¹¶å…è®¸æŒ‰æ­¥éª¤æ„é€ .</span><br><span class="line">	è‹¥å¯¹è±¡çš„ç”Ÿæˆè¿‡äºå¤æ‚(å­—æ®µæå¤šä¸”èµ‹å€¼è¿˜æœ‰ä¾èµ–å…³ç³», éœ€è¦é¡ºåºè°ƒç”¨), åˆ™å¯å°†èµ‹å€¼è¿‡ç¨‹å°è£…æˆä¸€ä¸ªbuild(), å¹¶æ”¾åˆ°ä¸€ä¸ª Builder ç±»ä¸­. æ­¤ç±»å¯¹å¤–æä¾›å„ä¸ªå­—æ®µçš„èµ‹å€¼æ–¹æ³•å¹¶å…ˆä¿å­˜èµ·æ¥, ç›´åˆ°è°ƒç”¨ build(), æ­¤æ–¹æ³•è¿”å›å¯¹è±¡å®ä¾‹. </span><br><span class="line">	ä½¿ç”¨æ­¤æ¨¡å¼, è°ƒç”¨è€…æ— éœ€å…³æ³¨æ„å»ºè¿‡ç¨‹, åªéœ€è®¾ç½®è‡ªå·±æƒ³è¦çš„å€¼, ç„¶åè°ƒç”¨ build() å³å¯å¾—åˆ°å¯¹è±¡å®ä¾‹. ä¸”è‹¥å¢åŠ æˆ–ä¿®æ”¹å­—æ®µ, æ„é€ è¿‡ç¨‹å˜åŒ–, è°ƒç”¨è€…æ— æ„ŸçŸ¥, æ— éœ€ä¿®æ”¹ä»£ç . ç¬¦åˆå¼€é—­åŸåˆ™.</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹: StringBuilder, ä¸€äº›æ¡†æ¶çš„ ConfigurationBuilder(å¦‚ xmpp), ç”¨äºæ„å»ºé…ç½®.</span><br></pre></td></tr></table></figure>

<h4 id="ç®€å•å·¥å‚æ¨¡å¼"><a href="#ç®€å•å·¥å‚æ¨¡å¼" class="headerlink" title="ç®€å•å·¥å‚æ¨¡å¼"></a>ç®€å•å·¥å‚æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	åœ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ä¸å‘å®¢æˆ·æš´éœ²å†…éƒ¨ç»†èŠ‚ï¼Œå¹¶æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„é€šç”¨æ¥å£ã€‚</span><br><span class="line">	æ­¤æ¨¡å¼å¯é¿å…å¤šä¸ªè°ƒç”¨è€…åˆ›å»ºå¯¹è±¡æ—¶åˆ¤æ–­åˆ›å»ºå“ªä¸ªå­ç±»çš„é‡å¤ä»£ç , ä¸”è‹¥å¤šä¸€ä¸ªå­ç±», è°ƒç”¨è€…æ— éœ€ä¿®æ”¹ä»£ç .</span><br><span class="line">	</span><br><span class="line">ç¤ºä¾‹: Spring ApplicationContext çš„ getBean æ–¹æ³•.</span><br></pre></td></tr></table></figure>

<h4 id="å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="å·¥å‚æ–¹æ³•æ¨¡å¼"></a>å·¥å‚æ–¹æ³•æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†ç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–å“ªä¸ªç±»ã€‚å·¥å‚æ–¹æ³•æŠŠå®ä¾‹åŒ–æ“ä½œæ¨è¿Ÿåˆ°å­ç±»ã€‚</span><br><span class="line">	æ­¤æ¨¡å¼è§£å†³äº†ç®€å•å·¥å‚æ¯å¢åŠ ä¸€ä¸ªå­ç±»éœ€è¦ä¿®æ”¹å·¥å‚ç±»çš„é—®é¢˜.</span><br><span class="line">	æ­¤æ¨¡å¼å­˜åœ¨é—®é¢˜, è‹¥æ–°å¢ä¸€ä¸ªå­ç±», éœ€åŒæ—¶æ–°å¢ä¸€ä¸ªå­ç±»å·¥å‚, ç³»ç»Ÿå¤æ‚æ€§æ›´é«˜.</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹: Calendar, NumberFormat</span><br></pre></td></tr></table></figure>

<h4 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	æä¾›ä¸€ä¸ªæ¥å£ï¼Œç”¨äºåˆ›å»º ç›¸å…³çš„å¯¹è±¡å®¶æ—.</span><br><span class="line">  åŒä¸Š, ç”±å­ç±»å·¥å‚å†³å®šåˆ›å»ºå“ªäº›å¯¹è±¡.</span><br><span class="line">	æ­¤æ¨¡å¼æ˜¯å·¥å‚æ–¹æ³•çš„å‡çº§ç‰ˆ, ä¸åŒä¹‹å¤„åœ¨äºå®ƒåŒæ—¶åˆ›å»ºå¤šä¸ªç§ç±»çš„å¯¹è±¡(å·¥å‚ç±»å…·æœ‰å¤šä¸ªæ–¹æ³•).</span><br><span class="line">	æ­¤æ¨¡å¼å°†ä¸€ä¸ªå¯¹è±¡å®¶æ—çš„æ–°å»ºé›†åˆåˆ°ä¸€ä¸ªå·¥å‚ç±»åˆ›å»ºç®¡ç†, è¿™äº›å¯¹è±¡å®¶æ—ç›¸äº’ä¹‹é—´ä¸€èˆ¬æœ‰å…³è”, åœ¨åˆ›å»ºæ—¶å°±å¯ä»¥å¤„ç†è¿™äº›å…³è”. ä¸”å¯¹äº 2 ä¸ªå­ç±»å·¥å‚, ä¸€èˆ¬å¯ä»¥æ— ç¼åˆ‡æ¢, ä½¿å¾—ä¿®æ”¹ä»£ç æä¸ºæ–¹ä¾¿(å³æ¢ä¸€ä¸ªå­ç±»å·¥å‚).</span><br><span class="line">	æ­¤æ¨¡å¼åœ¨æ–°å¢ä¸€ä¸ªå¯¹è±¡å®¶æ—çš„æˆå‘˜æ—¶éå¸¸éº»çƒ¦(å³æ‰€æœ‰å·¥å‚ç±»éœ€è¦æ–°å¢ä¸€ä¸ªæ–¹æ³•), ä½†å†æ–°å¢ä¸€ç±»å¯¹è±¡å®¶æ—æ—¶æ¯”è¾ƒç®€å•(å³æ–°å¢ä¸€ä¸ªå­ç±»å·¥å‚).</span><br></pre></td></tr></table></figure>



<h3 id="ç»“æ„å‹"><a href="#ç»“æ„å‹" class="headerlink" title="ç»“æ„å‹"></a>ç»“æ„å‹</h3><h4 id="é€‚é…å™¨æ¨¡å¼"><a href="#é€‚é…å™¨æ¨¡å¼" class="headerlink" title="é€‚é…å™¨æ¨¡å¼"></a>é€‚é…å™¨æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	æŠŠä¸€ä¸ªæ¥å£è½¬æ¢æˆå¦ä¸€ä¸ªç”¨æˆ·éœ€è¦çš„æ¥å£.</span><br><span class="line">	å®šä¹‰ä¸€ä¸ªç±», å®ç°ç”¨æˆ·éœ€è¦çš„æ¥å£, å¹¶èšåˆä¸€ä¸ªéœ€è¦è½¬æ¢çš„æ¥å£å¯¹è±¡, åœ¨é‡å†™çš„æ–¹æ³•(ç”¨æˆ·éœ€è¦çš„æ–¹æ³•)ä¸­è°ƒç”¨èšåˆçš„å¯¹è±¡çš„æ–¹æ³•, è‹¥éœ€è¦è¿”å›å€¼, ä¸”è¿”å›å€¼ç±»å‹ä¸ä¸€è‡´, åˆ™è¿˜éœ€è¦åœ¨æ–¹æ³•ä¸­å¤„ç†ä¸€ç•ª, ç„¶åè¿”å›. è¿™ä¸ªè¿‡ç¨‹å«åšé€‚é….è¿™ä¸ªç±»å«åšé€‚é…å™¨ç±».</span><br><span class="line">	ä½¿ç”¨æ­¤æ¨¡å¼å¯å¯¹ä¸€äº›è€æ—§æ¥å£é€‚é…å…¼å®¹.</span><br><span class="line">	</span><br><span class="line">ç¤ºä¾‹: java.util.Arrays#asList() å°†æ•°ç»„é€‚é…æˆ List, Spring MVCçš„ HandlerAdapter</span><br></pre></td></tr></table></figure>

<h4 id="è£…é¥°è€…æ¨¡å¼"><a href="#è£…é¥°è€…æ¨¡å¼" class="headerlink" title="è£…é¥°è€…æ¨¡å¼"></a>è£…é¥°è€…æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å°†ä¸€ä¸ªæˆ–å¤šä¸ªåŠŸèƒ½(æ–¹æ³•)åŠ¨æ€çš„æ–°å¢åˆ°ä¸€ä¸ªç±»ä¸­.</span><br><span class="line">	æŠŠéœ€è¦æ–°å¢åŠŸèƒ½ç±»ç§°ä¸º A,å®šä¹‰ä¸€ä¸ªç±»B,å®ç°Açš„ä¸Šå±‚æ¥å£, å¹¶èšåˆä¸€ä¸ªA çš„å®ä¾‹å¯¹è±¡, Bç±»å®ç°çš„æ¥å£ä¸­, å¯¹å…¶ä»–ä¸å…³å¿ƒçš„æ–¹æ³•ç›´æ¥è°ƒç”¨èšåˆçš„å¯¹è±¡çš„æ–¹æ³•. å¯¹äºå…³å¿ƒçš„æ–¹æ³•åˆ™å¯ä»¥åœ¨è°ƒç”¨å‰åè¿›è¡ŒåŠ æ–™å¤„ç†(å¦‚ä¸€ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªæ•°, å¯ä»¥åœ¨åŸæ¥çš„è¿”å›å€¼ä¸Šä¹˜ä»¥ 2), åŒæ—¶, Bç±»ä¹Ÿå¯ä»¥æ–°å¢ä¸€äº›å…¶ä»–æ–¹æ³•, è¿™äº›æ–¹æ³•å°±æ˜¯å¤šå‡ºçš„åŠŸèƒ½. Bç±»å°±æ˜¯è£…é¥°è€…ç±», Aå°±æ˜¯è¢«è£…é¥°ç±».</span><br><span class="line">	æ­¤æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯, è£…é¥°ç±»ä¹Ÿå¯ä»¥å½“åšè¢«è£…é¥°ç±», ç„¶åå†æ¥ä¸€å±‚è£…é¥°, å¯ä»¥æ— é™çš„è£…é¥°.</span><br><span class="line">	</span><br><span class="line">ç¤ºä¾‹: java IO æµ</span><br></pre></td></tr></table></figure>

<h4 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	æ§åˆ¶å…¶ä»–å¯¹è±¡çš„è®¿é—®(æ–¹æ³•çº§), å°†ä¸€äº›å‰ç½®æˆ–åç½®çš„å¤„ç†, é€šè¿‡ä»£ç†å¯¹è±¡æ³¨å…¥åˆ°ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•å‰å. é¢å‘åˆ‡é¢ç¼–ç¨‹.</span><br><span class="line"></span><br><span class="line">ç±»å‹:</span><br><span class="line">	é™æ€ä»£ç†: å®šä¹‰ä¸€ä¸ªä»£ç†ç±»å®ç°ç›®æ ‡å¯¹è±¡çš„ä¸Šå±‚æ¥å£, å¹¶èšåˆä¸€ä¸ªç›®æ ‡å¯¹è±¡, é‡å†™æ–¹æ³•æ—¶å°†å‰ç½®åç½®å¤„ç†åŠ ä¸Š.</span><br><span class="line">	åŠ¨æ€ä»£ç†: </span><br><span class="line">		JDK åŠ¨æ€ä»£ç†: éœ€è¦ç›®æ ‡å¯¹è±¡æœ‰ä¸Šå±‚æ¥å£(è‡ªç„¶æ¥å£å†…çš„æ–¹æ³•æ‰å¯ä»¥ä»£ç†) </span><br><span class="line">			ä½¿ç”¨java.lang.reflect.Proxy#getProxyClass</span><br><span class="line">		CGLIB åŠ¨æ€ä»£ç†: æ˜¯ä¸ªç±»å°±è¡Œ. å®ç°åŸç†æ˜¯ ASM æ¡†æ¶åŠ¨æ€ç”Ÿæˆç›®æ ‡å¯¹è±¡ç±»çš„å­ç±»å­—èŠ‚ç , ç„¶åé€šè¿‡åå°„ç”Ÿæˆä»£ç†å¯¹è±¡.</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹: Spring AOP</span><br></pre></td></tr></table></figure>

<h4 id="æ¡¥æ¥æ¨¡å¼"><a href="#æ¡¥æ¥æ¨¡å¼" class="headerlink" title="æ¡¥æ¥æ¨¡å¼"></a>æ¡¥æ¥æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å°†æŠ½è±¡ä¸å®ç°åˆ†ç¦»å¼€æ¥ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚</span><br><span class="line">	æ¡¥æ¥çš„å«ä¹‰æ˜¯, ä¸€ä¸ªæ¡¥, æ”¾åœ¨å“ªé‡Œéƒ½æœ‰æ¡¥çš„ 2 è¾¹, æ¡¥çš„ 2 è¾¹å¯ä»¥å˜åŒ–, ä½†æ¡¥å§‹ç»ˆä¸å˜. æ­¤å¤„, æ¡¥ä»£è¡¨ä¸€ä¸ªæ“ä½œ(å¦‚æ‰‹æœºä¸Šè¿è¡Œè½¯ä»¶), 2 è¾¹ä»£è¡¨ ä¸€ä¸ªæ“ä½œçš„ 2 ä¸ªç»´åº¦(å¦‚æ‰‹æœºå’Œè½¯ä»¶). åŒæ—¶, æ¡¥æ¥åçš„æ“ä½œä¹Ÿå¯ä»¥è§†ä¸ºä¸€ä¸ªç»´åº¦, ä¸å¦ä¸€ä¸ªç»´åº¦æ¡¥æ¥(å¦‚æ‰‹æœºä¸Šè¿è¡Œè½¯ä»¶å’Œäººè¿™ 2 ä¸ªç»´åº¦, å¯ä»¥è¿›è¡Œæ¡¥æ¥, ç»„æˆ 3 ç»´åº¦åµŒå¥—æ¡¥æ¥).</span><br><span class="line">	</span><br><span class="line">ç¤ºä¾‹: JDBC è·å–è¿æ¥, è·å–è¿æ¥æ˜¯ä¸€ä¸ªç»´åº¦, æ•°æ®åº“æ˜¯ä¸€ä¸ªç»´åº¦, æ•°æ®åº“æœ‰å¤šä¸ª, æ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªæ•°æ®åº“ç»´åº¦å˜åŒ–, å¦ä¸€ç»´åº¦ä¸å˜çš„æ¡¥æ¥æ¨¡å¼.</span><br></pre></td></tr></table></figure>

<h4 id="äº«å…ƒæ¨¡å¼"><a href="#äº«å…ƒæ¨¡å¼" class="headerlink" title="äº«å…ƒæ¨¡å¼"></a>äº«å…ƒæ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	åˆ©ç”¨å…±äº«çš„æ–¹å¼æ¥æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡ä¸€éƒ¨åˆ†å†…éƒ¨çŠ¶æ€æ˜¯ç›¸åŒçš„ã€‚</span><br><span class="line">	å¦‚å¸¸è§çš„ çº¿ç¨‹æ± , å¸¸é‡æ± ç­‰, ä½¿å¾—å¯¹è±¡çš„è·å–é€Ÿåº¦åŠ å¿«.</span><br><span class="line">	</span><br><span class="line">ç¤ºä¾‹: java.lang.Integer#valueOf() java.lang.Boolean#valueOf()</span><br></pre></td></tr></table></figure>

<h4 id="ç»„åˆæ¨¡å¼"><a href="#ç»„åˆæ¨¡å¼" class="headerlink" title="ç»„åˆæ¨¡å¼"></a>ç»„åˆæ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„æ¥è¡¨ç¤ºâ€œæ•´ä½“&#x2F;éƒ¨åˆ†â€å±‚æ¬¡å…³ç³»ï¼Œå…è®¸ç”¨æˆ·ä»¥ç›¸åŒçš„æ–¹å¼å¤„ç†å•ç‹¬å¯¹è±¡å’Œç»„åˆå¯¹è±¡ã€‚</span><br><span class="line">	ä¸€èˆ¬éœ€è¦éƒ¨åˆ†å’Œæ•´ä½“å…·æœ‰ä¸€å®šçš„ç›¸ä¼¼åº¦, æ‰èƒ½å¯¹å…¶è¿›è¡ŒæŠ½è±¡.</span><br><span class="line">	å¯¹éƒ¨åˆ†&#x2F;æ•´ä½“è¿›è¡ŒæŠ½è±¡, å¾—å‡ºä¸€ä¸ªå…¬å…±æŠ½è±¡ç±»æˆ–æ¥å£, å†å®ç°ç±»ä¸­æ ¹æ®å…·ä½“è§’è‰²åšä¸åŒå¤„ç†. </span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹:</span><br><span class="line">	javax.swing.JComponent#add(Component) </span><br><span class="line">  java.util.Map#putAll(Map)</span><br><span class="line">  java.util.List#addAll(Collection)</span><br><span class="line">  java.util.Set#addAll(Collection)</span><br></pre></td></tr></table></figure>

<h4 id="å¤–è§‚æ¨¡å¼"><a href="#å¤–è§‚æ¨¡å¼" class="headerlink" title="å¤–è§‚æ¨¡å¼"></a>å¤–è§‚æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œç”¨æ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£ï¼Œä»è€Œè®©å­ç³»ç»Ÿæ›´å®¹æ˜“ä½¿ç”¨.</span><br></pre></td></tr></table></figure>



<h3 id="è¡Œä¸ºå‹"><a href="#è¡Œä¸ºå‹" class="headerlink" title="è¡Œä¸ºå‹"></a>è¡Œä¸ºå‹</h3><h4 id="èŒè´£é“¾-è´£ä»»é“¾-æ¨¡å¼"><a href="#èŒè´£é“¾-è´£ä»»é“¾-æ¨¡å¼" class="headerlink" title="èŒè´£é“¾(è´£ä»»é“¾)æ¨¡å¼"></a>èŒè´£é“¾(è´£ä»»é“¾)æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œå°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾å‘é€è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢, ä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚</span><br><span class="line">	</span><br><span class="line">ç¤ºä¾‹:</span><br><span class="line">	javax.servlet.Filter#doFilter()</span><br><span class="line">	netty çš„ Handler Chain</span><br></pre></td></tr></table></figure>

<h4 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å®šä¹‰å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜æ—¶ï¼Œå®ƒçš„æ‰€æœ‰ä¾èµ–éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶ä¸”è‡ªåŠ¨æ›´æ–°çŠ¶æ€ã€‚</span><br><span class="line">	ä¸»é¢˜ï¼ˆSubjectï¼‰æ˜¯è¢«è§‚å¯Ÿçš„å¯¹è±¡ï¼Œè€Œå…¶æ‰€æœ‰ä¾èµ–è€…ï¼ˆObserverï¼‰ç§°ä¸ºè§‚å¯Ÿè€…ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹: </span><br><span class="line">	swing çš„äº‹ä»¶ç›‘å¬(æŒ‰é’®äº‹ä»¶, é¼ æ ‡äº‹ä»¶)</span><br><span class="line">	JS çš„ äº‹ä»¶ç›‘å¬</span><br></pre></td></tr></table></figure>

<h4 id="çŠ¶æ€æ¨¡å¼"><a href="#çŠ¶æ€æ¨¡å¼" class="headerlink" title="çŠ¶æ€æ¨¡å¼"></a>çŠ¶æ€æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥å¥½åƒä¿®æ”¹äº†å®ƒæ‰€å±çš„ç±»ã€‚</span><br><span class="line">	çŠ¶æ€æ¨¡å¼ä¸»è¦æ˜¯ç”¨æ¥è§£å†³çŠ¶æ€è½¬ç§»çš„é—®é¢˜ï¼Œå½“çŠ¶æ€å‘ç”Ÿè½¬ç§»äº†ï¼Œé‚£ä¹ˆ Context å¯¹è±¡å°±ä¼šæ”¹å˜å®ƒçš„è¡Œä¸º.</span><br></pre></td></tr></table></figure>

<h4 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œå°è£…æ¯ä¸ªç®—æ³•ï¼Œå¹¶ä½¿å®ƒä»¬å¯ä»¥äº’æ¢ã€‚</span><br><span class="line">	ç­–ç•¥æ¨¡å¼å¯ä»¥è®©ç®—æ³•ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·ç«¯ã€‚</span><br><span class="line">	ç­–ç•¥æ¨¡å¼ä¸»è¦æ˜¯ç”¨æ¥å°è£…ä¸€ç»„å¯ä»¥äº’ç›¸æ›¿ä»£çš„ç®—æ³•æ—ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€åœ°å»æ›¿æ¢ Context ä½¿ç”¨çš„ç®—æ³•.</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹: java.util.Comparator#compare() javax.servlet.http.HttpServlet</span><br></pre></td></tr></table></figure>

<h4 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼" class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"></a>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å®šä¹‰ç®—æ³•æ¡†æ¶ï¼Œå¹¶å°†ä¸€äº›æ­¥éª¤çš„å®ç°å»¶è¿Ÿåˆ°å­ç±»ã€‚</span><br><span class="line">	é€šè¿‡æ¨¡æ¿æ–¹æ³•ï¼Œå­ç±»å¯ä»¥é‡æ–°å®šä¹‰ç®—æ³•çš„æŸäº›æ­¥éª¤ï¼Œè€Œä¸ç”¨æ”¹å˜ç®—æ³•çš„ç»“æ„ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹: java.util.Collections#sort()</span><br></pre></td></tr></table></figure>

<h4 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å°†ä¸€ä¸ªå¯¹è±¡(å‘½ä»¤æ¥æ”¶è€…)çš„æ¯ä¸ªæ“ä½œæ‹†åˆ†åˆ°æ¯ä¸€ä¸ªå‘½ä»¤ç±»ä¸­, å†ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ç®¡ç†ç±»æ¥ç®¡ç†è¿™äº›å‘½ä»¤. ä½¿å¾—å‘½ä»¤å¯ä»¥æ”¾å…¥é˜Ÿåˆ—ä¸­æœ‰åºæ‰§è¡Œ, ä¸”å¯ä»¥ç»Ÿä¸€è®°å½•å‘½ä»¤çš„æ“ä½œæ—¥å¿—, è¿˜å¯ä»¥æ”¯æŒæ’¤é”€æ“ä½œ(æ¯ä¸ªå‘½ä»¤éƒ½å®ç°å¯¹åº”çš„æ’¤é”€å³å¯).</span><br><span class="line">	æ­¤æ¨¡å¼çš„å¥½å¤„æ˜¯, è‹¥å°†å‘½ä»¤æŠ½è±¡ä¸ºå‡ ä¸ªæ ‡å‡†çš„å‘½ä»¤(å¦‚å¼€,å…³), ç„¶åç®¡ç†å¤šä¸ªå‘½ä»¤æ¥æ”¶è€…(å¦‚ç¯,ç”µè§†æœº,ç©ºè°ƒ)çš„æ“ä½œ, å¯ä½¿æ–°å¢å‘½ä»¤æ¥æ”¶è€…å˜å¾—ç®€å•, å³æ‰©å±•æ€§å¥½.</span><br><span class="line">	</span><br><span class="line">	åˆç§°ä¸‡èƒ½é¥æ§å™¨.</span><br></pre></td></tr></table></figure>

<h4 id="ä¸­ä»‹æ¨¡å¼"><a href="#ä¸­ä»‹æ¨¡å¼" class="headerlink" title="ä¸­ä»‹æ¨¡å¼"></a>ä¸­ä»‹æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	é›†ä¸­ç›¸å…³å¯¹è±¡ä¹‹é—´å¤æ‚çš„æ²Ÿé€šå’Œæ§åˆ¶æ–¹å¼ã€‚é™ä½å­ç³»ç»Ÿä¹‹é—´çš„è€¦åˆ.</span><br><span class="line">	ç±»ä¼¼ä¸€ä¸ªæ¶ˆæ¯æ”¶å‘ä¸­å¿ƒ, è´Ÿè´£å­—ç³»ç»Ÿçš„æ¶ˆæ¯ä¸­è½¬, ä½¿å¾—å­ç³»ç»Ÿä¹‹é—´å¯ä»¥è¿›è¡Œä¸€å®šçš„äº¤äº’.</span><br><span class="line">	</span><br><span class="line">ç¤ºä¾‹: çº¿ç¨‹æ± ç®¡ç†è€…çº¿ç¨‹å’Œè¦æ‰§è¡Œçš„ä»»åŠ¡.</span><br></pre></td></tr></table></figure>

<h4 id="å¤‡å¿˜å½•æ¨¡å¼"><a href="#å¤‡å¿˜å½•æ¨¡å¼" class="headerlink" title="å¤‡å¿˜å½•æ¨¡å¼"></a>å¤‡å¿˜å½•æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	åœ¨ä¸è¿åå°è£…çš„æƒ…å†µä¸‹è·å¾—å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œä»è€Œåœ¨éœ€è¦æ—¶å¯ä»¥å°†å¯¹è±¡æ¢å¤åˆ°æœ€åˆçŠ¶æ€ã€‚</span><br><span class="line">	å¦‚å¯¹æ¸¸æˆçš„å½“å‰çŠ¶æ€è¿›è¡Œä¸€ä¸ªä¿å­˜, ç„¶ååœ¨åç»­æ¸¸æˆä¸­æ­»äº¡åå¯ä»¥è¯»å–è¿™ä¸ªçŠ¶æ€é‡æ–°å¼€å§‹.</span><br></pre></td></tr></table></figure>

<h4 id="è®¿é—®è€…æ¨¡å¼"><a href="#è®¿é—®è€…æ¨¡å¼" class="headerlink" title="è®¿é—®è€…æ¨¡å¼"></a>è®¿é—®è€…æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åŸç†: </span><br><span class="line">	ä¸ºä¸€ä¸ªå¯¹è±¡ç»“æ„ï¼ˆæ¯”å¦‚ç»„åˆç»“æ„ï¼‰å¢åŠ æ–°èƒ½åŠ›ã€‚</span><br><span class="line">	ä½¿ç”¨è®¿é—®è€…æ¨¡å¼å¯å®ç°é‡è½½çš„åŠ¨æ€ç»‘å®š(å³ä¼ªåŒåˆ†æ´¾), æ•ˆæœä¸é‡è½½æ–¹æ³•å†…ä½¿ç”¨ instanceof æ˜¯ä¸€æ ·çš„, ä½†ä½¿ç”¨è®¿é—®è€…æ¨¡å¼, å¯æ‰©å±•æ€§æ›´å¥½.</span><br></pre></td></tr></table></figure>

<h4 id="è¿­ä»£å™¨æ¨¡å¼"><a href="#è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="è¿­ä»£å™¨æ¨¡å¼"></a>è¿­ä»£å™¨æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	æä¾›ä¸€ç§é¡ºåºè®¿é—®èšåˆå¯¹è±¡å…ƒç´ çš„æ–¹æ³•ï¼Œå¹¶ä¸”ä¸æš´éœ²èšåˆå¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹: java.util.Iterator</span><br></pre></td></tr></table></figure>

<h4 id="è§£é‡Šå™¨æ¨¡å¼"><a href="#è§£é‡Šå™¨æ¨¡å¼" class="headerlink" title="è§£é‡Šå™¨æ¨¡å¼"></a>è§£é‡Šå™¨æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	ä¸ºè¯­è¨€åˆ›å»ºè§£é‡Šå™¨ï¼Œé€šå¸¸ç”±è¯­è¨€çš„è¯­æ³•å’Œè¯­æ³•åˆ†ææ¥å®šä¹‰ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹: EL è¡¨è¾¾å¼, Freemakeræ¨¡æ¿</span><br></pre></td></tr></table></figure>

<h4 id="ç©ºå¯¹è±¡æ¨¡å¼"><a href="#ç©ºå¯¹è±¡æ¨¡å¼" class="headerlink" title="ç©ºå¯¹è±¡æ¨¡å¼"></a>ç©ºå¯¹è±¡æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	ä½¿ç”¨ä»€ä¹ˆéƒ½ä¸åšçš„ç©ºå¯¹è±¡æ¥ä»£æ›¿ NULL, é¿å…ç©ºå¯¹è±¡åˆ¤æ–­, é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸.</span><br></pre></td></tr></table></figure>



<h2 id="é«˜å¹¶å‘"><a href="#é«˜å¹¶å‘" class="headerlink" title="é«˜å¹¶å‘"></a>é«˜å¹¶å‘</h2><h3 id="Redis-ç¼“å­˜"><a href="#Redis-ç¼“å­˜" class="headerlink" title="Redis ç¼“å­˜"></a>Redis ç¼“å­˜</h3><h4 id="ç¼“å­˜ç©¿é€-æ”»å‡»å‹"><a href="#ç¼“å­˜ç©¿é€-æ”»å‡»å‹" class="headerlink" title="ç¼“å­˜ç©¿é€(æ”»å‡»å‹)"></a>ç¼“å­˜ç©¿é€(æ”»å‡»å‹)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å«ä¹‰:</span><br><span class="line">	å¯¹äºä¸€ä¸ªä¸å­˜åœ¨çš„ key è¿›è¡Œè®¿é—®, ä¼šå¯¼è‡´æ•°æ®åº“ä¸åœåœ°æŸ¥è¯¢è¿™ä¸ª key è¿›è¡Œç¼“å­˜.</span><br><span class="line">	</span><br><span class="line">è§£å†³æ–¹æ¡ˆ:</span><br><span class="line">	1.ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨, ä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ä¼šè¢«è¿‡æ»¤.</span><br><span class="line">	2.æŸ¥è¯¢åç¼“å­˜ä¸€ä¸ªç©ºç»“æœ, ä½†å¾ˆå¿«è¶…æ—¶.(æœ‰ç¼ºç‚¹, ä½†ç®€å•)</span><br></pre></td></tr></table></figure>

<h4 id="ç¼“å­˜é›ªå´©"><a href="#ç¼“å­˜é›ªå´©" class="headerlink" title="ç¼“å­˜é›ªå´©"></a>ç¼“å­˜é›ªå´©</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å«ä¹‰:</span><br><span class="line">	ç¼“å­˜é›ªå´©æ˜¯æŒ‡åœ¨æˆ‘ä»¬è®¾ç½®ç¼“å­˜æ—¶é‡‡ç”¨äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œå¯¼è‡´ç¼“å­˜åœ¨æŸä¸€æ—¶åˆ»åŒæ—¶å¤±æ•ˆï¼Œè¯·æ±‚å…¨éƒ¨è½¬å‘åˆ°DBï¼ŒDBç¬æ—¶å‹åŠ›è¿‡é‡é›ªå´©ã€‚</span><br><span class="line">	</span><br><span class="line">è§£å†³æ–¹æ¡ˆ:</span><br><span class="line">	1.è®¾ç½®è¶…æ—¶æ—¶, åœ¨åŸæœ‰çš„å¤±æ•ˆæ—¶é—´åŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªéšæœºå€¼ï¼Œæ¯”å¦‚1-5åˆ†é’Ÿéšæœº</span><br><span class="line">	2.åŠ é”æˆ–è€…é˜Ÿåˆ—çš„æ–¹å¼ä¿è¯ç¼“å­˜çš„å•çº¿ ç¨‹ï¼ˆè¿›ç¨‹ï¼‰, é¿å…å¤§é‡è¯·æ±‚æ‰“åˆ°æ•°æ®åº“.</span><br></pre></td></tr></table></figure>

<h4 id="ç¼“å­˜å‡»ç©¿"><a href="#ç¼“å­˜å‡»ç©¿" class="headerlink" title="ç¼“å­˜å‡»ç©¿"></a>ç¼“å­˜å‡»ç©¿</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å«ä¹‰:</span><br><span class="line">	å•ä¸€çƒ­ç‚¹ key å¤±æ•ˆæ—¶å¯¼è‡´å¤§é‡è¯·æ±‚æ‰“åˆ°æ•°æ®åº“ã€‚</span><br><span class="line"></span><br><span class="line">è§£å†³æ–¹æ¡ˆ:</span><br><span class="line">	1.åˆ†å¸ƒå¼äº’æ–¥é”(redis,zookper)</span><br><span class="line">	2.æ·»åŠ è¶…æ—¶å­—æ®µè®°å½•è¶…æ—¶(æ¯”å®é™…è¶…æ—¶å°ä¸€äº›), æ¯æ¬¡è·å–æ•°æ®æ ¹æ®å­—æ®µåˆ¤æ–­æ˜¯å¦è¶…æ—¶, è‹¥æ˜¯, åˆ™é©¬ä¸Šå»¶é•¿è¶…æ—¶å­—æ®µ, ç„¶ååŠ è½½æ•°æ®åº“é‡æ–°ç¼“å­˜</span><br><span class="line">	3.redisä¸è®¾ç½®è¿‡æœŸ, é€šè¿‡æ·»åŠ è¶…æ—¶å­—æ®µåˆ¤æ–­, è¶…æ—¶åˆ™ä»£ç å¼‚æ­¥è·‘ä¸€ä¸ªé‡æ–°ç¼“å­˜çš„ä»»åŠ¡(è¿™é‡Œä»£ç éœ€è¦å…ˆæœ¬åœ°åŠ é”, å†åŠ åˆ†å¸ƒå¼é”).</span><br></pre></td></tr></table></figure>



<h3 id="RabbitMQ"><a href="#RabbitMQ" class="headerlink" title="RabbitMQ"></a>RabbitMQ</h3><blockquote>
<p>è§£è€¦, å¼‚æ­¥, å‰Šå³°</p>
</blockquote>
<h4 id="è§£è€¦"><a href="#è§£è€¦" class="headerlink" title="è§£è€¦"></a>è§£è€¦</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å®šä¹‰:</span><br><span class="line">	ä¸ºé¢å‘æœåŠ¡çš„æ¶æ„ï¼ˆSOAï¼‰æä¾›åŸºæœ¬çš„æœ€ç»ˆä¸€è‡´æ€§å®ç°. å³å°† 2 ä¸ªç³»ç»Ÿçš„äº¤äº’é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—ä¸­è½¬, ä»¥é˜²æ­¢æŸä¸ªç³»ç»Ÿä¸´æ—¶æŒ‚äº†å¯¼è‡´è°ƒç”¨å¤±è´¥.</span><br><span class="line">ç¤ºä¾‹: ä¸‹å•ç³»ç»Ÿè°ƒç”¨åº“å­˜ç³»ç»Ÿ, è‹¥å½“æ—¶åº“å­˜ç³»ç»Ÿæ­£å¥½æŒ‚äº†, åˆ™å¯¼è‡´ä¸‹å•å¤±è´¥. æ­¤æ—¶å°†è¯·æ±‚æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­, åº“å­˜ç³»ç»Ÿè¯»å–æ¶ˆæ¯è¿›è¡Œå¤„ç†, è‹¥å½“æ—¶åº“å­˜æŒ‚äº†ä¹Ÿæ²¡å…³ç³», å¤„ç†å¤±è´¥ä¹Ÿæ²¡å…³ç³»(å¯é‡è¯•, ä¸”é‡è¯•ä»£ç æ¯”è¾ƒç®€å•).</span><br></pre></td></tr></table></figure>

<h4 id="å¼‚æ­¥"><a href="#å¼‚æ­¥" class="headerlink" title="å¼‚æ­¥"></a>å¼‚æ­¥</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å®šä¹‰:</span><br><span class="line">	å¯¹äºæŸäº›ä¸è¦æ±‚è¿”å›å€¼çš„è€—æ—¶æ“ä½œ, å¯å¼‚æ­¥å¤„ç†.</span><br><span class="line">ç¤ºä¾‹:</span><br><span class="line">	ç”¨æˆ·ä¸‹å•å, éœ€å‘é€å¤šä¸ªä¸‹å•æé†’(å¾®ä¿¡é€šçŸ¥, çŸ­ä¿¡é€šçŸ¥, é‚®ä»¶é€šçŸ¥), æ¯ä¸ªæ“ä½œéƒ½æ¯”è¾ƒè€—æ—¶, å¯è€ƒè™‘å°†å…¶æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—åç›´æ¥è¿”å›, ç”±å¦ä¸€æ®µä»£ç è´Ÿè´£è¯»å–æ¶ˆæ¯å‘é€é€šçŸ¥.</span><br></pre></td></tr></table></figure>

<h4 id="å‰Šå³°"><a href="#å‰Šå³°" class="headerlink" title="å‰Šå³°"></a>å‰Šå³°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å®šä¹‰:</span><br><span class="line">	å°†è¯·æ±‚é«˜å³°æ‰“å¹³, ä½¿å¾—ç³»ç»Ÿå¯ä»¥å¤„ç†è¿‡æ¥.</span><br><span class="line">ç¤ºä¾‹:</span><br><span class="line">	æŸæ¬¡ç§’æ€ 1 åˆ†é’Ÿè¿‡æ¥ 1 ä¸‡è¯·æ±‚, è€Œç³»ç»Ÿä¸€åˆ†é’Ÿå¤§æ¦‚åªèƒ½å¤„ç† 1åƒ è¯·æ±‚, ç³»ç»Ÿè¦å¤„ç†å®Œè¿™äº›è¯·æ±‚ç†è®ºéœ€è¦ 10 åˆ†é’Ÿ, ä½†å¦‚æœä¸åšå¤„ç†, è¯·æ±‚ç¬é—´æ‰“è¿‡æ¥, ç³»ç»Ÿç›´æ¥å¡æ­», å¡ä½æ—¶å€™ä¸€åˆ†é’Ÿå¯èƒ½åªèƒ½å¤„ç† 100 è¯·æ±‚. æ­¤æ—¶éœ€è¦å°†æ‰€æœ‰è¯·æ±‚éƒ½æ‰“åˆ°é˜Ÿåˆ—é‡Œé¢, ç³»ç»Ÿå†æ…¢æ…¢ä»é˜Ÿåˆ—ä¸­è¯»å–å¤„ç†.</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://gudqs7.github.io/2020/05/20/Go%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89method-%E5%92%8C-interface/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="gudqs7">
      <meta itemprop="description" content="å¿ƒç´¯æ²¡é’±èººå°¸ä¸­">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gudqs7's note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/20/Go%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89method-%E5%92%8C-interface/" class="post-title-link" itemprop="url">Goå­¦ä¹ ç¬”è®° (ä¸‰) : method å’Œ interface</a>
        </h2>

        <div class="post-meta">
			
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-05-20 09:24:19" itemprop="dateCreated datePublished" datetime="2020-05-20T09:24:19+08:00">2020-05-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-01-22 13:39:17" itemprop="dateModified" datetime="2021-01-22T13:39:17+08:00">2021-01-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2020/05/20/Go%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89method-%E5%92%8C-interface/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/20/Goå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰method-å’Œ-interface/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ä¸ºäº†é¢å‘å¯¹è±¡-é¦–å…ˆä½ å¾—æœ‰ä¸ªå¯¹è±¡"><a href="#ä¸ºäº†é¢å‘å¯¹è±¡-é¦–å…ˆä½ å¾—æœ‰ä¸ªå¯¹è±¡" class="headerlink" title="ä¸ºäº†é¢å‘å¯¹è±¡(é¦–å…ˆä½ å¾—æœ‰ä¸ªå¯¹è±¡)"></a>ä¸ºäº†é¢å‘å¯¹è±¡(é¦–å…ˆä½ å¾—æœ‰ä¸ªå¯¹è±¡)</h1><h2 id="method"><a href="#method" class="headerlink" title="method"></a>method</h2><h3 id="å®šä¹‰ä¸€ä¸ªmethod"><a href="#å®šä¹‰ä¸€ä¸ªmethod" class="headerlink" title="å®šä¹‰ä¸€ä¸ªmethod"></a>å®šä¹‰ä¸€ä¸ªmethod</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	age <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span> <span class="title">growup</span><span class="params">()</span></span> &#123;  <span class="comment">//æƒ³æƒ³å»æ‰ * ä¼šæ€æ ·?</span></span><br><span class="line">	p.age += <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span> <span class="title">getName</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> p.name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span> <span class="title">setName</span><span class="params">(name <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">	p.name = name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	p := Person&#123;<span class="string">"wq"</span>,<span class="number">10</span>&#125;</span><br><span class="line">	<span class="built_in">println</span>(p, p.name, p.age)</span><br><span class="line">	p.growup()</span><br><span class="line">	<span class="built_in">println</span>(p.age)</span><br><span class="line">	p.setName(<span class="string">"gudqs"</span>)</span><br><span class="line">	<span class="built_in">println</span>(p.name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨ func ( æ–¹æ³•å±äºè€… æ–¹æ³•å±äºè€…ç±»å‹) æ–¹æ³•å (æ–¹æ³•å‚æ•°åˆ—è¡¨) (è¿”å›å‚æ•°åˆ—è¡¨) {..}å®šä¹‰ä¸€ä¸ªæ–¹æ³•<br>ä¼ é€’ æŒ‡é’ˆç±»å‹ ä½¿ç»“æ„ä½“å€¼æ”¹å˜<br>æ‰€æœ‰è‡ªå®šä¹‰ç±»å‹, å’Œä¸€äº›å†…ç½®ç±»å‹å‡å¯ä½œä¸ºæ–¹æ³•å±äºè€…,å³å¯æ‹¥æœ‰æ–¹æ³•</p>
</blockquote>
<h3 id="æ–¹æ³•ç»§æ‰¿"><a href="#æ–¹æ³•ç»§æ‰¿" class="headerlink" title="æ–¹æ³•ç»§æ‰¿"></a>æ–¹æ³•ç»§æ‰¿</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	age <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Person</span><br><span class="line">	no <span class="keyword">int</span></span><br><span class="line">	phone <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span> <span class="title">sayhi</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="built_in">println</span>(p.name,p.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	s := Student&#123;Person&#123;<span class="string">"wq"</span>,<span class="number">20</span>&#125;,<span class="number">1</span>,<span class="string">"110"</span>&#125;</span><br><span class="line">	s.sayhi()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åˆ©ç”¨åŒ¿åå­—æ®µå¯ç»§æ‰¿æ”¹å­—æ®µç±»å‹çš„æ–¹æ³• åŒæ ·çš„å¯ä»¥ç›´æ¥è°ƒç”¨</p>
</blockquote>
<h3 id="æ–¹æ³•é‡å†™"><a href="#æ–¹æ³•é‡å†™" class="headerlink" title="æ–¹æ³•é‡å†™"></a>æ–¹æ³•é‡å†™</h3><blockquote>
<p>åœ¨ä¹‹å‰ä»£ç  åæ·»åŠ ä¸€ä¸ª Student çš„sayhiæ–¹æ³• , å®ç°é‡å†™</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s Student)</span> <span class="title">sayhi</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="built_in">println</span>(s.name,s.no,s.phone,s.age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æŸ¥çœ‹æ‰§è¡Œç»“æœ, å¦‚æœå­¦è¿‡java ,ä½ ä¸€å®šå·²ç»éœ²å‡ºäº†çº¯æ´çš„ç¬‘å®¹ â€‚ â€‚   : ) </p>
</blockquote>
<h3 id="TIP"><a href="#TIP" class="headerlink" title="TIP"></a>TIP</h3><blockquote>
<p>åœ¨æ–¹æ³•å®šä¹‰æ—¶ , æ–¹æ³•å±äºè€…ç±»å‹ ä¸ºä¸€ä¸ªæŒ‡é’ˆæ—¶, æ–¹æ³•ç§æ“ä½œ æŒ‡é’ˆä¸éœ€è¦ åŠ  *ä¹Ÿå¯, goä¼šè‡ªåŠ¨åŠ <br>ä¸èƒ½ä¸º int , []int ç­‰ç±»å‹ æ·»åŠ æ–¹æ³•, ä½†é€šè¿‡è‡ªå®šä¹‰ç±»å‹ ,å¦‚ type Int int , åˆ™åˆå¯ä»¥æ·»åŠ æ–¹æ³• ,å› æ­¤è‡ªå®šä¹‰ç±»å‹å…·æœ‰é«˜æ‰©å±•æ€§å•Š</p>
</blockquote>
<h2 id="interface-æ¥å£"><a href="#interface-æ¥å£" class="headerlink" title="interface (æ¥å£)"></a>interface (æ¥å£)</h2><h3 id="å®šä¹‰æ¥å£"><a href="#å®šä¹‰æ¥å£" class="headerlink" title="å®šä¹‰æ¥å£"></a>å®šä¹‰æ¥å£</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> UserDao <span class="keyword">interface</span> &#123;</span><br><span class="line">	add()</span><br><span class="line">	update()</span><br><span class="line">	remove()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨æ¥å£"><a href="#ä½¿ç”¨æ¥å£" class="headerlink" title="ä½¿ç”¨æ¥å£"></a>ä½¿ç”¨æ¥å£</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> f <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> UserDao <span class="keyword">interface</span> &#123;</span><br><span class="line">	add(u User)</span><br><span class="line">	update(u User)</span><br><span class="line">	remove(u User)</span><br><span class="line">	findAll() []User</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	id <span class="keyword">int</span></span><br><span class="line">&#125;	</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> UserDaoMysqlImpl <span class="keyword">struct</span> &#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> UserDaoOracleImpl <span class="keyword">struct</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dao UserDaoMysqlImpl)</span> <span class="title">add</span><span class="params">(u User)</span></span> &#123;</span><br><span class="line">	f.Println(<span class="string">"add user[mysql] :"</span>,u)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dao UserDaoMysqlImpl)</span> <span class="title">update</span><span class="params">(u User)</span></span> &#123;</span><br><span class="line">	f.Println(<span class="string">"update user[mysql] :"</span>,u)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dao UserDaoMysqlImpl)</span> <span class="title">remove</span><span class="params">(u User)</span></span> &#123;</span><br><span class="line">	f.Println(<span class="string">"remove user[mysql] :"</span>,u.id)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dao UserDaoOracleImpl)</span> <span class="title">add</span><span class="params">(u User)</span></span> &#123;</span><br><span class="line">	f.Println(<span class="string">"add user[oralce] :"</span>,u)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dao UserDaoOracleImpl)</span> <span class="title">update</span><span class="params">(u User)</span></span> &#123;</span><br><span class="line">	f.Println(<span class="string">"update user[oracle] :"</span>,u)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dao UserDaoOracleImpl)</span> <span class="title">remove</span><span class="params">(u User)</span></span> &#123;</span><br><span class="line">	f.Println(<span class="string">"remove user[oracle] :"</span>,u.id)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dao UserDaoMysqlImpl)</span> <span class="title">findAll</span><span class="params">()</span> []<span class="title">User</span></span> &#123;</span><br><span class="line">	users := <span class="built_in">make</span>([]User,<span class="number">3</span>)</span><br><span class="line">	users[<span class="number">0</span>], users[<span class="number">1</span>], users[<span class="number">2</span>] = User&#123;<span class="string">"wq"</span>,<span class="number">1</span>&#125;, User&#123;<span class="string">"aa"</span>,<span class="number">2</span>&#125;, User&#123;<span class="string">"gudqs"</span>,<span class="number">3</span>&#125;</span><br><span class="line">	<span class="keyword">return</span> users;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dao UserDaoOracleImpl)</span> <span class="title">findAll</span><span class="params">()</span> []<span class="title">User</span></span> &#123;</span><br><span class="line">	users := <span class="built_in">make</span>([]User,<span class="number">3</span>)</span><br><span class="line">	users[<span class="number">0</span>] = User&#123;<span class="string">"gg"</span>,<span class="number">007</span>&#125;</span><br><span class="line">	<span class="keyword">return</span> users</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> dao UserDao</span><br><span class="line">	u := User&#123;<span class="string">"qq"</span>,<span class="number">88</span>&#125;</span><br><span class="line">	dao =UserDaoOracleImpl&#123;&#125;</span><br><span class="line">	dao.add(u)</span><br><span class="line">	dao.update(u)</span><br><span class="line">	dao.remove(u)</span><br><span class="line">	<span class="keyword">for</span> i,u := <span class="keyword">range</span> dao.findAll() &#123;</span><br><span class="line">		f.Println(i,u)</span><br><span class="line">	&#125;</span><br><span class="line">	dao =UserDaoMysqlImpl&#123;&#125;</span><br><span class="line">	dao.add(u)</span><br><span class="line">	dao.update(u)</span><br><span class="line">	dao.remove(u)</span><br><span class="line">	<span class="keyword">for</span> j,u2 := <span class="keyword">range</span> dao.findAll() &#123;</span><br><span class="line">		f.Println(<span class="string">"mysql:"</span>,j,u2)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸€ä¸ªä¸œä¸œ å…·æœ‰ æŸä¸ªæ¥å£çš„æ‰€æœ‰æ–¹æ³•, é‚£ä¹ˆè¿™ä¸ªä¸œä¸œ å¯ä»¥èµ‹å€¼ç»™è¿™ä¸ªæ¥å£ç±»å‹çš„å˜é‡<br>è¿™ä¸ªç‰¹æ€§è¯´ç™½äº†å°±æ˜¯ç±»ä¼¼å¤šæ€</p>
</blockquote>
<h3 id="æ¥å£ç±»å‹-ä½œä¸ºå‡½æ•°-æ–¹æ³•-å‚æ•°"><a href="#æ¥å£ç±»å‹-ä½œä¸ºå‡½æ•°-æ–¹æ³•-å‚æ•°" class="headerlink" title="æ¥å£ç±»å‹ ä½œä¸ºå‡½æ•°(æ–¹æ³•) å‚æ•°"></a>æ¥å£ç±»å‹ ä½œä¸ºå‡½æ•°(æ–¹æ³•) å‚æ•°</h3><p>åœ¨ä¸Šé¢ä»£ç åŸºç¡€ä¸Šæ·»åŠ  å¦‚ä¸‹ä»£ç :</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> UserServiceImpl <span class="keyword">struct</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(service UserServiceImpl)</span> <span class="title">add</span><span class="params">(u User, dao UserDao)</span></span> &#123;</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">"service do :"</span>)</span><br><span class="line">	dao.add(u)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	service := UserServiceImpl&#123;&#125;</span><br><span class="line">	u := User&#123;<span class="string">"wq"</span>,<span class="number">20</span>&#125;</span><br><span class="line">	dao := UserDaoMysqlImpl&#123;&#125;</span><br><span class="line">	service.add(u,dao)</span><br><span class="line">	dao =UserDaoOracleImpl&#123;&#125;</span><br><span class="line">	service.add(u,dao)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ ç±»å‹UserServiceImplå’Œå¯¹åº”çš„addæ–¹æ³•, ä½¿ç”¨UserDaoä½œä¸ºå‚æ•°, ç„¶åä¿®æ”¹main()</p>
<blockquote>
<p> æ–¹æ³•å‚æ•°ä¸ºæ¥å£ç±»å‹, å¥½å¤„æ˜¯ å¯ä»¥æ¥å—æ›´å¤šçš„ç±»å‹ , åªè¦é‚£ç§ç±»å‹æœ‰ è¿™ä¸ªæ¥å£çš„æ‰€æœ‰æ–¹æ³•</p>
</blockquote>
<h3 id="ç©ºinterface"><a href="#ç©ºinterface" class="headerlink" title="ç©ºinterface"></a>ç©ºinterface</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> a <span class="keyword">interface</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> i <span class="keyword">int</span> = <span class="number">99</span></span><br><span class="line">	<span class="keyword">var</span> str <span class="keyword">string</span> = <span class="string">"wq"</span></span><br><span class="line">	a = i</span><br><span class="line">	<span class="built_in">println</span>(a)</span><br><span class="line">	a = str</span><br><span class="line">	<span class="built_in">println</span>(str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™æ · aç±»å‹ å°±å¯ä»¥æ¥å—ä»»ä½•ç±»å‹äº†, å°±åƒ java çš„Objectç±»å‹ä¸€æ · !</p>
</blockquote>
<h3 id="åµŒå¥—-interface"><a href="#åµŒå¥—-interface" class="headerlink" title="åµŒå¥— interface"></a>åµŒå¥— interface</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> a <span class="keyword">interface</span> &#123;</span><br><span class="line">	swap()</span><br><span class="line">	<span class="built_in">len</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> b <span class="keyword">interface</span> &#123;</span><br><span class="line">	a</span><br><span class="line">	value()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç„¶åbå°±æœ‰äº† 3ä¸ªæ–¹æ³• , å¯¹çš„, æƒ³åŒ¿åå­—æ®µç»§æ‰¿ä¸€æ ·</p>
</blockquote>
<h3 id="Comma-okæ–­è¨€"><a href="#Comma-okæ–­è¨€" class="headerlink" title="Comma-okæ–­è¨€"></a>Comma-okæ–­è¨€</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> a <span class="keyword">interface</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> b <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	list := <span class="built_in">make</span>([]a,<span class="number">3</span>)</span><br><span class="line">	a[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">	a[<span class="number">1</span>] = <span class="string">"wq"</span></span><br><span class="line">	a[<span class="number">2</span>] = b&#123;<span class="string">"wq"</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> _,element := <span class="keyword">range</span> list &#123;</span><br><span class="line">		ok,val := element.(b)</span><br><span class="line">		<span class="keyword">if</span> ok &#123;</span><br><span class="line">			<span class="built_in">println</span>(<span class="string">" b is a a"</span>)</span><br><span class="line">		&#125;</span><br><span class="line">		ok,val = element.(<span class="keyword">int</span>)</span><br><span class="line">		<span class="keyword">if</span> ok &#123;</span><br><span class="line">			<span class="built_in">println</span>(<span class="string">"int is a a"</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//solution 2</span></span><br><span class="line">	<span class="keyword">for</span> _,ele := <span class="keyword">range</span> list &#123;</span><br><span class="line">		<span class="keyword">switch</span> value :=ele.(<span class="keyword">type</span>) &#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="keyword">int</span> :</span><br><span class="line">				<span class="built_in">println</span>(<span class="string">"ele is an int"</span>,)</span><br><span class="line">			<span class="keyword">case</span> b :</span><br><span class="line">				<span class="built_in">println</span>(<span class="string">"ele is a b"</span>)</span><br><span class="line">			<span class="keyword">default</span> :</span><br><span class="line">				<span class="built_in">println</span>(<span class="string">"ele is default type"</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>é€šè¿‡ å˜é‡.(ç±»å‹) è·å¾—è¿”å›å€¼ ok åˆ¤æ–­ è¯¥å˜é‡å­˜çš„æ˜¯å¦æ˜¯ è¯¥ç±»å‹<br>å˜é‡.(type) ä»…åœ¨switchä¸­ å¯ä»¥ä½¿ç”¨</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://gudqs7.github.io/2020/05/20/Go%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6-if-for-switch-%E4%B8%8E-%E5%87%BD%E6%95%B0-%E4%B8%8E-struct-%E5%8C%BF%E5%90%8D%E5%AD%97%E6%AE%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="gudqs7">
      <meta itemprop="description" content="å¿ƒç´¯æ²¡é’±èººå°¸ä¸­">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gudqs7's note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/20/Go%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6-if-for-switch-%E4%B8%8E-%E5%87%BD%E6%95%B0-%E4%B8%8E-struct-%E5%8C%BF%E5%90%8D%E5%AD%97%E6%AE%B5/" class="post-title-link" itemprop="url">Goå­¦ä¹ ç¬”è®° (äºŒ) : æµç¨‹æ§åˆ¶(if,for,switch) ä¸ å‡½æ•° ä¸ struct (åŒ¿åå­—æ®µ)</a>
        </h2>

        <div class="post-meta">
			
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-05-20 09:21:55" itemprop="dateCreated datePublished" datetime="2020-05-20T09:21:55+08:00">2020-05-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-01-22 13:39:17" itemprop="dateModified" datetime="2021-01-22T13:39:17+08:00">2021-01-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2020/05/20/Go%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6-if-for-switch-%E4%B8%8E-%E5%87%BD%E6%95%B0-%E4%B8%8E-struct-%E5%8C%BF%E5%90%8D%E5%AD%97%E6%AE%B5/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/20/Goå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰æµç¨‹æ§åˆ¶-if-for-switch-ä¸-å‡½æ•°-ä¸-struct-åŒ¿åå­—æ®µ/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ä¸ºäº†æ‰©å±•çš„æ‰©å±•"><a href="#ä¸ºäº†æ‰©å±•çš„æ‰©å±•" class="headerlink" title="ä¸ºäº†æ‰©å±•çš„æ‰©å±•"></a>ä¸ºäº†æ‰©å±•çš„æ‰©å±•</h1><h2 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h2><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition &#123;</span><br><span class="line">	<span class="comment">// do something</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> condition &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>if åæ¥æ¡ä»¶è¯­å¥(è¡¨è¾¾å¼) , æ— æ‹¬å· </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="number">9</span>&gt;<span class="number">8</span> &#123;</span><br><span class="line">	<span class="comment">//do some...</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="number">8</span>&gt;<span class="number">8</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> expr1; expr2 ;expr3 &#123;</span><br><span class="line">	<span class="comment">// some code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>expr1 ä¸ºåˆè¯•åŒ–å˜é‡è¯­å¥, ä»…æ‰§è¡Œä¸€æ¬¡<br>expr2 ä¸ºå¾ªç¯æ¡ä»¶è¯­å¥, æ¯æ¬¡å¾ªç¯å‰éƒ½ä¼šåˆ¤æ–­å…¶å€¼<br>expr3 æ˜¯æ”¹å˜å¾ªç¯å˜é‡çš„åœ°æ–¹, æ¯æ¬¡å¾ªç¯åæ‰§è¡Œ<br>å…¶ä¸­expr1,expr2,expr3å‡å¯çœç•¥</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ; ; &#123;</span><br><span class="line">	<span class="comment">// some code </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦ä¸€ç§æ˜¯ä»…ç•™ä¸‹ å¾ªç¯æ¡ä»¶è¯­å¥ å¦‚:</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ; <span class="number">9</span>&gt;<span class="number">8</span> ; &#123;</span><br><span class="line">	<span class="comment">// some code </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ 2ä¸ªåˆ†å· ä¹Ÿå¯çœç•¥, å³:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="number">9</span>&gt;<span class="number">8</span> &#123;</span><br><span class="line">	<span class="comment">//some code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å•Š, å’Œjavaçš„while å¤šåƒ</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">me := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;<span class="string">"name"</span>:<span class="string">"wq"</span>,<span class="string">"age"</span>:<span class="string">"19"</span>,<span class="string">"long"</span>:<span class="string">"200"</span>&#125;</span><br><span class="line"><span class="keyword">for</span> k,v := <span class="keyword">range</span> me &#123;</span><br><span class="line">	fmt.Println(k,v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å—¯, æ˜¯çš„foreach(for in) å°±æ˜¯è¿™ä¸ªfeel<br>å°¤å…¶æç¤º, å¦‚æœä¸ä½¿ç”¨ k , è¯·ç”¨_ æ›¿ä»£, é¿å…ç¼–è¯‘é”™è¯¯</p>
</blockquote>
<h3 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> exp &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">		<span class="comment">//do some ...</span></span><br><span class="line">	<span class="keyword">case</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>:</span><br><span class="line">		<span class="comment">//do some..</span></span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		<span class="comment">//do some..</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¯¹äºexpä¸éœ€è¦æ‹¬å·<br>æ¯ä¸ªcaseå, éƒ½é»˜è®¤å¸¦æœ‰break, ä¸ä¼šå¾€ä¸‹æ‰§è¡Œ<br>å¦‚éœ€æ‰§è¡Œåé¢çš„case,å¯ä½¿ç”¨fallthrough å…³é”®å­—<br>å¯ä»¥ç”¨ , å·åˆ†éš”ä»£è¡¨å¤šä¸ªcase<br>defaultå°±ä¸è¯´äº†, ç±»ä¼¼ä¸ifçš„else</p>
</blockquote>
<h3 id="æœ€åå†™ä¸ªå†’æ³¡æ’åºæ³•å¤ä¹ å·©å›ºä¸‹"><a href="#æœ€åå†™ä¸ªå†’æ³¡æ’åºæ³•å¤ä¹ å·©å›ºä¸‹" class="headerlink" title="æœ€åå†™ä¸ªå†’æ³¡æ’åºæ³•å¤ä¹ å·©å›ºä¸‹"></a>æœ€åå†™ä¸ªå†’æ³¡æ’åºæ³•å¤ä¹ å·©å›ºä¸‹</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123; </span><br><span class="line">    slice := []<span class="keyword">int</span>&#123;<span class="number">3</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">88</span>,<span class="number">44</span>,<span class="number">20</span>&#125;</span><br><span class="line">    maopao(slice)</span><br><span class="line">    fmt.Println(slice)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(slice []<span class="keyword">int</span>, index1 <span class="keyword">int</span>,index2 <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    temp := slice[index1]</span><br><span class="line">    slice[index1]=slice[index2]</span><br><span class="line">    slice[index2]=temp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maopao</span><span class="params">(slice []<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i&lt; <span class="built_in">len</span>(slice)<span class="number">-1</span>;i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j:=<span class="number">0</span>; j&lt; <span class="built_in">len</span>(slice)<span class="number">-1</span>-i; j++ &#123;</span><br><span class="line">            <span class="keyword">if</span> slice[j]&gt;slice[j+<span class="number">1</span>] &#123;</span><br><span class="line">                swap(slice,j,j+<span class="number">1</span>)</span><br><span class="line">            &#125;       </span><br><span class="line">        &#125;       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>99 ä¹˜æ³•</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123; </span><br><span class="line">    num, num2 := <span class="number">1</span>, <span class="number">1</span> </span><br><span class="line">    <span class="keyword">for</span> num&lt;=<span class="number">9</span> &#123;</span><br><span class="line">        num2 = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> num2&lt;=num &#123;</span><br><span class="line">            fmt.Printf(<span class="string">"%d * %d = %d\t"</span>,num2,num,num*num2)</span><br><span class="line">            num2++  </span><br><span class="line">        &#125;       </span><br><span class="line">        fmt.Println()</span><br><span class="line">        num++   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä½¿ç”¨äº†forçš„å®Œæ•´ç‰ˆ , if åˆ¤æ–­<br>sliceæŒ‡é’ˆä¼ é€’ å¯å˜æ€§</p>
</blockquote>
<h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><h3 id="funcè¯­æ³•"><a href="#funcè¯­æ³•" class="headerlink" title="funcè¯­æ³•"></a>funcè¯­æ³•</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">funcName</span> <span class="params">(params...)</span> <span class="params">(returns...)</span></span> &#123;</span><br><span class="line">	<span class="comment">//some code</span></span><br><span class="line">	<span class="keyword">return</span> ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚,æ— å‚æ— è¿”å›å€¼</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">//some code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å•å‚æ•°,å•è¿”å›å€¼</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(id <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="comment">//some code</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¤šå‚æ•°, å¤šè¿”å›å€¼</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span> <span class="params">(id <span class="keyword">int</span>, skills []<span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">int</span> , <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">//some code</span></span><br><span class="line">	numbers := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;<span class="string">"one"</span>:<span class="number">1</span>,<span class="string">"two"</span>:<span class="number">2</span>,<span class="string">"three"</span>:<span class="number">3</span>&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span> , numbers</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¤§æ¦‚å°±æ˜¯è¿™äº›, å†™ä¸ªé˜¶ä¹˜ç©ç©</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">jiechen</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> n==<span class="number">1</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> n * jiechen(n<span class="number">-1</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	sum := jiechen(<span class="number">4</span>) <span class="comment">//24</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="deferå»¶è¿Ÿ"><a href="#deferå»¶è¿Ÿ" class="headerlink" title="deferå»¶è¿Ÿ"></a>deferå»¶è¿Ÿ</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">"func code run"</span>)</span><br><span class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="number">8</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">"defer"</span>,i)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"func code last"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åè¿›å…ˆå‡ºçš„é˜Ÿåˆ—æœºåˆ¶, é€†åºè¾“å‡ºäº† i<br>å»¶è¿Ÿæ‰§è¡Œ, åœ¨returnä¹‹å‰</p>
</blockquote>
<h3 id="import"><a href="#import" class="headerlink" title="import"></a>import</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	. <span class="string">"fmt"</span></span><br><span class="line">	_ <span class="string">"fmt"</span></span><br><span class="line">	f <span class="string">"fmt"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç”¨ . ä»£è¡¨æ— éœ€å‰ç¼€, ç›´æ¥è°ƒç”¨fmtçš„æ–¹æ³•<br>ç”¨_ ä»£è¡¨ä¸ä½¿ç”¨fmtçš„å‡½æ•°, ä»…åŠ è½½<br>å…¶ä»–åç§°åˆ™ä¸ºåˆ«å , å¦‚ f.Println()</p>
</blockquote>
<h3 id="a-func-is-a-type-or-a-value"><a href="#a-func-is-a-type-or-a-value" class="headerlink" title="a func is a type or a value ??"></a>a func is a type or a value ??</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    slice := []<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;</span><br><span class="line">    fmt.Println(<span class="string">"slice:"</span>,slice)</span><br><span class="line">    odd := filter(slice,isOdd)</span><br><span class="line">    even:= filter(slice,isEven)</span><br><span class="line">    fmt.Println(odd,even)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> funcType <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>)</span> <span class="title">bool</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isOdd</span><span class="params">(i <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> i%<span class="number">2</span> ==<span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isEven</span><span class="params">(i <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> i%<span class="number">2</span> ==<span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">filter</span><span class="params">(slice []<span class="keyword">int</span>,f funcType)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> result []<span class="keyword">int</span></span><br><span class="line">    <span class="keyword">for</span> _, value := <span class="keyword">range</span> slice &#123;</span><br><span class="line">        <span class="keyword">if</span> f(value)&#123;</span><br><span class="line">            result = <span class="built_in">append</span>(result, value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å°†funcä½œä¸ºä¸€ä¸ªç±»å‹, ç½®äºå‚æ•°ä¸­, ç”±äºgoä¹Ÿæ˜¯å¼ºç±»å‹, æ‰€ä»¥éœ€è¦æ·»åŠ è‡ªå®šä¹‰ç±»å‹<br>å°†funcä½œä¸ºå®å‚(å€¼)ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°, ç„¶åè¢«è°ƒç”¨</p>
</blockquote>
<h2 id="struct"><a href="#struct" class="headerlink" title="struct"></a>struct</h2><h3 id="è¯­æ³•å®šä¹‰"><a href="#è¯­æ³•å®šä¹‰" class="headerlink" title="è¯­æ³•å®šä¹‰"></a>è¯­æ³•å®šä¹‰</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	age <span class="keyword">int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p person</span><br><span class="line">p.name=<span class="string">"wq"</span></span><br><span class="line">p.age = <span class="number">79</span></span><br><span class="line"></span><br><span class="line">p1 := person&#123;<span class="string">"wq"</span>,<span class="number">89</span>&#125;</span><br><span class="line">p2 := person&#123;name:<span class="string">"wq"</span>,age:<span class="number">99</span>&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åŒ¿åå­—æ®µ"><a href="#åŒ¿åå­—æ®µ" class="headerlink" title="åŒ¿åå­—æ®µ"></a>åŒ¿åå­—æ®µ</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> humen <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	age <span class="keyword">int</span></span><br><span class="line">	long <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Skills []<span class="keyword">string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	humen</span><br><span class="line">	<span class="keyword">int</span></span><br><span class="line">	Skills</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	phone <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	p := person&#123;humen&#123;<span class="string">"wq"</span>,<span class="number">39</span>,<span class="number">99</span>&#125;,<span class="number">666</span>,[]<span class="keyword">int</span>&#123;<span class="string">"c"</span>,<span class="string">"java"</span>,<span class="string">"c#"</span>&#125;,<span class="string">"pwq"</span>,<span class="string">"110"</span>&#125;</span><br><span class="line">	fmt.Println(p,p.name,p.age,p.long,p.phone,p.Skills,p.<span class="keyword">int</span>)</span><br><span class="line">	<span class="comment">//å¯ç›´æ¥è®¿é—®åŒ¿åå­—æ®µçš„ å­—æ®µ, ä½†å¯èƒ½ä¼šè¦†ç›–åŒ¿åå­—æ®µçš„ å­—æ®µ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é€šè¿‡2ä¸ªstruct å®ç°äº†ç±»ä¼¼ ç»§æ‰¿<br>é€šè¿‡ä¸ç»™å­—æ®µå,ä»…ç»™å­—æ®µç±»å‹å®šä¹‰ä¸€ä¸ªåŒ¿åå­—æ®µ<br>å¯ç›´æ¥è®¿é—®åŒ¿åå­—æ®µ, ä½†å¯èƒ½è¦†ç›–åŒ¿åå­—æ®µä¸­çš„å­—æ®µ<br>åŒ¿åå­—æ®µ è¿˜å¯ä»¥ä¸º è‡ªå®šä¹‰ç±»å‹, åŸºç¡€ç±»å‹ , slice, map, arrayç­‰</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://gudqs7.github.io/2020/05/20/Go%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%893%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%BE%97%E5%8F%98%E9%87%8F-%E5%B8%B8%E9%87%8F%E4%B8%8Eiota-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-int-bool-string-error-array-slice-map/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="gudqs7">
      <meta itemprop="description" content="å¿ƒç´¯æ²¡é’±èººå°¸ä¸­">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gudqs7's note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/20/Go%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%893%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%BE%97%E5%8F%98%E9%87%8F-%E5%B8%B8%E9%87%8F%E4%B8%8Eiota-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-int-bool-string-error-array-slice-map/" class="post-title-link" itemprop="url">Go å­¦ä¹ ç¬”è®°(ä¸€) : 3ç§æ–¹å¼å¾—å˜é‡ / å¸¸é‡ä¸iota / æ•°æ®ç±»å‹(int,bool,string,error,array,slice,map)</a>
        </h2>

        <div class="post-meta">
			
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-05-20 09:20:11" itemprop="dateCreated datePublished" datetime="2020-05-20T09:20:11+08:00">2020-05-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-01-22 13:39:17" itemprop="dateModified" datetime="2021-01-22T13:39:17+08:00">2021-01-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2020/05/20/Go%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%893%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%BE%97%E5%8F%98%E9%87%8F-%E5%B8%B8%E9%87%8F%E4%B8%8Eiota-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-int-bool-string-error-array-slice-map/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/20/Goå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰3ç§æ–¹å¼å¾—å˜é‡-å¸¸é‡ä¸iota-æ•°æ®ç±»å‹-int-bool-string-error-array-slice-map/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ä¸ºäº†åŸºç¡€çš„åŸºç¡€"><a href="#ä¸ºäº†åŸºç¡€çš„åŸºç¡€" class="headerlink" title="ä¸ºäº†åŸºç¡€çš„åŸºç¡€"></a>ä¸ºäº†åŸºç¡€çš„åŸºç¡€</h1><h2 id="package-import"><a href="#package-import" class="headerlink" title="package , import"></a>package , import</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">"Hello World !"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åŒ… , ä¸pythonç±»ä¼¼, ä¸javaä¸åŒ. ç”¨äºæ¨¡å—åŒ–. é€šè¿‡å£°æ˜åŒ…, å’Œå¯¼å…¥åŒ…å¯ä»¥å®ç°ç¨‹åºçš„ç›¸äº’è°ƒç”¨. å¦‚ å¯¼å…¥ fmt , ä½¿ç”¨fmtçš„å‡½æ•°Println()<br>main.main()æ˜¯ ç¨‹åºçš„è¿è¡Œå…¥å£, æ— å‚æ•°, æ— è¿”å›å€¼</p>
</blockquote>
<h2 id="å˜é‡å£°æ˜"><a href="#å˜é‡å£°æ˜" class="headerlink" title="å˜é‡å£°æ˜"></a>å˜é‡å£°æ˜</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> complete <span class="keyword">string</span> = <span class="string">"I 'm complete !"</span></span><br><span class="line">	<span class="keyword">var</span> autoType = <span class="string">"I'm auto "</span></span><br><span class="line">	<span class="keyword">var</span> simple := <span class="string">"I'm simple "</span></span><br><span class="line">	complete, autoType, simple = <span class="string">"complete again"</span>, <span class="string">"auto again"</span>, <span class="string">"simple again"</span></span><br><span class="line">	fmt.Println(complete,autoType,simple)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šæ‰€ç¤º, è·å¾—ä¸€ä¸ªå˜é‡æœ‰3ç§æ–¹å¼</p>
<blockquote>
<p>å®Œæ•´çš„å£°æ˜å’Œèµ‹å€¼ (ä¹Ÿå¯åªå£°æ˜, åèµ‹å€¼)<br>å£°æ˜æ—¶ä¸å†™ç±»å‹ , å¿…é¡»åŒæ—¶èµ‹å€¼è‡ªåŠ¨æ¨å¯¼ç±»å‹<br>çœç•¥var , ä½¿ç”¨ := å£°æ˜+èµ‹å€¼, ä»…ç”¨äºå£°æ˜<br>###å¸¸é‡</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SEX_MALE <span class="keyword">int</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">const</span> SEX_FEMALE = <span class="number">1</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	MALE = <span class="literal">iota</span>  <span class="comment">//0</span></span><br><span class="line">	FEMAILE  <span class="comment">//1</span></span><br><span class="line">	WHAT <span class="comment">//2</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨constå…³é”®å­—å¯å£°æ˜å¸¸é‡, ä½¿ç”¨()å¯ä¸€æ¬¡å£°æ˜å¤šä¸ª ä½¿ç”¨iotaå¯ä¾¿æ·å£°, è§„åˆ™ä¸º:<br>é‡åˆ°consté‡ç½®ä¸º0<br>åŒä¸€è¡Œå€¼ç›¸åŒ<br>ä¸Šä¸€è¡Œä¸ºiota, åˆ™æœ¬è¡Œä¸èµ‹å€¼æ—¶ä¸º ä¸Šä¸€è¡Œiotaå€¼ + 1, ä»¥æ­¤ç±»æ¨</p>
</blockquote>
<h2 id="æ•°æ®ç±»å‹å°è®¡"><a href="#æ•°æ®ç±»å‹å°è®¡" class="headerlink" title="æ•°æ®ç±»å‹å°è®¡"></a>æ•°æ®ç±»å‹å°è®¡</h2><h3 id="æ•´å½¢"><a href="#æ•´å½¢" class="headerlink" title="æ•´å½¢"></a>æ•´å½¢</h3><blockquote>
<p>int : int8 , int16, int32, int 64<br>uint : uint8, uint16, uint32, uint64<br>rune, int, byte</p>
</blockquote>
<p>å…¶ä¸­ int ä¸ uint çš„åŒºåˆ«æ˜¯ æœ‰æ— ç¬¦å· , rune æ˜¯ int32çš„åˆ«ç§°, byteæ˜¯uint8çš„åˆ«ç§°, intè™½ç„¶æ˜¯32ä½ä½†ä¸int32ä¸å¯äº’ç”¨</p>
<h3 id="Boolean"><a href="#Boolean" class="headerlink" title="Boolean"></a>Boolean</h3><p>é»˜è®¤ä¸ºfalse, ä¸javaç±»ä¼¼, æ•°0,ç©ºç­‰ä¸ä»£è¡¨ false</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ok <span class="keyword">bool</span> </span><br><span class="line">fmt.Println(ok) <span class="comment">//false</span></span><br><span class="line"><span class="keyword">var</span> gameover = <span class="literal">true</span></span><br><span class="line">isover := <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h3 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h3><p>ä¸javaç±»ä¼¼, åŒå¼•å·åŒ…å›´</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"I'm a string!"</span></span><br></pre></td></tr></table></figure>
<p>å½“å¤šè¡Œæ—¶ ä½¿ç”¨ åå¼•å· </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> multistr = <span class="string">`This is </span></span><br><span class="line"><span class="string">a </span></span><br><span class="line"><span class="string">multiline</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ ` æ—¶, ä¸è½¬ä¹‰\n,\tç­‰</p>
<blockquote>
<p>ä½¿ç”¨stringç±»å‹æ—¶, æ³¨æ„stringä¸å¯å˜, ç±»ä¼¼java . ä½†å¯å¼ºè½¬ä¸ºbyte[] ç±»å‹åæ“ä½œ</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">"hello"</span></span><br><span class="line">str[<span class="number">0</span>] = <span class="string">'c'</span> <span class="comment">//wrong!!!</span></span><br><span class="line"><span class="keyword">var</span> c = (<span class="keyword">byte</span>[])str</span><br><span class="line">c[<span class="number">0</span>]=<span class="string">'c'</span></span><br></pre></td></tr></table></figure>

<h3 id="error"><a href="#error" class="headerlink" title="error"></a>error</h3><p>Goå†…ç½®æœ‰ä¸€ä¸ªerrorç±»å‹ï¼Œä¸“é—¨ç”¨æ¥å¤„ç†é”™è¯¯ä¿¡æ¯ï¼ŒGoçš„packageé‡Œé¢è¿˜ä¸“é—¨æœ‰ä¸€ä¸ªåŒ…errorsæ¥å¤„ç†é”™è¯¯ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">err := errors.New(<span class="string">"I am error message!"</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Print(err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="array"><a href="#array" class="headerlink" title="array"></a>array</h3><p>åœ¨goä¸­, arrayæ˜¯å€¼ç±»å‹, è€Œslice(åˆ‡ç‰‡),map æ‰æ˜¯å¼•ç”¨ç±»å‹</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">arr := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">array:=[...]<span class="keyword">int</span>&#123;<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>&#125;</span><br><span class="line">arr2 := [<span class="number">10</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125; <span class="comment">//å7ä¸ªå…ƒç´ åˆ™ä¸ºé›¶å€¼ </span></span><br><span class="line"><span class="keyword">var</span> arr3 [<span class="number">10</span>]<span class="keyword">int</span></span><br><span class="line">arr3[<span class="number">0</span>]=<span class="number">9</span></span><br><span class="line">arr3[<span class="number">1</span>]=<span class="number">10</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å…³äºæ•°ç»„çš„èµ‹å€¼,å–å€¼ä¸cå’Œjavaç±»ä¼¼<br>å¯¹äºæ•°ç»„çš„åˆå§‹åŒ–,åˆ†å®Œæ•´,éƒ¨åˆ†(ä¸å†™é•¿åº¦, ä¸å†™æ‰€æœ‰å…ƒç´ )<br>æ³¨æ„arrayæ˜¯å€¼ç±»å‹, äº’ç›¸ä¼ é€’èµ‹å€¼æ—¶, ä¸ä¼šç›¸äº’å½±å“</p>
</blockquote>
<h3 id="slice"><a href="#slice" class="headerlink" title="slice"></a>slice</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">array := [<span class="number">10</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>&#125;</span><br><span class="line">aslice := array[:]</span><br><span class="line">bslice := aslice[<span class="number">2</span>:]</span><br><span class="line">bslice[<span class="number">3</span>] = <span class="number">99</span></span><br><span class="line">array[<span class="number">0</span>] = <span class="number">-99</span></span><br><span class="line">fmt.Println(aslice,bslice)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åˆ‡ç‰‡ , å¯é€šè¿‡æ•°ç»„[n:m] è·å–<br>åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹, æ”¹å˜bslice , åŒæ—¶asliceä¹Ÿä¼šæ”¹å˜<br>æ”¹å˜arrä¸ä¼šæ”¹å˜aslice , å› ä¸ºarrayæ˜¯å€¼ç±»å‹</p>
</blockquote>
<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123; </span><br><span class="line">    <span class="keyword">var</span> numbers <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span> =<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;<span class="string">"all"</span>:<span class="number">9999</span>&#125;</span><br><span class="line">    others := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">    others[<span class="string">"name"</span>]=<span class="number">007</span></span><br><span class="line">    numbers[<span class="string">"one"</span>] = <span class="number">1</span></span><br><span class="line">    numbers[<span class="string">"ten"</span>] = <span class="number">10</span></span><br><span class="line">    numbers[<span class="string">"three"</span>] = <span class="number">3</span></span><br><span class="line">    <span class="built_in">delete</span>(numbers,<span class="string">"one"</span>)</span><br><span class="line">    val , ok := numbers[<span class="string">"not ex"</span>]</span><br><span class="line">    fmt.Println(numbers,numbers[<span class="string">"one"</span>],others,<span class="built_in">len</span>(numbers),val,ok)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>mapç±»ä¼¼ä¸pythonç§çš„å­—å…¸, æ“ä½œä¸sliceç±»ä¼¼<br>å…ƒç´ èµ‹å€¼, å–å€¼ä½¿ç”¨[]<br>mapåˆå§‹åŒ–ä½¿ç”¨ make æˆ–è€… map[string]int{}<br>ä½¿ç”¨deleteåˆ é™¤key<br>ä½¿ç”¨å¤šè¿”å›å€¼æ£€æµ‹æ˜¯å¦å­˜åœ¨key<br>ä½¿ç”¨lenæŸ¥çœ‹å…ƒç´ ä¸ªæ•°</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://gudqs7.github.io/2020/05/20/%E8%BF%9C%E5%8F%A4Fomo3D%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="gudqs7">
      <meta itemprop="description" content="å¿ƒç´¯æ²¡é’±èººå°¸ä¸­">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gudqs7's note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/20/%E8%BF%9C%E5%8F%A4Fomo3D%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" class="post-title-link" itemprop="url">è¿œå¤Fomo3Dæ™ºèƒ½åˆçº¦æºç åˆ†æ(é™„é€å•æœºéƒ¨ç½²æŒ‡å—)</a>
        </h2>

        <div class="post-meta">
			
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-05-20 09:05:21" itemprop="dateCreated datePublished" datetime="2020-05-20T09:05:21+08:00">2020-05-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-01-22 13:39:17" itemprop="dateModified" datetime="2021-01-22T13:39:17+08:00">2021-01-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/blockchain/" itemprop="url" rel="index"><span itemprop="name">blockchain</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/blockchain/solidity/" itemprop="url" rel="index"><span itemprop="name">solidity</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2020/05/20/%E8%BF%9C%E5%8F%A4Fomo3D%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/20/è¿œå¤Fomo3Dæ™ºèƒ½åˆçº¦æºç åˆ†æ/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Fomo3D"><a href="#Fomo3D" class="headerlink" title="Fomo3D"></a>Fomo3D</h1><h2 id="Fomo3D-åˆçº¦æºç åˆ†æ"><a href="#Fomo3D-åˆçº¦æºç åˆ†æ" class="headerlink" title="Fomo3D åˆçº¦æºç åˆ†æ"></a>Fomo3D åˆçº¦æºç åˆ†æ</h2><h3 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h3><h4 id="ç¯å¢ƒå‡†å¤‡-ç”¨äºè°ƒè¯•åˆçº¦"><a href="#ç¯å¢ƒå‡†å¤‡-ç”¨äºè°ƒè¯•åˆçº¦" class="headerlink" title="ç¯å¢ƒå‡†å¤‡ (ç”¨äºè°ƒè¯•åˆçº¦)"></a>ç¯å¢ƒå‡†å¤‡ (ç”¨äºè°ƒè¯•åˆçº¦)</h4><ul>
<li>git, nodejs, Chrome</li>
<li>ganache-cli, remix-ide</li>
</ul>
<h4 id="ä»£ç -åŠ-IDE"><a href="#ä»£ç -åŠ-IDE" class="headerlink" title="ä»£ç  åŠ IDE"></a>ä»£ç  åŠ IDE</h4><blockquote>
<p>å®‰è£…å¥½ Git å, ä¸‹è½½æºç  <code>git clone https://github.com/reedhong/fomo3d_clone.git</code><br>å®‰è£…å¥½ nodejs å, ä½¿ç”¨ npm å®‰è£…2ä¸ªä¸œè¥¿(å»ºè®®ä½¿ç”¨å›½å†…é•œåƒæº:cnpm)<br><code>npm install ganache-cli -g &amp; npm install remix-ide -g</code>  </p>
</blockquote>
<blockquote>
<p>è‡³äºIDE ä¸Šçš„é€‰æ‹©, åªè¦ IDE æ”¯æŒ sol è¯­æ³•, å¦‚ idea å°±æœ‰ solidity æ’ä»¶, äº¦æˆ–è€… vscode ä¹Ÿå¾ˆæ£’, è€Œä¸”ä¸­æ–‡æ”¯æŒæ¯”è¾ƒå¥½, è¿˜å¯¹äºå¤§æ–‡ä»¶ js åŠ json æ‰“å¼€é€Ÿåº¦æ¯”è¾ƒå¿«, ç¼–è¾‘ä¹Ÿæ¯”è¾ƒæµç•…( idea å¯èƒ½æ˜¯æ’ä»¶å¤ªå¤š, å„ç§è¯­æ³•è§£ææ¯”è¾ƒå¡)</p>
</blockquote>
<h3 id="æºç ç»“æ„"><a href="#æºç ç»“æ„" class="headerlink" title="æºç ç»“æ„"></a>æºç ç»“æ„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">+-- interface	 </span><br><span class="line">|	 +-- DiviesInterface.sol</span><br><span class="line">|	 +-- F3DexternalSettingsInterface.sol</span><br><span class="line">|	 +-- HourglassInterface.sol</span><br><span class="line">|	 +-- JIincForwarderInterface.sol</span><br><span class="line">|	 +-- JIincInterfaceForForwarder.sol</span><br><span class="line">|	 +-- PlayerBookInterface.sol</span><br><span class="line">|	 +-- PlayerBookReceiverInterface.sol</span><br><span class="line">|	 +-- TeamJustInterface.sol</span><br><span class="line">|	 +-- otherFoMo3D.sol</span><br><span class="line">+-- library	</span><br><span class="line">|	 +-- F3DKeysCalcLong.sol</span><br><span class="line">|	 +-- F3Ddatasets.sol</span><br><span class="line">|	 +-- MSFun.sol	</span><br><span class="line">|	 +-- NameFilter.sol</span><br><span class="line">|	 +-- SafeMath.sol	</span><br><span class="line">|	 +-- UintCompressor.sol</span><br><span class="line">+-- Divies.sol</span><br><span class="line">+-- F3Devents.sol	</span><br><span class="line">+-- F3DexternalSettings.sol	</span><br><span class="line">+-- FoMo3Dlong.sol	</span><br><span class="line">+-- Hourglass.sol	</span><br><span class="line">+-- JIincForwarder.sol</span><br><span class="line">+-- PlayerBook.sol	</span><br><span class="line">+-- TeamJust.sol	</span><br><span class="line">+-- modularLong.sol</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä»¥ä¸Šå°±æ˜¯ reed å¤§ä½¬æ•´ç†çš„æºç ç»“æ„, çœ‹åˆ°è¿™ä¹ˆå¤šæ–‡ä»¶, å¿ƒé‡Œæ„Ÿè§‰å¥½æ…Œ, åˆ«æ€•, å…¶å®å¤§å¤šæ•°æ–‡ä»¶éƒ½æ˜¯æ‘†è®¾, æ²¡æœ‰å¤ªå¤šé€»è¾‘ä»£ç , æˆ‘ä»¬ä¸»è¦éœ€è¦çœ‹çš„, ä¹Ÿå°±æ˜¯é‚£ä¹ˆå‡ ä¸ªåˆçº¦, æ—¢ç„¶å¦‚æ­¤, æˆ‘ä»¬å…ˆæ’é™¤ä¸€äº›ç”¨å¤„ä¸å¤§, éæ¸¸æˆå…³é”®æ ¸å¿ƒçš„åˆçº¦</p>
</blockquote>
<h3 id="å„å¤§æ”¶æ¬¾åˆçº¦"><a href="#å„å¤§æ”¶æ¬¾åˆçº¦" class="headerlink" title="å„å¤§æ”¶æ¬¾åˆçº¦"></a>å„å¤§æ”¶æ¬¾åˆçº¦</h3><ul>
<li>JIincForwarder.sol (JIincForwarderInterface ç±»å‹å˜é‡çš„å®é™…å¼•ç”¨), ç”¨äºå‘é¡¹ç›®åŸºé‡‘ä¼šè½¬è´¦</li>
<li>otherFoMo3D.sol (æ¸¸æˆ activate å‰å¿…é¡»è®¾ç½®çš„ otherFomo å˜é‡çš„å®é™…å¼•ç”¨), å‘ä¸çŸ¥é“å“ªä¸ªåœ°å€è½¬è´¦</li>
<li>Divies.sol (DeviesInterface ç±»å‹å˜é‡çš„å®é™…å¼•ç”¨), ç”¨äº p3d åˆ†çº¢</li>
</ul>
<h4 id="JIincForwarder-sol"><a href="#JIincForwarder-sol" class="headerlink" title="JIincForwarder.sol"></a>JIincForwarder.sol</h4><blockquote>
<p>è¿™ä¸ªåˆçº¦å°±æ˜¯å‘ åŸºé‡‘ä¼šåœ°å€ è½¬å‘ ether, å•ç‹¬å†™ä¸€ä¸ªä¸­è½¬çš„å¥½å¤„å°±æ˜¯çµæ´», è¿™ä¸ªåˆçº¦å¯ä»¥åšåˆ°åŸºé‡‘ä¼šåœ°å€å®‰å…¨è½¬ç§», ä¹Ÿå°±æ˜¯è¯´ä¸­é€”å¯ä»¥æ”¹å˜åŸºé‡‘ä¼šçš„è½¬è´¦åœ°å€, è€Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦æ–°æ—§2ä¸ªåˆçº¦å…±åŒå®Œæˆ(æ—§.startMigration(æ–°åœ°å€)â€“&gt; æ–°.finishMigration(), ä¸­é€” æ—§æ–¹å¯ä»¥ æ—§.cancelMigration(), è€Œå®Œæˆåœ°å€è½¬ç§»å, æ–°åœ°å€å®Œå…¨æ›¿ä»£æ—§åœ°å€ )<br>å…¶ä¸­æ¯”è¾ƒè½¬è´¦é€»è¾‘å°±æ˜¯è°ƒç”¨ä¸‹é¢çš„è¿™ä¸ªæ¥å£å¯¹åº”çš„å®é™…åˆçº¦ çš„ deposit æ–¹æ³• </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface JIincInterfaceForForwarder &#123;</span><br><span class="line">    function deposit(address _addr) external payable returns (bool);</span><br><span class="line">    function migrationReceiver_setup() external returns (bool);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è‡³äºç°åœ¨è¿™ä¸ªåŸºé‡‘ä¼šçš„åœ°å€åˆ°åº•æ˜¯å•¥, å¯ä»¥é€šè¿‡ status() æ–¹æ³•æŸ¥çœ‹å“¦</p>
</blockquote>
<h4 id="otherFoMo3D-sol"><a href="#otherFoMo3D-sol" class="headerlink" title="otherFoMo3D.sol"></a>otherFoMo3D.sol</h4><blockquote>
<p>è¿™ä¸ªåˆçº¦å¾ˆæœ‰æ„æ€, æˆ–è€…è¯´å®ƒçš„èƒŒåå¾ˆæœ‰æ„æ€, å¤§å®¶éƒ½æƒ³çŸ¥é“ å…¶ä»–çš„ fomo åˆ°åº•æ˜¯å•¥, æ®è¯´ä¸æ˜¯ soon ç‰ˆ<br>è‡³äºé€»è¾‘ä¸Š, è¿™ä¸ª potSwap çš„è°ƒç”¨æ—¶æœºæ˜¯åœ¨ç©å®¶ä¹° key çš„æ—¶å€™, è€Œå®ƒçš„ä½œç”¨, æˆ‘è®¤ä¸ºæ˜¯æ¸¸æˆé—´çš„å¥–æ± äº¤æ¢<br>æ¯”å¦‚è¯´, fomolong å…±æœ‰100ä¸ª ether ä¹°å…¥, é‚£ä¹ˆå°±ä¼šæœ‰1%æµå‘ otherFomo çš„å¥–æ± , åŒç†, otherFomo é‡Œåº”è¯¥ä¹Ÿä¼šæœ‰è¿™ä¸ªé€»è¾‘çš„å­˜åœ¨, è¿™ä¹ˆåšæœ‰å•¥ç”¨å°±äº¤ç»™å¤§å®¶è‡ªå·±æ€è€ƒäº†</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">interface otherFoMo3D &#123;</span><br><span class="line">    function potSwap() external payable;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fomo3Dlong ä»£ç : (fomo3Dlongæœ¬èº«ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª otherFomo, ç”šè‡³åœ¨ çœŸæ­£çš„otherFomo é‡Œå®ƒçš„é‚£ä¸ª otherFomo å°±æ˜¯ fomo3Dlong ä¹Ÿä¸ä¸€å®š)</span><br><span class="line"></span><br><span class="line">function potSwap()</span><br><span class="line">    external</span><br><span class="line">    payable</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; setup local rID</span><br><span class="line">    uint256 _rID &#x3D; rID_ + 1;</span><br><span class="line">    </span><br><span class="line">    round_[_rID].pot &#x3D; round_[_rID].pot.add(msg.value); &#x2F;&#x2F; å¥–æ± é‡‘é¢å¢åŠ </span><br><span class="line">    emit F3Devents.onPotSwapDeposit(_rID, msg.value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Divies-sol"><a href="#Divies-sol" class="headerlink" title="Divies.sol"></a>Divies.sol</h4><blockquote>
<p>è¿™éƒ¨åˆ†æ˜¯ç»™ P3D åˆ†çº¢çš„, ä»£ç å¾ˆç®€å•, å°±ä¸€ä¸ªè½¬è´¦çš„è°ƒç”¨, è°ƒç”¨æ—¶æœºä¸Š, é¦–å…ˆæ˜¯ä¹° key çš„é’±è¢«ç“œåˆ†æ—¶, æœ‰å®ƒçš„ä¸€ä»½, å…¶æ¬¡å½“ä¸€è½® (Round) ç»“æŸå, åˆä¼šæ ¹æ®èµ¢çš„é˜Ÿä¼æ¥åˆ†é…å¥–æ± , æŠ½å‡ºä¸€éƒ¨åˆ†ç»™åˆ° P3D</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interface DiviesInterface &#123;</span><br><span class="line">    function deposit() external payable;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å½“ç„¶è¿™å…¶ä¸­å¦‚ä½•ç»™ P3D åˆ†çº¢æˆ‘è¿˜æ²¡æå¤ªæ‡‚, å¤§è‡´æµç¨‹è²Œä¼¼æ˜¯: ä¹° keyåˆ†çº¢ â€“&gt; è°ƒç”¨ Divies çš„ deposit æ–¹æ³•, Divies åˆçº¦ä¸­æ­¤æ–¹æ³•æ— å…·ä½“å®ç°(ç©ºæ–¹æ³•, å•¥ä¹Ÿä¸å¹², å°±æ”¶é’±) â€“&gt; é¢„è®¡ä»€ä¹ˆæ—¶å€™ä¼šæœ‰ P3D çš„ç©å®¶æ¥è°ƒç”¨è¿™ä¸ªåˆçº¦çš„ distribute æ–¹æ³•, è€Œ è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨ä¼¼ä¹æ˜¯å°† åˆ†çº¢è½¬æ¥çš„é’±æ‹¿å»æŠ•å…¥ P3D, ç„¶åå–å‡º, æ ¹æ®ä¼ å…¥çš„ç™¾åˆ†æ¯”å†³å®šæ˜¯å¦ç»§ç»­æŠ•å…¥æˆ–é‡å¤æŠ•å…¥å’Œå”®å‡ºå¤šå°‘æ¬¡, æœ€åæŠŠé’±æç°å›æ¥(å¯èƒ½å°±æ²¡å¤šå°‘äº†), è€Œé’±é€šè¿‡10% çš„åˆ†çº¢æœºåˆ¶å…¨ç»™äº† P3D çš„ç”¨æˆ·??? è¿™ä¸€å—ä¸€ç›´ä¸å¤ªæ‡‚, è€Œä¸”è¿™ä¸ªæ–¹æ³•çš„ è°ƒç”¨æ—¶æœºä¸æ˜, è°ƒç”¨æ—¶è¿˜å¢åŠ äº† æ—¶é—´é™åˆ¶å’Œæ‹¥æŒ¤é˜Ÿåˆ—çš„é™åˆ¶. æ€»çš„å°†è¿™é‡Œé¢å°±æ˜¯å­˜åœ¨ç»™ P3D åˆ†çº¢çš„é’±, ä½†è¿™é’±å•¥æ—¶å€™ ç»™ P3D, æˆ‘è¿˜æ˜¯æ²¡çŒœå‡ºæ¥.</p>
</blockquote>
<h3 id="3å¤§åˆçº¦"><a href="#3å¤§åˆçº¦" class="headerlink" title="3å¤§åˆçº¦"></a>3å¤§åˆçº¦</h3><blockquote>
<p>å…‰æ˜¯è½¬è´¦åˆçº¦å°±æ„Ÿè§‰æœ‰äº›çœ‹ä¸æ‡‚äº†, çœŸæ˜¯å¤´ç–¼å•Š, åªå¥½æŠŠä¸æ‡‚çš„æ”¾ä¸‹, ç•™å¾…æ—¥åç¢ç£¨. è¿˜æ˜¯å…ˆåˆ†ææ¸¸æˆæ ¸å¿ƒä»£ç å§</p>
</blockquote>
<ul>
<li>TeamJust.sol</li>
<li>PlayerBook.sol</li>
<li>FoMo3Dlong.sol</li>
</ul>
<h4 id="TeamJust-sol"><a href="#TeamJust-sol" class="headerlink" title="TeamJust.sol"></a>TeamJust.sol</h4><blockquote>
<p>é¦–å…ˆçœ‹ TeamJust.sol , è¿™ä¸ªæ˜¯ç”¨æ¥åšæƒé™æ§åˆ¶çš„, é‡Œé¢ é™¤äº†ä¸ muitiSig( è¿™ä¸ªä»¥åè¯´ )ç›¸å…³çš„å‡ ä¸ªæ–¹æ³•, ä¹Ÿå°±æ˜¯ç®¡ç† admin å’Œ dev äº†, å¦‚ <code>addAdmin</code> <code>removeAdmin</code>, è€Œ <code>isDev</code> <code>isAdmin</code> åˆ™æ˜¯æ‹¿æ¥ç»™å…¶ä»–åˆçº¦è°ƒç”¨(æ¯”å¦‚ playerBook çš„ onlyDevs) </p>
</blockquote>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function setup(address _addr)</span><br><span class="line">    onlyDevs()</span><br><span class="line">    public</span><br><span class="line">&#123;</span><br><span class="line">    require( address(Jekyll_Island_Inc) &#x3D;&#x3D; address(0) );</span><br><span class="line">    Jekyll_Island_Inc &#x3D; JIincForwarderInterface(_addr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç»è¿‡æˆ‘çš„è§‚å¯Ÿå‘ç°, è¿™ä¸ª teamJust åˆçº¦åº”è¯¥æ˜¯æ¯”è¾ƒååŠ çš„, æ¯”å¦‚ fomo3Dlong åˆçº¦çš„æ¿€æ´»å°±æ²¡æœ‰ä½¿ç”¨, è€Œ2ä¸ªåˆçº¦ä¸åŒçš„å¯¹äº <code>Jekyll_Island_Inc</code> çš„èµ‹å€¼ä¹Ÿè®©æˆ‘æ¨æµ‹è¿™å¯èƒ½æ˜¯è¾ƒæ–°çš„å†™æ³•. æˆ‘ä¹Ÿè§‰å¾—è¿™ç§é€šè¿‡è°ƒç”¨åˆçº¦èµ‹å€¼çš„æ–¹å¼æ¯”è¾ƒå¥½, æ‰€ä»¥åœ¨æˆ‘æ•´çš„ é¡¹ç›® <a href="https://github.com/gudqs7/fomo3d_truffle" target="_blank" rel="noopener">fomo3d_truffle</a> ä¸­, æˆ‘æŠŠ activate å‡½æ•°çš„ç”¨æˆ·é™åˆ¶ ä¹Ÿæ”¹æˆäº† ç”¨ teamJust æ¥åš, è€Œ å…¶ä¸­çš„ playerBook å’Œ teamJust å®é™…åˆçº¦åœ°å€ä¹Ÿæ˜¯é€šè¿‡ ç±»ä¼¼ä¸Šé¢ setup çš„æ–¹å¼ èµ‹å€¼, è¿™ä¹ˆåšè¿˜æœ‰ä¸ªå¥½å¤„å°±æ˜¯å¯ä»¥é€šè¿‡ truffle ä¸€é”®æŠŠè¿™äº›åˆçº¦éƒ¨ç½²ä¸”èµ‹å€¼, è€Œä¸æ˜¯å¼„ä¸€ä¸ªæ”¹æºç é‡æ–°ç¼–è¯‘è¿™ç§æµ‹è¯•èµ·æ¥æ¯”è¾ƒéº»çƒ¦çš„æ–¹å¼</p>
</blockquote>
<h4 id="PlayerBook-sol"><a href="#PlayerBook-sol" class="headerlink" title="PlayerBook.sol"></a>PlayerBook.sol</h4><blockquote>
<p>è¿™ä¸ªåˆçº¦ä¸»è¦æ˜¯ç®¡ç† ç©å®¶ä¿¡æ¯, è€Œç©å®¶ä¿¡æ¯åˆ™åˆ†ä¸º name, id, addr, id æ˜¯æ ¹æ®åœ°å€æ˜¯å¦å­˜åœ¨è‡ªå¢ç”Ÿæˆçš„, è€Œ name åˆ™æ˜¯é€šè¿‡ èŠ±é’±æ³¨å†Œå¯ç”¨äºæ¨å¹¿è·å–ææˆçš„! åˆçº¦å†…å¤§å¤šæ–¹æ³•éƒ½åƒä¸ªæ•°æ®åº“ä¸€æ ·å‡ä¸º crud æ“ä½œ, å¤¹å¸¦çš„é€»è¾‘æ— éå°±æ˜¯ä¸€äº›éªŒè¯, å…¶ä»–çš„éƒ½æ¯”è¾ƒå°‘, é‡Œé¢æ¯”è¾ƒæœ‰æ„æ€çš„ç‚¹å°±æ˜¯ addGame </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function addGame(address _gameAddress, string _gameNameStr)</span><br><span class="line">    onlyDevs()</span><br><span class="line">    public</span><br><span class="line">&#123;</span><br><span class="line">    require(gameIDs_[_gameAddress] &#x3D;&#x3D; 0, &quot;derp, that games already been registered&quot;);</span><br><span class="line">    </span><br><span class="line">    if (multiSigDev(&quot;addGame&quot;) &#x3D;&#x3D; true)</span><br><span class="line">    &#123;deleteProposal(&quot;addGame&quot;);</span><br><span class="line">        gID_++;</span><br><span class="line">        bytes32 _name &#x3D; _gameNameStr.nameFilter();</span><br><span class="line">        gameIDs_[_gameAddress] &#x3D; gID_;</span><br><span class="line">        gameNames_[_gameAddress] &#x3D; _name;</span><br><span class="line">        games_[gID_] &#x3D; PlayerBookReceiverInterface(_gameAddress);</span><br><span class="line">    </span><br><span class="line">        games_[gID_].receivePlayerInfo(1, plyr_[1].addr, plyr_[1].name, 0);</span><br><span class="line">        games_[gID_].receivePlayerInfo(2, plyr_[2].addr, plyr_[2].name, 0);</span><br><span class="line">        games_[gID_].receivePlayerInfo(3, plyr_[3].addr, plyr_[3].name, 0);</span><br><span class="line">        games_[gID_].receivePlayerInfo(4, plyr_[4].addr, plyr_[4].name, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™é‡Œæ˜¯æŠŠ fomo3Dlong çš„åœ°å€å’Œåç§°ä¼ å…¥, ç„¶åå°±ä¼šé€šè¿‡æ¥å£å‘ fomo3Dlong ä¼ å…¥å‡ ä¸ªé¢„è®¾çš„ç©å®¶ä¿¡æ¯(æ¥è‡ª playerbookçš„æ„é€ æ–¹æ³•), è€Œè°ƒç”¨è¿‡è¿™ä¸ªæ–¹æ³•å, <code>registerNameXxxxFromDapp</code> è¿™æ ·çš„æ–¹æ³•æ‰èƒ½ä¸è¢« <code>isRegisteredGame</code> æ‹¦æˆª. æ‰€ä»¥éƒ¨ç½²æ—¶, è¿™ä¸€æ­¥æ˜¯å¿…åšçš„.   </p>
</blockquote>
<blockquote>
<p>å…¶ä»–çš„å‡ ä¸ªç‚¹: å¯è®¾ç½®çš„æ³¨å†Œè´¹ç”¨, ä¸”è´¹ç”¨è¢«è½¬åˆ°åŸºé‡‘ä¼š;  è´­ä¹° key é‚€è¯·åˆ†çº¢æ€»æ˜¯å’Œè®¿é—®çš„é“¾æ¥çš„æ¨å¹¿ç æœ‰å…³, åªæœ‰åœ¨æ— æ¨å¹¿ç æ—¶, æ‰ä»å†å²ä¸­è·å– laff, è€Œ laff æ¯è®¿é—®ä¸€ä¸ªæ¨å¹¿ç (å¹¶ä¹°äº† key)éƒ½åœ¨æ”¹å˜</p>
</blockquote>
<h4 id="FoMo3Dlong-sol"><a href="#FoMo3Dlong-sol" class="headerlink" title="FoMo3Dlong.sol"></a>FoMo3Dlong.sol</h4><blockquote>
<p>ä¸»è¦åˆçº¦å•Š, å…ˆçœ‹ä¸‹ æ‰€æœ‰çš„ state å˜é‡</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">string constant public name &#x3D; &quot;FoMo3D Long Official&quot;;</span><br><span class="line">string constant public symbol &#x3D; &quot;F3D&quot;;</span><br><span class="line">uint256 private rndExtra_ &#x3D; extSettings.getLongExtra();     &#x2F;&#x2F; length of the very first ICO </span><br><span class="line">uint256 private rndGap_ &#x3D; extSettings.getLongGap();         &#x2F;&#x2F; length of ICO phase, set to 1 year for EOS.</span><br><span class="line">uint256 constant private rndInit_ &#x3D; 1 hours;                &#x2F;&#x2F; round timer starts at this</span><br><span class="line">uint256 constant private rndInc_ &#x3D; 30 seconds;              &#x2F;&#x2F; every full key purchased adds this much to the timer</span><br><span class="line">uint256 constant private rndMax_ &#x3D; 24 hours;                &#x2F;&#x2F; max length a round timer can be  </span><br><span class="line">uint256 public airDropPot_;             &#x2F;&#x2F; person who gets the airdrop wins part of this pot</span><br><span class="line">uint256 public airDropTracker_ &#x3D; 0;     &#x2F;&#x2F; incremented each time a &quot;qualified&quot; tx occurs.  used to determine winning air drop</span><br><span class="line">uint256 public rID_;  </span><br><span class="line"></span><br><span class="line">mapping (address &#x3D;&gt; uint256) public pIDxAddr_;          &#x2F;&#x2F; (addr &#x3D;&gt; pID) returns player id by address</span><br><span class="line">mapping (bytes32 &#x3D;&gt; uint256) public pIDxName_;          &#x2F;&#x2F; (name &#x3D;&gt; pID) returns player id by name</span><br><span class="line">mapping (uint256 &#x3D;&gt; F3Ddatasets.Player) public plyr_;   &#x2F;&#x2F; (pID &#x3D;&gt; data) player data</span><br><span class="line">mapping (uint256 &#x3D;&gt; mapping (uint256 &#x3D;&gt; F3Ddatasets.PlayerRounds)) public plyrRnds_;    &#x2F;&#x2F; (pID &#x3D;&gt; rID &#x3D;&gt; data) player round data by player id &amp; round id</span><br><span class="line">mapping (uint256 &#x3D;&gt; mapping (bytes32 &#x3D;&gt; bool)) public plyrNames_; &#x2F;&#x2F; (pID &#x3D;&gt; name &#x3D;&gt; bool) list of names a player owns.  (used so you can change your display name amongst any name you own)</span><br><span class="line"></span><br><span class="line">mapping (uint256 &#x3D;&gt; F3Ddatasets.Round) public round_;   &#x2F;&#x2F; (rID &#x3D;&gt; data) round data</span><br><span class="line">mapping (uint256 &#x3D;&gt; mapping(uint256 &#x3D;&gt; uint256)) public rndTmEth_;      &#x2F;&#x2F; (rID &#x3D;&gt; tID &#x3D;&gt; data) eth in per team, by round id and team id</span><br><span class="line"></span><br><span class="line">mapping (uint256 &#x3D;&gt; F3Ddatasets.TeamFee) public fees_;          &#x2F;&#x2F; (team &#x3D;&gt; fees) fee distribution by team</span><br><span class="line">mapping (uint256 &#x3D;&gt; F3Ddatasets.PotSplit) public potSplit_;     &#x2F;&#x2F; (team &#x3D;&gt; fees) pot split distribution by team</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¤§éƒ¨åˆ†éƒ½å¯ä»¥é€šè¿‡ å˜é‡å çŒœå‡ºä¸ªå¤§æ¦‚, å®åœ¨ä¸è¡Œå¯ä»¥æœç´¢å¤§è‡´çœ‹ä¸€ä¸‹å“ªé‡Œç”¨äº†, ç»“åˆçš„å…ˆçœ‹ä¸€ä¸‹, å…¶ä»–éƒ½æ˜¯å„ç§æ•°æ®, æ²¡å•¥å¤æ‚çš„, è¿™é‡Œå°±ä¸»è¦çœ‹ä¸‹ fees_ å’Œ potSplit_</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Team allocation percentages</span><br><span class="line">&#x2F;&#x2F; (F3D, P3D) + (Pot , Referrals, Community)</span><br><span class="line">    &#x2F;&#x2F; Referrals &#x2F; Community rewards are mathematically designed to come from the winner&#39;s share of the pot.</span><br><span class="line">fees_[0] &#x3D; F3Ddatasets.TeamFee(30,6);   &#x2F;&#x2F;50% to pot, 10% to aff, 2% to com, 1% to pot swap, 1% to air drop pot</span><br><span class="line">fees_[1] &#x3D; F3Ddatasets.TeamFee(43,0);   &#x2F;&#x2F;43% to pot, 10% to aff, 2% to com, 1% to pot swap, 1% to air drop pot</span><br><span class="line">fees_[2] &#x3D; F3Ddatasets.TeamFee(56,10);  &#x2F;&#x2F;20% to pot, 10% to aff, 2% to com, 1% to pot swap, 1% to air drop pot</span><br><span class="line">fees_[3] &#x3D; F3Ddatasets.TeamFee(43,8);   &#x2F;&#x2F;35% to pot, 10% to aff, 2% to com, 1% to pot swap, 1% to air drop pot</span><br><span class="line">    </span><br><span class="line">&#x2F;&#x2F; how to split up the final pot based on which team was picked</span><br><span class="line">&#x2F;&#x2F; (F3D, P3D)</span><br><span class="line">potSplit_[0] &#x3D; F3Ddatasets.PotSplit(15,10);  &#x2F;&#x2F;48% to winner, 25% to next round, 2% to com</span><br><span class="line">potSplit_[1] &#x3D; F3Ddatasets.PotSplit(25,0);   &#x2F;&#x2F;48% to winner, 25% to next round, 2% to com</span><br><span class="line">potSplit_[2] &#x3D; F3Ddatasets.PotSplit(20,20);  &#x2F;&#x2F;48% to winner, 10% to next round, 2% to com</span><br><span class="line">potSplit_[3] &#x3D; F3Ddatasets.PotSplit(30,10);  &#x2F;&#x2F;48% to winner, 10% to next round, 2% to com</span><br></pre></td></tr></table></figure>

<blockquote>
<p>fees_ å°±æ˜¯ç”¨æ¥å†³å®š ç©å®¶ ä¹° key å, ä¹° key çš„ ether æ€ä¹ˆåˆ†é…, å…¶ä¸­ 2% åŸºé‡‘ä¼š(com) + 1% (otherFomo) + 1% ç©ºæŠ•æ±  + fees_[].p3d % P3D + fees_[].gen % æ”¶ç›Š, 10% ç»™ æ¨èäºº(æ— åˆ™ç»™P3D)<br>æ€»ç»“å°±æ˜¯ 14% å›ºå®š + 86% å¯è®¾å®š, 86% åˆ†3å—( gen+p3d+pot ),æ‰€ä»¥2é˜Ÿæ˜¯56% gen + 10% p3d + 20% pot, å…¶ä»–é˜Ÿä¼ç±»ä¼¼<br>potSplit_ ç±»ä¼¼, å›ºå®šçš„ 48%(win)+2%(com) + 50% å¯è®¾å®š, åˆ†3å—(gen+p3d+nextround), å¦‚2é˜Ÿçš„ 20 gen + 20 p3d + 10 next</p>
</blockquote>
<p>ç„¶åè®²è®²æ‰€æœ‰çš„æ–¹æ³•, ç®€å•çš„å½’ç±»ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°å™¨</span><br><span class="line">isActivated() 			&#x2F;&#x2F;æ‹¦æˆªæ¸¸æˆæœªæ¿€æ´»</span><br><span class="line">isHuman()					&#x2F;&#x2F;å¬è¯´æ‹¦æˆªéäººç±»?</span><br><span class="line">isWithinLimits(eth)		&#x2F;&#x2F;æ‹¦æˆªå¤ªç©·çš„äººå’Œ v ç¥ ???</span><br><span class="line"></span><br><span class="line">ether ä¹°		&#x2F;&#x2F;ä»ä¸åŒåœ°å€è¿›çš„, ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¨èäººæ ‡è¯†, ç¬¬äºŒä¸ªæ˜¯é€‰çš„ team</span><br><span class="line">buyXid(id, team)  	</span><br><span class="line">buyXaddr(addr, team)</span><br><span class="line">buyXname(name, team)</span><br><span class="line"></span><br><span class="line">valuts ä¹°		&#x2F;&#x2F;ä»ä¸åŒåœ°å€è¿›çš„, ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¨èäººæ ‡è¯†, ç¬¬äºŒä¸ªæ˜¯é€‰çš„ team, ç¬¬ä¸‰ä¸ªæ˜¯æ ¹æ® key æ•°é‡è®¡ç®—å‡ºæ¥çš„ eth</span><br><span class="line">reLoadXid(id, team, eth)	</span><br><span class="line">reLoadXaddr(addr, team, eth)</span><br><span class="line">reLoadXname(name, team, eth)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">buyCore  			&#x2F;&#x2F; è¿™é‡Œå°±æ˜¯åˆ¤æ–­äº†ä¸€ä¸‹æœ¬è½®æ˜¯å¦ç»“æŸäº†, ç„¶åç›´æ¥è°ƒç”¨çš„ core,å½“ç„¶ç»“æŸä¼šèµ° endRound</span><br><span class="line">reLoadCore		&#x2F;&#x2F; åŒä¸Š, ç»“æŸçš„åˆ¤æ–­, è¿˜æœ‰å°±æ˜¯å‡å» gen çš„é‡‘é¢, å†è°ƒç”¨ core</span><br><span class="line">core				&#x2F;&#x2F; é™åˆ¶å‰100eth, æ›´æ–° end æ—¶é—´, è¶…è¿‡0.1eth åˆ¤æ–­ç©ºæŠ•, æ›´æ–°ç©å®¶åŠè½®æ¬¡ç­‰æ•°æ®, è°ƒç”¨2ä¸ªåˆ†çº¢æ–¹æ³•</span><br><span class="line">distributeExternal 	&#x2F;&#x2F; ç»™å›ºå®šçš„13% (10% aff,2% com,1% otherFomo) åŠ P3D æ‰“é’±</span><br><span class="line">distributeInternal	&#x2F;&#x2F; ç»™ç©ºæŠ•1% å’Œ gen å’Œ pot æ‰“é’±</span><br><span class="line"></span><br><span class="line">æç°è·‘è·¯</span><br><span class="line">withdraw() 	</span><br><span class="line"></span><br><span class="line">ç»“æŸä¸€è½®</span><br><span class="line">endRound()	&#x2F;&#x2F; pot åˆ†æˆ5åˆ†, win æ‹¿48%, 2%ç»™ com, è¿˜æœ‰ gen, p3d, nextRound åˆ™æ ¹æ®é…ç½®æ¥åˆ†é…, å…¶ä¸­ p3d å’Œä¸‹ä¸€è½®é€»è¾‘æ¯”è¾ƒç®€å•, è€Œ gen æˆ‘è¿˜æ²¡å¤ªæ‡‚, å› ä¸ºæ¶‰åŠåˆ° mask çš„æˆ‘éƒ½æ²¡çœ‹æ˜ç™½( æ²¡æ—¶é—´ç»†çœ‹, å…¨æ˜¯æ•°å­¦, è¦æ…¢æ…¢æ¨ç†åˆ†æ )		</span><br><span class="line"></span><br><span class="line">æ³¨å†Œ name		&#x2F;&#x2F;æ³¨å†Œä¸€ä¸ª name ç”¨äºæ¨å¹¿è·å–ææˆ, ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ name æ ‡è¯†, ç¬¬äºŒä¸ªæ˜¯æ¨èäººçš„æ ‡è¯†, ç¬¬ä¸‰ä¸ªæ˜¯æ˜¯å¦åŒæ­¥åˆ°å…¶ä»–æ¸¸æˆ</span><br><span class="line">registerNameXID(name, id, all) </span><br><span class="line">registerNameXaddr(name, addr, all)</span><br><span class="line">registerNameXname(name, name, all)</span><br><span class="line"></span><br><span class="line">ç©å®¶ä¿¡æ¯ç›¸å…³ , å‰2ä¸ªä¸€èˆ¬æ˜¯ç»™å¤–éƒ¨è°ƒç”¨çš„</span><br><span class="line">receivePlayerInfo			&#x2F;&#x2F;å°†ä¼ å…¥ç©å®¶ä¿¡æ¯å‚¨å­˜</span><br><span class="line">receivePlayerNameList		&#x2F;&#x2F;å‚¨å­˜ç©å®¶çš„æ‰€æœ‰name</span><br><span class="line">determinePID				&#x2F;&#x2F;ç¡®å®šç©å®¶ä¿¡æ¯, è‹¥æ— åˆ™ç”Ÿæˆä¸€ä¸ª pid</span><br><span class="line"></span><br><span class="line">ç©å®¶åˆ†çº¢, keysç›¸å…³</span><br><span class="line">calcUnMaskedEarnings  		&#x2F;&#x2F; å®ç°çœ‹ä¸æ‡‚, ä¸è¿‡æ–¹æ³•ä½œç”¨æ˜¯ç”¨æ¥è®¡ç®—èƒ½æç°çš„æ”¶ç›Š</span><br><span class="line">calcKeysReceived(rid, eth)	&#x2F;&#x2F; æ ¹æ®è½®æ¬¡è¿”å› ç”¨ethèƒ½ä¹°å¤šå°‘ keys</span><br><span class="line">iWantXKeys					&#x2F;&#x2F; æ ¹æ® key æ•°é‡è¿”å›éœ€è¦å¤šå°‘ eth</span><br><span class="line">managePlayer					&#x2F;&#x2F; ç¬¬ x è½®æ—¶å°†ä¸Šä¸€è½®çš„æ”¶ç›Šç§»è‡³æ­¤è½®, ä»…è½®æ¬¡å¼€å§‹åç¬¬ä¸€æ¬¡è´­ä¹°æ‰§è¡Œ</span><br><span class="line">updateGenVault				&#x2F;&#x2F; è®¡ç®—åŠæ›´æ–°æ”¶ç›Š</span><br><span class="line">updateMasks					&#x2F;&#x2F; æ›´æ–°è¢«é”å®šçš„æ”¶ç›Š</span><br><span class="line">withdrawEarnings				&#x2F;&#x2F; è®¡ç®—å¯æç°çš„æ”¶ç›Š</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™ä¹ˆå¤šæ–¹æ³•, æˆ‘ä¹Ÿåªèƒ½åˆ—ä¸ªå¤§è‡´ä½œç”¨å’Œæˆ‘çœ‹çš„æ‡‚çš„é€»è¾‘, å…·ä½“çš„ç»†èŠ‚ç­‰æˆ‘å‚é€å†å‡ºæ–‡ç«   </p>
</blockquote>
<blockquote>
<p>æœ€åæ€»ç»“æ¸¸æˆå¤§è‡´é€»è¾‘ :  ç©å®¶ä¹° keyâ€“&gt; buyXxx(relaodXxx) æ–¹æ³•â€“&gt; xxxCore â€“&gt; core â€“&gt; distributeExternal &amp; distributeInternal â€“&gt; æ¸¸æˆç»“æŸ â€“&gt; ç©å®¶ buy è§¦å‘ endRound â€“&gt; åˆ†äº†é’± pot çš„é’±, éƒ¨åˆ†è½¬å…¥ä¸‹ä¸€è½® â€“&gt; æ¿€æ´»æ–°ä¸€è½® â€“&gt; æ¥ä¸Šæœ€å¼€å§‹ è¿›å…¥å¾ªç¯ !!! å½“ç„¶ä¸­é€”å¯ä»¥æç°è‡ªå·±æ²¡é”ä½çš„æ”¶ç›Š, ä»¥åŠæ³¨å†Œ name æ‹‰äººå•¥çš„. </p>
</blockquote>
<h3 id="å‡ ä¸ªæœ‰æ„æ€çš„ç±»åº“"><a href="#å‡ ä¸ªæœ‰æ„æ€çš„ç±»åº“" class="headerlink" title="å‡ ä¸ªæœ‰æ„æ€çš„ç±»åº“"></a>å‡ ä¸ªæœ‰æ„æ€çš„ç±»åº“</h3><h4 id="MSFun-sol"><a href="#MSFun-sol" class="headerlink" title="MSFun.sol"></a>MSFun.sol</h4><blockquote>
<p>é¦–å…ˆè¯´ä¸‹, è¿™ä¸ªåº“æ˜¯ç”¨æ¥åšå¤šé‡ç­¾åçš„, å•¥æ„æ€å‘¢? å°±æ˜¯ä¸€ä¸ªæ–¹æ³•, å¿…é¡»å¥½å‡ ä¸ª(å¤š)äººåŒæ„æ‰§è¡Œ, æœ€åæ‰ä¼šæ‰§è¡Œ. ç”¨æ³•å¦‚ä¸‹: </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">*                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">*                                â”‚ Setup Instructions â”‚</span><br><span class="line">*                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">* (Step 1) import the library into your contract</span><br><span class="line">* </span><br><span class="line">*    import &quot;.&#x2F;MSFun.sol&quot;;</span><br><span class="line">*</span><br><span class="line">* (Step 2) set up the signature data for msFun</span><br><span class="line">* </span><br><span class="line">*     MSFun.Data private msData;</span><br><span class="line">*                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">*                                â”‚ Usage Instructions â”‚</span><br><span class="line">*                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">* at the beginning of a function</span><br><span class="line">* </span><br><span class="line">*     function functionName() </span><br><span class="line">*     &#123;</span><br><span class="line">*         if (MSFun.multiSig(msData, required signatures, &quot;functionName&quot;) &#x3D;&#x3D; true)</span><br><span class="line">*         &#123;</span><br><span class="line">*             MSFun.deleteProposal(msData, &quot;functionName&quot;);</span><br><span class="line">* </span><br><span class="line">*             &#x2F;&#x2F; put function body here </span><br><span class="line">*         &#125;</span><br><span class="line">*     &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¤§è‡´å°±æ˜¯å…ˆå¯¼åŒ…, ç„¶åå®šä¹‰ä¸€ä¸ª MSFun.data ä½œä¸ºåŒºåˆ†åˆçº¦çš„æ ‡è¯†, ç„¶åå†æ–¹æ³•ä¸­ä½¿ç”¨ if åŒ…å›´, if ç¬¬ä¸€å¥å°±æ˜¯å°†ä¹‹å‰çš„ç­¾åæ¸…ç©º</p>
</blockquote>
<blockquote>
<p>MSFun.multiSig( dataæ ‡è¯†, éœ€è¦ç­¾åçš„æ•°é‡, æ–¹æ³•åç§° )</p>
</blockquote>
<blockquote>
<p>æœ€åè¯´ä¸‹æ­¤ç±»åº“åœ¨ fomo ä¸­çš„æ ·å­: é¦–å…ˆ data ç…§æ—§, è€Œéœ€è¦ç­¾åçš„æ•°é‡æ¥è‡ª teamJust.sol, å®ƒçš„å®šä¹‰æ˜¯æ„é€ æ˜¯åˆå§‹ä¸º1, ä»¥åæ¯ add ä¸€ä¸ª admin æˆ– dev å°±æŠŠå¯¹åº”çš„ requiredSignatures åŠ ä¸€, remove åŒç†, å‡ä¸€. æ‰€ä»¥åœ¨éƒ¨ç½²æ—¶ä¸æ”¹ä»£ç çš„è¯, åªè¦æ»¡è¶³å¯¹åº”çš„èº«ä»½é™åˆ¶, åŠ äº†è¿™ä¸ªMSFun.muitiSig çš„æ–¹æ³•é»˜è®¤æ˜¯ä¸€ä¸ªäººè°ƒç”¨å°±èƒ½æ‰§è¡Œ</p>
</blockquote>
<h4 id="SafeMath-sol"><a href="#SafeMath-sol" class="headerlink" title="SafeMath.sol"></a>SafeMath.sol</h4><blockquote>
<p>è¿™ä¸ªæ²¡å•¥å¥½è¯´çš„, æ“ä½œé‡‘é¢å¿…å¤‡, å¬è¯´ç‹¼äººæ€å°±æ˜¯å°‘äº†è¿™ä¸ªè¢«æ”»å‡»çš„(æ•´å½¢æº¢å‡º), ä¹Ÿè®¸å¯ä»¥ä¸æ‡‚æ€ä¹ˆæ”»å‡», ä½†ä¸€å®šè¦æ‡‚æ€ä¹ˆé˜²èŒƒ, so </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">* @dev Multiplies two numbers, throws on overflow.</span><br><span class="line">*&#x2F;</span><br><span class="line">function mul(uint256 a, uint256 b) </span><br><span class="line">    internal </span><br><span class="line">    pure </span><br><span class="line">    returns (uint256 c) </span><br><span class="line">&#123;</span><br><span class="line">    if (a &#x3D;&#x3D; 0) &#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">    c &#x3D; a * b;</span><br><span class="line">    require(c &#x2F; a &#x3D;&#x3D; b, &quot;SafeMath mul failed&quot;);</span><br><span class="line">    return c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦‚ä½ æ‰€è§, ç®€å•çš„åˆ¤æ–­å³å¯ç¡®ä¿ä¸ä¼šç”±äºæº¢å‡ºå¯¼è‡´æ•°æ®é”™ä¹±</p>
</blockquote>
<h4 id="F3DKeysCalcLong-sol"><a href="#F3DKeysCalcLong-sol" class="headerlink" title="F3DKeysCalcLong.sol"></a>F3DKeysCalcLong.sol</h4><blockquote>
<p>æˆ‘åªèƒ½çŒœåˆ°ä½œç”¨, è‡³äºå®Œå…¨ç†è§£â€¦ æ²¡ä¸Šè¿‡å¤§å­¦çš„æˆ‘ç‘Ÿç‘Ÿå‘æŠ–</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">keysRec(curEth, newEth)			&#x2F;&#x2F; ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯using åçš„è°ƒç”¨æ–¹, ç¬¬äºŒä¸ªå‚æ•°æ˜¯ å‡†å¤‡èŠ±çš„ eth, å¦‚æˆ‘èŠ±0.01 eth , ç”¨ round_[rId].eth.keysRec(0.01 eth); å¾—å‡ºçš„å°±æ˜¯å½“å‰è½®æ¬¡æ—¶0.01eth èƒ½ä¹°å¤šå°‘ä¸ª key, æ³¨æ„è¿”å›çš„ keys å¾ˆå¤§, 1ä¸ª å®é™…ä¸Šæ˜¯ 1e18 å§, </span><br><span class="line">ethRec(curKeys, sellKeys)		&#x2F;&#x2F; åŒä¸Š, è¾“å…¥æƒ³ä¹°çš„ keys æ•°é‡, è¿”å›å½“å‰è½®æ¬¡ keys åŸºæ•°ä¸‹è´­ä¹° keys éœ€è¦èŠ±çš„ eth</span><br><span class="line">keys(eth)						&#x2F;&#x2F; æ ¹æ® eth è®¡ç®—å¯å¾—å¤šå°‘ keys</span><br><span class="line">eth(keys)						&#x2F;&#x2F; æ ¹æ® keys è®¡ç®—éœ€è¦å¤šå°‘ eth</span><br></pre></td></tr></table></figure>

<p>bundle.js ä¸­, iWantKeys é€»è¾‘</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">count = BN(<span class="built_in">parseInt</span>(count) * <span class="number">1e18</span>)</span><br><span class="line"><span class="keyword">let</span> priceQuotation = <span class="keyword">await</span> JUST.Bridges.Browser.contracts.Quick.read(<span class="string">'iWantXKeys'</span>, count)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>keys å’Œ eth åº”è¯¥æ˜¯å¯¹åº”çš„, è€Œ eth çš„å˜åŒ–è§„å¾‹å¦‚æœç”»å›¾çš„è¯åº”è¯¥æ˜¯ æŒ‡æ•°çº§ä¸Šå‡? å¯ä»¥ç”»æˆå‡½æ•°çœ‹çœ‹</p>
</blockquote>
<h2 id="Fomo3D-æºç éƒ¨ç½²æŒ‡å—"><a href="#Fomo3D-æºç éƒ¨ç½²æŒ‡å—" class="headerlink" title="Fomo3D æºç éƒ¨ç½²æŒ‡å—"></a>Fomo3D æºç éƒ¨ç½²æŒ‡å—</h2><blockquote>
<p>ä»£ç åœ¨æˆ‘çš„ gayhub ä¸Š : <a href="https://github.com/gudqs7/fomo3d_truffle" target="_blank" rel="noopener">fomo3d_truffle</a> , ä»¥ä¸‹æ˜¯ README</p>
</blockquote>
<h3 id="éƒ¨ç½²åˆçº¦"><a href="#éƒ¨ç½²åˆçº¦" class="headerlink" title="éƒ¨ç½²åˆçº¦:"></a>éƒ¨ç½²åˆçº¦:</h3><blockquote>
<p>ä¸€å…±éƒ¨ç½²äº†3ä¸ªåˆçº¦, å…¶ä¸­3ä¸ªæ”¶æ¬¾åœ°å€è¢«ç æ‰(æ”¹æˆäº†éƒ¨ç½²è€…çš„åœ°å€), p3d ä¹Ÿç æ‰äº†<br>3ä¸ªåˆçº¦ æˆ‘å·æ‡’æ²¡æœ‰æŠŠåˆçº¦åœ°å€å†™æ­», ç”¨çš„æ˜¯åç»­çš„ set æ–¹æ³•, æ‰€ä»¥å¦‚æœ truffle migrate æœ€åé‚£æ®µæŠ¥é”™äº†, å¯èƒ½æ²¡æœ‰ set æˆåŠŸ, éœ€è¦ç”¨å…¶ä»–æ–¹å¼è°ƒç”¨( truffle console, æˆ–è€… remix ç­‰)<br>åˆçº¦éƒ¨ç½²å®Œ, å¦‚æ— æŠ¥é”™, ç›´æ¥å¤åˆ¶èµ° FoMo3Dlong çš„åœ°å€å°±è¡Œäº†</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm install ganache-cli -g</span><br><span class="line">ganache-cli -l 471238800 -g 1 # å¼€å¯ testrpc åŒæ—¶è®¾å®š gasLimit å’Œ gasPrice</span><br><span class="line">truffle compile</span><br><span class="line">truffle migrate --reset # æ‰§è¡Œå, å¤åˆ¶ FoMo3Dlong: åè·Ÿçš„åœ°å€</span><br><span class="line">#ç›´æ¥è¾“å‡ºæœ€ç»ˆåˆçº¦åœ°å€, å°†ä¸ä¼šæ‰“å°ç¼–è¯‘è¿‡ç¨‹</span><br><span class="line">truffle migrate --reset | grep &#39;FoMo3Dlong: 0x&#39; | awk  &#39;&#123; print $2 &#125;&#39;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ¨èåšæ³•<br>truffle migrate â€“reset &gt; migrate.log<br>cat migrate.log  # æŸ¥çœ‹æœ‰æ— é”™è¯¯, å¦‚åˆçº¦å‡éƒ¨ç½²æˆåŠŸ,ä½†æœ€åæŠ¥é”™, å¯èƒ½æœ‰å‡ ä¸ªèµ‹å€¼æ–¹æ³•æ²¡æœ‰æ‰§è¡Œ(æˆ‘éƒ¨ç½²åˆ° kovan æ—¶å°±å‘ç”Ÿäº†è¿™äº‹,å¯ä»¥å‚è€ƒ migrations/2_deploy_fomo3d.jsé€»è¾‘æ‰‹åŠ¨æ‰§è¡Œ)<br>cat migrate.log | grep â€˜FoMo3Dlong: 0xâ€™ | awk  â€˜{ print $2 }â€™</p>
</blockquote>
<h3 id="éƒ¨ç½²å‰ç«¯"><a href="#éƒ¨ç½²å‰ç«¯" class="headerlink" title="éƒ¨ç½²å‰ç«¯:"></a>éƒ¨ç½²å‰ç«¯:</h3><blockquote>
<p>å‰ç«¯æ²¡æœ‰å¤ªå¤šéœ€è¦æ”¹çš„åœ°æ–¹, è‹¥ä½¿ç”¨è‹±æ–‡ç‰ˆ, å¯å‚è€ƒä¸‹é¢å‘½ä»¤è¡Œä¿®æ”¹åœ°å€æ–¹å¼<br>è‹¥é€‰æ‹© bundle-cn.js è¿™ä¸ªä¸­æ–‡ç‰ˆ, åˆ™è‡ªå·±æ‰¾åˆ°è¦ä¿®æ”¹çš„åœ°æ–¹, æ‰‹åŠ¨ä¿®æ”¹ä¹Ÿè¡Œçš„<br>é¡ºä¾¿è¯´ä¸‹ cn é‡Œé¢è¿˜æ˜¯ kovanæµ‹è¯•ç½‘ç»œçš„é…ç½®, å¦‚éœ€ä½¿ç”¨å¯æŠŠ bundle.js é‡Œé¢çš„æœ¬åœ°é…ç½®æ‹·è´ä¸‹</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd src&#x2F;js</span><br><span class="line">sed -i &quot;&quot; &#39;s&#x2F;&#123;&#123;address&#125;&#125;&#x2F;0x00&#x2F;g&#39; bundle.js # é mac å»é™¤ -i åçš„ &quot;&quot;</span><br><span class="line">cd ..&#x2F;..&#x2F;</span><br><span class="line">npm install &amp; npm run start</span><br></pre></td></tr></table></figure>

<h3 id="æ¸¸æˆæ¿€æ´»"><a href="#æ¸¸æˆæ¿€æ´»" class="headerlink" title="æ¸¸æˆæ¿€æ´»"></a>æ¸¸æˆæ¿€æ´»</h3><blockquote>
<p>åˆšæƒ³åˆ°ä¸€ä¸ªä¸ä¸€å®šé è°±çš„ç®€å•æ–¹å¼, æŠŠ migrations ä¸‹é‚£ä¸ª js é‡Œé¢åŠ ä¸€ä¸ª activate çš„æ–¹æ³•è°ƒç”¨</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install remix-ide -g  # å®‰è£…ä¸ªæœ¬åœ°çš„ remix-ide</span><br><span class="line">remix-ide  #æ³¨æ„æ­¤æ—¶å¤„äºé¡¹ç›®æ ¹ç›®å½•</span><br></pre></td></tr></table></figure>
<blockquote>
<p>OK, æµè§ˆå™¨è®¿é—® <a href="localhost:8080">remix-ide</a>, ç‚¹å‡»å·¦ä¸Šè§’ç¬¬6ä¸ªå›¾æ ‡( Connect to localhost ), å¼¹æ¡†ç»§ç»­ connect</p>
<p>å·¦è¾¹å¤šå‡º localhost, ç‚¹å‡» contracts ä¸‹çš„ FoMo3Dlong.sol æ–‡ä»¶, ctrl + s , è§¦å‘ç¼–è¯‘ , ä¸‹ä¸€æ­¥</p>
<p>ç‚¹å‡»å³è¾¹çš„ä¸Šè¾¹çš„ Run, é€‰æ‹© web3 provider, å¦‚ç«¯å£ä¸å˜, ä¸€è·¯ next, ok, å¾€ä¸‹çœ‹, æœ‰ä¸ªé€‰æ‹© åˆçº¦çš„ select, é€‰ä¸­ FoMo3Dlong, ç„¶ååœ¨ è¾“å…¥æ¡†ä¸­è¾“å…¥ migrate å¾—åˆ°çš„åˆçº¦åœ°å€, ç„¶åç‚¹å‡» At Address</p>
<p>æœ€åç‚¹ä¸‹ åˆçº¦çš„ activate æ–¹æ³•</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://gudqs7.github.io/2020/05/20/%E4%BD%BF%E7%94%A8Electron%E6%89%93%E5%8C%85HTML%E6%88%90EXE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="gudqs7">
      <meta itemprop="description" content="å¿ƒç´¯æ²¡é’±èººå°¸ä¸­">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gudqs7's note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/20/%E4%BD%BF%E7%94%A8Electron%E6%89%93%E5%8C%85HTML%E6%88%90EXE/" class="post-title-link" itemprop="url">ä½¿ç”¨Electronæ‰“åŒ…HTMLæˆEXE</a>
        </h2>

        <div class="post-meta">
			
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-05-20 09:02:46" itemprop="dateCreated datePublished" datetime="2020-05-20T09:02:46+08:00">2020-05-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-01-22 13:39:17" itemprop="dateModified" datetime="2021-01-22T13:39:17+08:00">2021-01-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/electron/" itemprop="url" rel="index"><span itemprop="name">electron</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2020/05/20/%E4%BD%BF%E7%94%A8Electron%E6%89%93%E5%8C%85HTML%E6%88%90EXE/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/20/ä½¿ç”¨Electronæ‰“åŒ…HTMLæˆEXE/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Windows-ä¸‹-æ¨è"><a href="#Windows-ä¸‹-æ¨è" class="headerlink" title="Windows ä¸‹ (æ¨è)"></a>Windows ä¸‹ (æ¨è)</h3><h4 id="ä¸‹è½½-nodejs-å’Œ-git"><a href="#ä¸‹è½½-nodejs-å’Œ-git" class="headerlink" title="ä¸‹è½½ nodejs å’Œ git"></a>ä¸‹è½½ nodejs å’Œ git</h4><blockquote>
<p>ä¸‹è½½ nodejs 32 ä½ msi å®‰è£…åŒ… (<a href="https://npm.taobao.org/mirrors/node/v12.13.1/node-v12.13.1-x86.msi" target="_blank" rel="noopener">https://npm.taobao.org/mirrors/node/v12.13.1/node-v12.13.1-x86.msi</a>)</p>
<p>ä¸‹è½½ git çš„å®‰è£…åŒ… (<a href="https://git-scm.com/download/win" target="_blank" rel="noopener">https://git-scm.com/download/win</a>) (å¯èƒ½è´¼æ…¢, è‡ªè¡Œè§£å†³)</p>
</blockquote>
<h4 id="å®‰è£…-nodejs-åŠ-cnpm"><a href="#å®‰è£…-nodejs-åŠ-cnpm" class="headerlink" title="å®‰è£… nodejs åŠ cnpm"></a>å®‰è£… nodejs åŠ cnpm</h4><blockquote>
<p>é¦–å…ˆå°† node-v12.13.1-x86.msi åŒå‡»å®‰è£…, ä¸€è·¯ next å°±è¡Œäº†</p>
<p>ç„¶åå°† git ä¹Ÿè£…ä¸Š, ä¹Ÿæ˜¯ä¸€è·¯ next, ä¸è¦çŠ¹è±«</p>
</blockquote>
<p>å®‰è£…æ·˜å®cnpm</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<h4 id="ä¸‹è½½-hello-world-é¡¹ç›®"><a href="#ä¸‹è½½-hello-world-é¡¹ç›®" class="headerlink" title="ä¸‹è½½ hello-world é¡¹ç›®"></a>ä¸‹è½½ hello-world é¡¹ç›®</h4><blockquote>
<p> æ‰¾åˆ°ä¸€ä¸ªç©ºç™½æ–‡ä»¶å¤¹, å‡†å¤‡æ”¾ç½®é¡¹ç›®, å³é”® é€‰æ‹© Git bash here, ç„¶åå‘½ä»¤è¡Œä¸­è¾“å…¥: </p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/gudqs7/my-electron-hello-world.git</span><br></pre></td></tr></table></figure>

<p>ä¸‹è½½å¥½å, ä¸è¦å…³é—­çª—å£, ç»§ç»­ä¸‹é¢æ“ä½œ</p>
<h4 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h4><p>åœ¨å‘½ä»¤è¡Œä¸­, è¿›å…¥æ–‡ä»¶å¤¹, è¾“å…¥å‘½ä»¤å®‰è£…ä¾èµ–</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd my-electron-hello-world</span><br><span class="line">cnpm i</span><br></pre></td></tr></table></figure>

<h4 id="è¯•è¿è¡Œä¸‹-App"><a href="#è¯•è¿è¡Œä¸‹-App" class="headerlink" title="è¯•è¿è¡Œä¸‹ App"></a>è¯•è¿è¡Œä¸‹ App</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm run dev</span><br></pre></td></tr></table></figure>

<blockquote>
<p>çœ‹åˆ°ä¸€ä¸ªå®½1200 é«˜ 850 çš„çª—å£é‡Œé¢å†™ç€ä¸€å¥ <code>Hello world</code> æ²¡æœ‰! é‚£å°±æˆäº†.</p>
</blockquote>
<h4 id="æ‰“åŒ…-exe"><a href="#æ‰“åŒ…-exe" class="headerlink" title="æ‰“åŒ… exe"></a>æ‰“åŒ… exe</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">ä¸€æ­¥åˆ°ä½, ç”Ÿæˆ xxx setup.exe å®‰è£…åŒ…. (æ¨è)</span></span><br><span class="line">cnpm run dist</span><br><span class="line"><span class="meta">#</span><span class="bash">ä»…ç”Ÿæˆæ–‡ä»¶å¤¹, å†…å« xxx.exe å¯å¯åŠ¨, å¾ˆå¤šèµ„æºæ–‡ä»¶, éœ€è¦è‡ªå·±äºŒæ¬¡æ‰“åŒ…</span></span><br><span class="line">cnpm run pack</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ‰“åŒ…æˆåŠŸå, å¯åœ¨dist æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ° exe åç§° Setup 1.0.1.exe, å¤åˆ¶æ‹¿èµ°å³å¯</p>
</blockquote>
<h3 id="MacOS-ä¸‹"><a href="#MacOS-ä¸‹" class="headerlink" title="MacOS ä¸‹"></a>MacOS ä¸‹</h3><h4 id="å®‰è£…-brew-åŠ-è®¾ç½®-brew-æºé•œåƒä¸ºæ¸…åæº"><a href="#å®‰è£…-brew-åŠ-è®¾ç½®-brew-æºé•œåƒä¸ºæ¸…åæº" class="headerlink" title="å®‰è£… brew åŠ è®¾ç½® brew æºé•œåƒä¸ºæ¸…åæº"></a>å®‰è£… brew åŠ è®¾ç½® brew æºé•œåƒä¸ºæ¸…åæº</h4><p>è‡ªè¡Œè°·æ­Œ, ä¸å»ºè®®ç™¾åº¦</p>
<h4 id="å®‰è£…-nodejs-å’Œ-cnpm-æ·˜å®é•œåƒ-npm"><a href="#å®‰è£…-nodejs-å’Œ-cnpm-æ·˜å®é•œåƒ-npm" class="headerlink" title="å®‰è£… nodejs å’Œ cnpm (æ·˜å®é•œåƒ npm)"></a>å®‰è£… nodejs å’Œ cnpm (æ·˜å®é•œåƒ npm)</h4><p>æ‰“å¼€ç»ˆç«¯(å»ºè®®ä½¿ç”¨ iTerm2), è¾“å…¥å‘½ä»¤: </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install nodejs</span><br><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<h4 id="ä¸‹è½½-hello-world-é¡¹ç›®-1"><a href="#ä¸‹è½½-hello-world-é¡¹ç›®-1" class="headerlink" title="ä¸‹è½½ hello-world é¡¹ç›®"></a>ä¸‹è½½ hello-world é¡¹ç›®</h4><blockquote>
<p> æ‰¾åˆ°ä¸€ä¸ªç©ºç™½æ–‡ä»¶å¤¹, å‡†å¤‡æ”¾ç½®é¡¹ç›®, ç„¶åè¿›å‘½ä»¤è¡Œå¹¶ cd åˆ°è¿™ä¸ªç›®å½•ä¸‹, è¾“å…¥å‘½ä»¤: </p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/gudqs7/my-electron-hello-world.git</span><br></pre></td></tr></table></figure>

<p>ä¸‹è½½å¥½å, ä¸è¦å…³é—­çª—å£, ç»§ç»­ä¸‹é¢æ“ä½œ</p>
<h4 id="å®‰è£…ä¾èµ–-1"><a href="#å®‰è£…ä¾èµ–-1" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h4><p>åœ¨å‘½ä»¤è¡Œä¸­, è¿›å…¥æ–‡ä»¶å¤¹, è¾“å…¥å‘½ä»¤å®‰è£…ä¾èµ–</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd my-electron-hello-world</span><br><span class="line">cnpm i</span><br></pre></td></tr></table></figure>

<h4 id="è¯•è¿è¡Œä¸‹-App-1"><a href="#è¯•è¿è¡Œä¸‹-App-1" class="headerlink" title="è¯•è¿è¡Œä¸‹ App"></a>è¯•è¿è¡Œä¸‹ App</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm run dev</span><br></pre></td></tr></table></figure>

<blockquote>
<p>çœ‹åˆ°ä¸€ä¸ªå®½1200 é«˜ 850 çš„çª—å£é‡Œé¢å†™ç€ä¸€å¥ <code>Hello world</code> æ²¡æœ‰! é‚£å°±æˆäº†.</p>
</blockquote>
<h4 id="æ‰“åŒ…æˆ-Mac-App"><a href="#æ‰“åŒ…æˆ-Mac-App" class="headerlink" title="æ‰“åŒ…æˆ Mac App"></a>æ‰“åŒ…æˆ Mac App</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">ç”Ÿæˆ dmg æ–‡ä»¶, æ–¹ä¾¿åˆ†äº«, ä¸‹è½½</span></span><br><span class="line">cnpm run dist</span><br><span class="line"><span class="meta">#</span><span class="bash">ç”Ÿæˆå¯ç›´æ¥è¿è¡Œçš„ App, ä½†å®é™…ä¸Šæ˜¯ä¸ªæ–‡ä»¶å¤¹, ä¸æ–¹ä¾¿ç»™ä»–äººä¸‹è½½</span></span><br><span class="line">cnpm run pack</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ‰“åŒ…å‘½ä»¤æ‰§è¡Œå®Œæ¯•, æ£€æŸ¥ dist ç›®å½•å³å¯</p>
</blockquote>
<h4 id="æ‰“åŒ…æˆ-windows-exe"><a href="#æ‰“åŒ…æˆ-windows-exe" class="headerlink" title="æ‰“åŒ…æˆ windows exe"></a>æ‰“åŒ…æˆ windows exe</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm run win32</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™ä¸ªå‘½ä»¤æˆ‘è‡ªå·±éƒ½ä¸‹è½½åŠå¤©, å®åœ¨æ˜¯ä¹…å•Š. è€Œä¸”ç”±äºè¦ä½¿ç”¨ wine å•¥çš„è¿›è¡Œæ‰“åŒ…, ä¼¼ä¹å¤±è´¥ç‡å¾ˆé«˜å•Šâ€¦â€¦ å»ºè®®è¯•è¯• yarn(å®˜æ–¹å»ºè®®)</p>
<p>ä¸ªäººæ¨èç›´æ¥ç”¨ windows æ“ä½œç³»ç»Ÿæä¸€ä¸‹å°±è¡Œäº†</p>
</blockquote>
<h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">platform = win32  # è¿™ä¸ªå­—æ®µçš„å€¼, ä½¿ç”¨ --win å‘½ä»¤å¯æŒ‡å®š, é»˜è®¤ä¸ç”µè„‘ç¯å¢ƒä¸€è‡´</span><br><span class="line">arch=ia32         # è¿™ä¸ªå­—æ®µçš„å€¼, ä½¿ç”¨--ia32 æˆ– --x64 æŒ‡å®š, å»ºè®® ia32 çœçš„ 32 ä½ç³»ç»Ÿä¸å…¼å®¹ 64 ä½çš„ç¨‹åº</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¦å¤–å¤šè¯´ä¸€å¥, è‹¥ä½¿ç”¨ 32 ä½ windows ç³»ç»Ÿ, cnpm i ä¸‹è½½ä¾èµ–æ—¶å°±ä¼šä¸‹è½½ electron çš„ä¸€ä¸ª sdk(ç”¨äºç”Ÿæˆ exe çš„æ ¸å¿ƒæ–‡ä»¶), è¿™ä¸ª sdk æ˜¯åŒºåˆ†å¹³å°å’Œcpuæ¶æ„çš„. ç”±äºç”¨å‘½ä»¤è¡ŒæŒ‡å®šå¹³å°å’Œ cpu æ¶æ„ä¸ä»…éº»çƒ¦, è€Œä¸”ä»–ä½¿ç”¨çš„ä¸‹è½½åœ°å€, ç½‘é€Ÿåæ…¢(ææ…¢), è€Œ cnpm i ä¸‹è½½æ—¶åˆ™ç›¸å¯¹è¾ƒå¿«(æ„Ÿè°¢é©¬äº‘), æ‰€ä»¥æ¨èé€‰æ‹©é€‚å½“çš„æ“ä½œç³»ç»Ÿæ¥æ‰“åŒ…, ä¼šæ¯”è¾ƒå¿«.</p>
</blockquote>
<ul>
<li><p>å¦å¤–, å°è¯•ä½¿ç”¨ <code>electron .</code> è¿™ä¸ªå‘½ä»¤åœ¨ <code>windows</code> ä¸Šæ˜¯è·‘ä¸æ¥çš„, ä½†å°†å…¶åŠ å…¥åˆ° package.json ä¸­çš„ script ç„¶åä½¿ç”¨ <code>cnpm run xxx</code> å°±æ²¡é—®é¢˜äº†.</p>
</li>
<li><p>é€å¤§å®¶ä¸€ä¸ªç½‘å€, åœ¨çº¿ ico è½¬æ¢, æ”¯æŒ256x256 (<a href="https://www.aconvert.com/cn/icon/png-to-ico/" target="_blank" rel="noopener">https://www.aconvert.com/cn/icon/png-to-ico/</a>)</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://gudqs7.github.io/2020/05/20/design-partten-memo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="gudqs7">
      <meta itemprop="description" content="å¿ƒç´¯æ²¡é’±èººå°¸ä¸­">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gudqs7's note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/20/design-partten-memo/" class="post-title-link" itemprop="url">Design-Patterns</a>
        </h2>

        <div class="post-meta">
			
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-05-20 08:48:14" itemprop="dateCreated datePublished" datetime="2020-05-20T08:48:14+08:00">2020-05-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-01-22 13:39:17" itemprop="dateModified" datetime="2021-01-22T13:39:17+08:00">2021-01-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Design-Patterns/" itemprop="url" rel="index"><span itemprop="name">Design-Patterns</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2020/05/20/design-partten-memo/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/20/design-partten-memo/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="è®¾è®¡æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼</h2><h3 id="7-å¤§åŸåˆ™"><a href="#7-å¤§åŸåˆ™" class="headerlink" title="7 å¤§åŸåˆ™"></a>7 å¤§åŸåˆ™</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å•ä¸€èŒè´£: æ¯ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªèŒè´£(æˆ–æ¯ä¸ªæ–¹æ³•)</span><br><span class="line">æ¥å£éš”ç¦»: ä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Š</span><br><span class="line">ä¾èµ–å€’è½¬: é«˜å±‚æ¨¡å—ä¸åº”ä¾èµ–ä½å±‚æ¨¡å—, äºŒè€…éƒ½åº”è¯¥ä¾èµ–æ¥å£è€Œéç»†èŠ‚. ç»†èŠ‚ä¾èµ–æŠ½è±¡, é¢å‘æ¥å£ç¼–ç¨‹</span><br><span class="line">é‡Œå¼æ›¿æ¢: å­ç±»åº”è¯¥åšåˆ°å¯ä»¥æ›¿æ¢çˆ¶ç±», åŠå­ç±»åº”å°½é‡ä¸é‡å†™çˆ¶ç±»æ–¹æ³•.</span><br><span class="line">å¼€é—­åŸåˆ™: å¯¹æä¾›è€…è€Œå·²å¯ä»¥ä¿®æ”¹, å¯¹ä½¿ç”¨è€…è€Œè¨€ä¸éœ€è¦ä¿®æ”¹(å³ä»£ç å…¼å®¹æ€§), å°½é‡ä½¿ç”¨æ‰©å±•å¢åŠ åŠŸèƒ½, è€Œéä¿®æ”¹åŸæœ‰ç±»</span><br><span class="line">è¿ªç±³ç‰¹æ³•åˆ™: ä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡ä¿æŒæœ€å°äº†è§£(æœ€å°‘çŸ¥é“åŸåˆ™)</span><br><span class="line">åˆæˆå¤ç”¨åŸåˆ™: ä¸€ä¸ªç±»ä½¿ç”¨å¦ä¸€ä¸ªç±»çš„ä»£ç (æ–¹æ³•), å°½é‡ä½¿ç”¨åˆæˆ, è€Œä¸æ˜¯ç»§æ‰¿</span><br></pre></td></tr></table></figure>



<h3 id="åˆ›å»ºå‹"><a href="#åˆ›å»ºå‹" class="headerlink" title="åˆ›å»ºå‹"></a>åˆ›å»ºå‹</h3><h4 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">åŸç†: ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›è¯¥å®ä¾‹çš„å…¨å±€è®¿é—®ç‚¹ã€‚</span><br><span class="line"></span><br><span class="line">é¥¿æ±‰å¼:</span><br><span class="line">	é™æ€å¸¸é‡</span><br><span class="line">	é™æ€ä»£ç å—</span><br><span class="line">æ‡’æ±‰å¼:</span><br><span class="line">	ç›´æ¥åˆ¤æ–­(çº¿ç¨‹ä¸å®‰å…¨)</span><br><span class="line">	æ–¹æ³•åŠ  synchronized(çº¿ç¨‹å®‰å…¨, æ•ˆç‡ä½)</span><br><span class="line">	åˆ¤æ–­åå†åŒæ­¥(é”™è¯¯å†™æ³•)</span><br><span class="line">	åŒé‡åˆ¤æ–­(if-åŒæ­¥-if) (æ¨èå†™æ³•)</span><br><span class="line">	åŒ¿åé™æ€å†…éƒ¨ç±» (ç®€å•, æ¨è)</span><br><span class="line">	æšä¸¾(ç®€å•, ä½†å¯¹è±¡æ–¹æ³•å†™åœ¨æšä¸¾ä¸­, ç•¥æœ‰ä¸é€‚)</span><br><span class="line">	</span><br><span class="line">ç¤ºä¾‹:</span><br><span class="line">	java.lang.Runtime#getRuntime()</span><br><span class="line">	java.awt.Desktop#getDesktop()</span><br></pre></td></tr></table></figure>

<h4 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">åŸç†: ä½¿ç”¨åŸå‹å®ä¾‹æŒ‡å®šè¦åˆ›å»ºå¯¹è±¡çš„ç±»å‹ï¼Œé€šè¿‡å¤åˆ¶è¿™ä¸ªåŸå‹æ¥åˆ›å»ºæ–°å¯¹è±¡.</span><br><span class="line">ç¤ºä¾‹: Java çš„ Object å¯¹è±¡çš„ clone æ–¹æ³•, java.util.Arrays.ArrayList#toArray()</span><br><span class="line"></span><br><span class="line">æµ…æ‹·è´: ä»…å¯¹åŸºç¡€ç±»å‹åŠå­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µæ‹·è´å€¼</span><br><span class="line">æ·±æ‹·è´: åŒæ—¶å¯¹å¼•ç”¨ç±»å‹(å¦‚æ•°ç»„,å¯¹è±¡) ä¹Ÿè¿›è¡Œæ‹·è´</span><br><span class="line"></span><br><span class="line">æ·±æ‹·è´å®ç°:</span><br><span class="line">1.é‡å†™ clone, ä¸€ä¸€å¤„ç†æ¯ä¸ªå¼•ç”¨å¯¹è±¡(è°ƒç”¨å¯¹è±¡çš„ clone), éº»çƒ¦, ä¸”è‹¥å¯¹è±¡ä¹‹é—´å…³ç³»å¤æ‚, å…¶ä¸­ä¸€ä¸ªæœªå®ç°æ·±æ‹·è´åˆ™å¯¼è‡´ bug.</span><br><span class="line">2.åˆ©ç”¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–, å¦‚ Json, æˆ– Java è‡ªå¸¦çš„åºåˆ—åŒ–æ–¹å¼(äºŒè¿›åˆ¶)</span><br></pre></td></tr></table></figure>

<h4 id="åˆ›å»ºè€…æ¨¡å¼-ç”Ÿæˆå™¨æ¨¡å¼"><a href="#åˆ›å»ºè€…æ¨¡å¼-ç”Ÿæˆå™¨æ¨¡å¼" class="headerlink" title="åˆ›å»ºè€…æ¨¡å¼(ç”Ÿæˆå™¨æ¨¡å¼)"></a>åˆ›å»ºè€…æ¨¡å¼(ç”Ÿæˆå™¨æ¨¡å¼)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å°è£…ä¸€ä¸ªå¯¹è±¡çš„æ„é€ è¿‡ç¨‹ï¼Œå¹¶å…è®¸æŒ‰æ­¥éª¤æ„é€ .</span><br><span class="line">	è‹¥å¯¹è±¡çš„ç”Ÿæˆè¿‡äºå¤æ‚(å­—æ®µæå¤šä¸”èµ‹å€¼è¿˜æœ‰ä¾èµ–å…³ç³», éœ€è¦é¡ºåºè°ƒç”¨), åˆ™å¯å°†èµ‹å€¼è¿‡ç¨‹å°è£…æˆä¸€ä¸ªbuild(), å¹¶æ”¾åˆ°ä¸€ä¸ª Builder ç±»ä¸­. æ­¤ç±»å¯¹å¤–æä¾›å„ä¸ªå­—æ®µçš„èµ‹å€¼æ–¹æ³•å¹¶å…ˆä¿å­˜èµ·æ¥, ç›´åˆ°è°ƒç”¨ build(), æ­¤æ–¹æ³•è¿”å›å¯¹è±¡å®ä¾‹. </span><br><span class="line">	ä½¿ç”¨æ­¤æ¨¡å¼, è°ƒç”¨è€…æ— éœ€å…³æ³¨æ„å»ºè¿‡ç¨‹, åªéœ€è®¾ç½®è‡ªå·±æƒ³è¦çš„å€¼, ç„¶åè°ƒç”¨ build() å³å¯å¾—åˆ°å¯¹è±¡å®ä¾‹. ä¸”è‹¥å¢åŠ æˆ–ä¿®æ”¹å­—æ®µ, æ„é€ è¿‡ç¨‹å˜åŒ–, è°ƒç”¨è€…æ— æ„ŸçŸ¥, æ— éœ€ä¿®æ”¹ä»£ç . ç¬¦åˆå¼€é—­åŸåˆ™.</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹: StringBuilder, ä¸€äº›æ¡†æ¶çš„ ConfigurationBuilder(å¦‚ xmpp), ç”¨äºæ„å»ºé…ç½®.</span><br></pre></td></tr></table></figure>

<h4 id="ç®€å•å·¥å‚æ¨¡å¼"><a href="#ç®€å•å·¥å‚æ¨¡å¼" class="headerlink" title="ç®€å•å·¥å‚æ¨¡å¼"></a>ç®€å•å·¥å‚æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	åœ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ä¸å‘å®¢æˆ·æš´éœ²å†…éƒ¨ç»†èŠ‚ï¼Œå¹¶æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„é€šç”¨æ¥å£ã€‚</span><br><span class="line">	æ­¤æ¨¡å¼å¯é¿å…å¤šä¸ªè°ƒç”¨è€…åˆ›å»ºå¯¹è±¡æ—¶åˆ¤æ–­åˆ›å»ºå“ªä¸ªå­ç±»çš„é‡å¤ä»£ç , ä¸”è‹¥å¤šä¸€ä¸ªå­ç±», è°ƒç”¨è€…æ— éœ€ä¿®æ”¹ä»£ç .</span><br><span class="line">	</span><br><span class="line">ç¤ºä¾‹: Spring ApplicationContext çš„ getBean æ–¹æ³•.</span><br></pre></td></tr></table></figure>

<h4 id="å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="å·¥å‚æ–¹æ³•æ¨¡å¼"></a>å·¥å‚æ–¹æ³•æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†ç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–å“ªä¸ªç±»ã€‚å·¥å‚æ–¹æ³•æŠŠå®ä¾‹åŒ–æ“ä½œæ¨è¿Ÿåˆ°å­ç±»ã€‚</span><br><span class="line">	æ­¤æ¨¡å¼è§£å†³äº†ç®€å•å·¥å‚æ¯å¢åŠ ä¸€ä¸ªå­ç±»éœ€è¦ä¿®æ”¹å·¥å‚ç±»çš„é—®é¢˜.</span><br><span class="line">	æ­¤æ¨¡å¼å­˜åœ¨é—®é¢˜, è‹¥æ–°å¢ä¸€ä¸ªå­ç±», éœ€åŒæ—¶æ–°å¢ä¸€ä¸ªå­ç±»å·¥å‚, ç³»ç»Ÿå¤æ‚æ€§æ›´é«˜.</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹: Calendar, NumberFormat</span><br></pre></td></tr></table></figure>

<h4 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	æä¾›ä¸€ä¸ªæ¥å£ï¼Œç”¨äºåˆ›å»º ç›¸å…³çš„å¯¹è±¡å®¶æ—.</span><br><span class="line">  åŒä¸Š, ç”±å­ç±»å·¥å‚å†³å®šåˆ›å»ºå“ªäº›å¯¹è±¡.</span><br><span class="line">	æ­¤æ¨¡å¼æ˜¯å·¥å‚æ–¹æ³•çš„å‡çº§ç‰ˆ, ä¸åŒä¹‹å¤„åœ¨äºå®ƒåŒæ—¶åˆ›å»ºå¤šä¸ªç§ç±»çš„å¯¹è±¡(å·¥å‚ç±»å…·æœ‰å¤šä¸ªæ–¹æ³•).</span><br><span class="line">	æ­¤æ¨¡å¼å°†ä¸€ä¸ªå¯¹è±¡å®¶æ—çš„æ–°å»ºé›†åˆåˆ°ä¸€ä¸ªå·¥å‚ç±»åˆ›å»ºç®¡ç†, è¿™äº›å¯¹è±¡å®¶æ—ç›¸äº’ä¹‹é—´ä¸€èˆ¬æœ‰å…³è”, åœ¨åˆ›å»ºæ—¶å°±å¯ä»¥å¤„ç†è¿™äº›å…³è”. ä¸”å¯¹äº 2 ä¸ªå­ç±»å·¥å‚, ä¸€èˆ¬å¯ä»¥æ— ç¼åˆ‡æ¢, ä½¿å¾—ä¿®æ”¹ä»£ç æä¸ºæ–¹ä¾¿(å³æ¢ä¸€ä¸ªå­ç±»å·¥å‚).</span><br><span class="line">	æ­¤æ¨¡å¼åœ¨æ–°å¢ä¸€ä¸ªå¯¹è±¡å®¶æ—çš„æˆå‘˜æ—¶éå¸¸éº»çƒ¦(å³æ‰€æœ‰å·¥å‚ç±»éœ€è¦æ–°å¢ä¸€ä¸ªæ–¹æ³•), ä½†å†æ–°å¢ä¸€ç±»å¯¹è±¡å®¶æ—æ—¶æ¯”è¾ƒç®€å•(å³æ–°å¢ä¸€ä¸ªå­ç±»å·¥å‚).</span><br></pre></td></tr></table></figure>



<h3 id="ç»“æ„å‹"><a href="#ç»“æ„å‹" class="headerlink" title="ç»“æ„å‹"></a>ç»“æ„å‹</h3><h4 id="é€‚é…å™¨æ¨¡å¼"><a href="#é€‚é…å™¨æ¨¡å¼" class="headerlink" title="é€‚é…å™¨æ¨¡å¼"></a>é€‚é…å™¨æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	æŠŠä¸€ä¸ªæ¥å£è½¬æ¢æˆå¦ä¸€ä¸ªç”¨æˆ·éœ€è¦çš„æ¥å£.</span><br><span class="line">	å®šä¹‰ä¸€ä¸ªç±», å®ç°ç”¨æˆ·éœ€è¦çš„æ¥å£, å¹¶èšåˆä¸€ä¸ªéœ€è¦è½¬æ¢çš„æ¥å£å¯¹è±¡, åœ¨é‡å†™çš„æ–¹æ³•(ç”¨æˆ·éœ€è¦çš„æ–¹æ³•)ä¸­è°ƒç”¨èšåˆçš„å¯¹è±¡çš„æ–¹æ³•, è‹¥éœ€è¦è¿”å›å€¼, ä¸”è¿”å›å€¼ç±»å‹ä¸ä¸€è‡´, åˆ™è¿˜éœ€è¦åœ¨æ–¹æ³•ä¸­å¤„ç†ä¸€ç•ª, ç„¶åè¿”å›. è¿™ä¸ªè¿‡ç¨‹å«åšé€‚é….è¿™ä¸ªç±»å«åšé€‚é…å™¨ç±».</span><br><span class="line">	ä½¿ç”¨æ­¤æ¨¡å¼å¯å¯¹ä¸€äº›è€æ—§æ¥å£é€‚é…å…¼å®¹.</span><br><span class="line">	</span><br><span class="line">ç¤ºä¾‹: java.util.Arrays#asList() å°†æ•°ç»„é€‚é…æˆ List, Spring MVCçš„ HandlerAdapter</span><br></pre></td></tr></table></figure>

<h4 id="è£…é¥°è€…æ¨¡å¼"><a href="#è£…é¥°è€…æ¨¡å¼" class="headerlink" title="è£…é¥°è€…æ¨¡å¼"></a>è£…é¥°è€…æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å°†ä¸€ä¸ªæˆ–å¤šä¸ªåŠŸèƒ½(æ–¹æ³•)åŠ¨æ€çš„æ–°å¢åˆ°ä¸€ä¸ªç±»ä¸­.</span><br><span class="line">	æŠŠéœ€è¦æ–°å¢åŠŸèƒ½ç±»ç§°ä¸º A,å®šä¹‰ä¸€ä¸ªç±»B,å®ç°Açš„ä¸Šå±‚æ¥å£, å¹¶èšåˆä¸€ä¸ªA çš„å®ä¾‹å¯¹è±¡, Bç±»å®ç°çš„æ¥å£ä¸­, å¯¹å…¶ä»–ä¸å…³å¿ƒçš„æ–¹æ³•ç›´æ¥è°ƒç”¨èšåˆçš„å¯¹è±¡çš„æ–¹æ³•. å¯¹äºå…³å¿ƒçš„æ–¹æ³•åˆ™å¯ä»¥åœ¨è°ƒç”¨å‰åè¿›è¡ŒåŠ æ–™å¤„ç†(å¦‚ä¸€ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªæ•°, å¯ä»¥åœ¨åŸæ¥çš„è¿”å›å€¼ä¸Šä¹˜ä»¥ 2), åŒæ—¶, Bç±»ä¹Ÿå¯ä»¥æ–°å¢ä¸€äº›å…¶ä»–æ–¹æ³•, è¿™äº›æ–¹æ³•å°±æ˜¯å¤šå‡ºçš„åŠŸèƒ½. Bç±»å°±æ˜¯è£…é¥°è€…ç±», Aå°±æ˜¯è¢«è£…é¥°ç±».</span><br><span class="line">	æ­¤æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯, è£…é¥°ç±»ä¹Ÿå¯ä»¥å½“åšè¢«è£…é¥°ç±», ç„¶åå†æ¥ä¸€å±‚è£…é¥°, å¯ä»¥æ— é™çš„è£…é¥°.</span><br><span class="line">	</span><br><span class="line">ç¤ºä¾‹: java IO æµ</span><br></pre></td></tr></table></figure>

<h4 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	æ§åˆ¶å…¶ä»–å¯¹è±¡çš„è®¿é—®(æ–¹æ³•çº§), å°†ä¸€äº›å‰ç½®æˆ–åç½®çš„å¤„ç†, é€šè¿‡ä»£ç†å¯¹è±¡æ³¨å…¥åˆ°ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•å‰å. é¢å‘åˆ‡é¢ç¼–ç¨‹.</span><br><span class="line"></span><br><span class="line">ç±»å‹:</span><br><span class="line">	é™æ€ä»£ç†: å®šä¹‰ä¸€ä¸ªä»£ç†ç±»å®ç°ç›®æ ‡å¯¹è±¡çš„ä¸Šå±‚æ¥å£, å¹¶èšåˆä¸€ä¸ªç›®æ ‡å¯¹è±¡, é‡å†™æ–¹æ³•æ—¶å°†å‰ç½®åç½®å¤„ç†åŠ ä¸Š.</span><br><span class="line">	åŠ¨æ€ä»£ç†: </span><br><span class="line">		JDK åŠ¨æ€ä»£ç†: éœ€è¦ç›®æ ‡å¯¹è±¡æœ‰ä¸Šå±‚æ¥å£(è‡ªç„¶æ¥å£å†…çš„æ–¹æ³•æ‰å¯ä»¥ä»£ç†) </span><br><span class="line">			ä½¿ç”¨java.lang.reflect.Proxy#getProxyClass</span><br><span class="line">		CGLIB åŠ¨æ€ä»£ç†: æ˜¯ä¸ªç±»å°±è¡Œ. å®ç°åŸç†æ˜¯ ASM æ¡†æ¶åŠ¨æ€ç”Ÿæˆç›®æ ‡å¯¹è±¡ç±»çš„å­ç±»å­—èŠ‚ç , ç„¶åé€šè¿‡åå°„ç”Ÿæˆä»£ç†å¯¹è±¡.</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹: Spring AOP</span><br></pre></td></tr></table></figure>

<h4 id="æ¡¥æ¥æ¨¡å¼"><a href="#æ¡¥æ¥æ¨¡å¼" class="headerlink" title="æ¡¥æ¥æ¨¡å¼"></a>æ¡¥æ¥æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å°†æŠ½è±¡ä¸å®ç°åˆ†ç¦»å¼€æ¥ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚</span><br><span class="line">	æ¡¥æ¥çš„å«ä¹‰æ˜¯, ä¸€ä¸ªæ¡¥, æ”¾åœ¨å“ªé‡Œéƒ½æœ‰æ¡¥çš„ 2 è¾¹, æ¡¥çš„ 2 è¾¹å¯ä»¥å˜åŒ–, ä½†æ¡¥å§‹ç»ˆä¸å˜. æ­¤å¤„, æ¡¥ä»£è¡¨ä¸€ä¸ªæ“ä½œ(å¦‚æ‰‹æœºä¸Šè¿è¡Œè½¯ä»¶), 2 è¾¹ä»£è¡¨ ä¸€ä¸ªæ“ä½œçš„ 2 ä¸ªç»´åº¦(å¦‚æ‰‹æœºå’Œè½¯ä»¶). åŒæ—¶, æ¡¥æ¥åçš„æ“ä½œä¹Ÿå¯ä»¥è§†ä¸ºä¸€ä¸ªç»´åº¦, ä¸å¦ä¸€ä¸ªç»´åº¦æ¡¥æ¥(å¦‚æ‰‹æœºä¸Šè¿è¡Œè½¯ä»¶å’Œäººè¿™ 2 ä¸ªç»´åº¦, å¯ä»¥è¿›è¡Œæ¡¥æ¥, ç»„æˆ 3 ç»´åº¦åµŒå¥—æ¡¥æ¥).</span><br><span class="line">	</span><br><span class="line">ç¤ºä¾‹: JDBC è·å–è¿æ¥, è·å–è¿æ¥æ˜¯ä¸€ä¸ªç»´åº¦, æ•°æ®åº“æ˜¯ä¸€ä¸ªç»´åº¦, æ•°æ®åº“æœ‰å¤šä¸ª, æ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªæ•°æ®åº“ç»´åº¦å˜åŒ–, å¦ä¸€ç»´åº¦ä¸å˜çš„æ¡¥æ¥æ¨¡å¼.</span><br></pre></td></tr></table></figure>

<h4 id="äº«å…ƒæ¨¡å¼"><a href="#äº«å…ƒæ¨¡å¼" class="headerlink" title="äº«å…ƒæ¨¡å¼"></a>äº«å…ƒæ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	åˆ©ç”¨å…±äº«çš„æ–¹å¼æ¥æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡ä¸€éƒ¨åˆ†å†…éƒ¨çŠ¶æ€æ˜¯ç›¸åŒçš„ã€‚</span><br><span class="line">	å¦‚å¸¸è§çš„ çº¿ç¨‹æ± , å¸¸é‡æ± ç­‰, ä½¿å¾—å¯¹è±¡çš„è·å–é€Ÿåº¦åŠ å¿«.</span><br><span class="line">	</span><br><span class="line">ç¤ºä¾‹: java.lang.Integer#valueOf() java.lang.Boolean#valueOf()</span><br></pre></td></tr></table></figure>

<h4 id="ç»„åˆæ¨¡å¼"><a href="#ç»„åˆæ¨¡å¼" class="headerlink" title="ç»„åˆæ¨¡å¼"></a>ç»„åˆæ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„æ¥è¡¨ç¤ºâ€œæ•´ä½“&#x2F;éƒ¨åˆ†â€å±‚æ¬¡å…³ç³»ï¼Œå…è®¸ç”¨æˆ·ä»¥ç›¸åŒçš„æ–¹å¼å¤„ç†å•ç‹¬å¯¹è±¡å’Œç»„åˆå¯¹è±¡ã€‚</span><br><span class="line">	ä¸€èˆ¬éœ€è¦éƒ¨åˆ†å’Œæ•´ä½“å…·æœ‰ä¸€å®šçš„ç›¸ä¼¼åº¦, æ‰èƒ½å¯¹å…¶è¿›è¡ŒæŠ½è±¡.</span><br><span class="line">	å¯¹éƒ¨åˆ†&#x2F;æ•´ä½“è¿›è¡ŒæŠ½è±¡, å¾—å‡ºä¸€ä¸ªå…¬å…±æŠ½è±¡ç±»æˆ–æ¥å£, å†å®ç°ç±»ä¸­æ ¹æ®å…·ä½“è§’è‰²åšä¸åŒå¤„ç†. </span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹:</span><br><span class="line">	javax.swing.JComponent#add(Component) </span><br><span class="line">  java.util.Map#putAll(Map)</span><br><span class="line">  java.util.List#addAll(Collection)</span><br><span class="line">  java.util.Set#addAll(Collection)</span><br></pre></td></tr></table></figure>

<h4 id="å¤–è§‚æ¨¡å¼"><a href="#å¤–è§‚æ¨¡å¼" class="headerlink" title="å¤–è§‚æ¨¡å¼"></a>å¤–è§‚æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œç”¨æ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£ï¼Œä»è€Œè®©å­ç³»ç»Ÿæ›´å®¹æ˜“ä½¿ç”¨.</span><br></pre></td></tr></table></figure>



<h3 id="è¡Œä¸ºå‹"><a href="#è¡Œä¸ºå‹" class="headerlink" title="è¡Œä¸ºå‹"></a>è¡Œä¸ºå‹</h3><h4 id="èŒè´£é“¾-è´£ä»»é“¾-æ¨¡å¼"><a href="#èŒè´£é“¾-è´£ä»»é“¾-æ¨¡å¼" class="headerlink" title="èŒè´£é“¾(è´£ä»»é“¾)æ¨¡å¼"></a>èŒè´£é“¾(è´£ä»»é“¾)æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œå°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾å‘é€è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢, ä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚</span><br><span class="line">	</span><br><span class="line">ç¤ºä¾‹:</span><br><span class="line">	javax.servlet.Filter#doFilter()</span><br><span class="line">	netty çš„ Handler Chain</span><br></pre></td></tr></table></figure>

<h4 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å®šä¹‰å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜æ—¶ï¼Œå®ƒçš„æ‰€æœ‰ä¾èµ–éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶ä¸”è‡ªåŠ¨æ›´æ–°çŠ¶æ€ã€‚</span><br><span class="line">	ä¸»é¢˜ï¼ˆSubjectï¼‰æ˜¯è¢«è§‚å¯Ÿçš„å¯¹è±¡ï¼Œè€Œå…¶æ‰€æœ‰ä¾èµ–è€…ï¼ˆObserverï¼‰ç§°ä¸ºè§‚å¯Ÿè€…ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹: </span><br><span class="line">	swing çš„äº‹ä»¶ç›‘å¬(æŒ‰é’®äº‹ä»¶, é¼ æ ‡äº‹ä»¶)</span><br><span class="line">	JS çš„ äº‹ä»¶ç›‘å¬</span><br></pre></td></tr></table></figure>

<h4 id="çŠ¶æ€æ¨¡å¼"><a href="#çŠ¶æ€æ¨¡å¼" class="headerlink" title="çŠ¶æ€æ¨¡å¼"></a>çŠ¶æ€æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥å¥½åƒä¿®æ”¹äº†å®ƒæ‰€å±çš„ç±»ã€‚</span><br><span class="line">	çŠ¶æ€æ¨¡å¼ä¸»è¦æ˜¯ç”¨æ¥è§£å†³çŠ¶æ€è½¬ç§»çš„é—®é¢˜ï¼Œå½“çŠ¶æ€å‘ç”Ÿè½¬ç§»äº†ï¼Œé‚£ä¹ˆ Context å¯¹è±¡å°±ä¼šæ”¹å˜å®ƒçš„è¡Œä¸º.</span><br></pre></td></tr></table></figure>

<h4 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œå°è£…æ¯ä¸ªç®—æ³•ï¼Œå¹¶ä½¿å®ƒä»¬å¯ä»¥äº’æ¢ã€‚</span><br><span class="line">	ç­–ç•¥æ¨¡å¼å¯ä»¥è®©ç®—æ³•ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·ç«¯ã€‚</span><br><span class="line">	ç­–ç•¥æ¨¡å¼ä¸»è¦æ˜¯ç”¨æ¥å°è£…ä¸€ç»„å¯ä»¥äº’ç›¸æ›¿ä»£çš„ç®—æ³•æ—ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€åœ°å»æ›¿æ¢ Context ä½¿ç”¨çš„ç®—æ³•.</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹: java.util.Comparator#compare() javax.servlet.http.HttpServlet</span><br></pre></td></tr></table></figure>

<h4 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼" class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"></a>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å®šä¹‰ç®—æ³•æ¡†æ¶ï¼Œå¹¶å°†ä¸€äº›æ­¥éª¤çš„å®ç°å»¶è¿Ÿåˆ°å­ç±»ã€‚</span><br><span class="line">	é€šè¿‡æ¨¡æ¿æ–¹æ³•ï¼Œå­ç±»å¯ä»¥é‡æ–°å®šä¹‰ç®—æ³•çš„æŸäº›æ­¥éª¤ï¼Œè€Œä¸ç”¨æ”¹å˜ç®—æ³•çš„ç»“æ„ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹: java.util.Collections#sort()</span><br></pre></td></tr></table></figure>

<h4 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	å°†ä¸€ä¸ªå¯¹è±¡(å‘½ä»¤æ¥æ”¶è€…)çš„æ¯ä¸ªæ“ä½œæ‹†åˆ†åˆ°æ¯ä¸€ä¸ªå‘½ä»¤ç±»ä¸­, å†ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ç®¡ç†ç±»æ¥ç®¡ç†è¿™äº›å‘½ä»¤. ä½¿å¾—å‘½ä»¤å¯ä»¥æ”¾å…¥é˜Ÿåˆ—ä¸­æœ‰åºæ‰§è¡Œ, ä¸”å¯ä»¥ç»Ÿä¸€è®°å½•å‘½ä»¤çš„æ“ä½œæ—¥å¿—, è¿˜å¯ä»¥æ”¯æŒæ’¤é”€æ“ä½œ(æ¯ä¸ªå‘½ä»¤éƒ½å®ç°å¯¹åº”çš„æ’¤é”€å³å¯).</span><br><span class="line">	æ­¤æ¨¡å¼çš„å¥½å¤„æ˜¯, è‹¥å°†å‘½ä»¤æŠ½è±¡ä¸ºå‡ ä¸ªæ ‡å‡†çš„å‘½ä»¤(å¦‚å¼€,å…³), ç„¶åç®¡ç†å¤šä¸ªå‘½ä»¤æ¥æ”¶è€…(å¦‚ç¯,ç”µè§†æœº,ç©ºè°ƒ)çš„æ“ä½œ, å¯ä½¿æ–°å¢å‘½ä»¤æ¥æ”¶è€…å˜å¾—ç®€å•, å³æ‰©å±•æ€§å¥½.</span><br><span class="line">	</span><br><span class="line">	åˆç§°ä¸‡èƒ½é¥æ§å™¨.</span><br></pre></td></tr></table></figure>

<h4 id="ä¸­ä»‹æ¨¡å¼"><a href="#ä¸­ä»‹æ¨¡å¼" class="headerlink" title="ä¸­ä»‹æ¨¡å¼"></a>ä¸­ä»‹æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	é›†ä¸­ç›¸å…³å¯¹è±¡ä¹‹é—´å¤æ‚çš„æ²Ÿé€šå’Œæ§åˆ¶æ–¹å¼ã€‚é™ä½å­ç³»ç»Ÿä¹‹é—´çš„è€¦åˆ.</span><br><span class="line">	ç±»ä¼¼ä¸€ä¸ªæ¶ˆæ¯æ”¶å‘ä¸­å¿ƒ, è´Ÿè´£å­—ç³»ç»Ÿçš„æ¶ˆæ¯ä¸­è½¬, ä½¿å¾—å­ç³»ç»Ÿä¹‹é—´å¯ä»¥è¿›è¡Œä¸€å®šçš„äº¤äº’.</span><br><span class="line">	</span><br><span class="line">ç¤ºä¾‹: çº¿ç¨‹æ± ç®¡ç†è€…çº¿ç¨‹å’Œè¦æ‰§è¡Œçš„ä»»åŠ¡.</span><br></pre></td></tr></table></figure>

<h4 id="å¤‡å¿˜å½•æ¨¡å¼"><a href="#å¤‡å¿˜å½•æ¨¡å¼" class="headerlink" title="å¤‡å¿˜å½•æ¨¡å¼"></a>å¤‡å¿˜å½•æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	åœ¨ä¸è¿åå°è£…çš„æƒ…å†µä¸‹è·å¾—å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œä»è€Œåœ¨éœ€è¦æ—¶å¯ä»¥å°†å¯¹è±¡æ¢å¤åˆ°æœ€åˆçŠ¶æ€ã€‚</span><br><span class="line">	å¦‚å¯¹æ¸¸æˆçš„å½“å‰çŠ¶æ€è¿›è¡Œä¸€ä¸ªä¿å­˜, ç„¶ååœ¨åç»­æ¸¸æˆä¸­æ­»äº¡åå¯ä»¥è¯»å–è¿™ä¸ªçŠ¶æ€é‡æ–°å¼€å§‹.</span><br></pre></td></tr></table></figure>

<h4 id="è®¿é—®è€…æ¨¡å¼"><a href="#è®¿é—®è€…æ¨¡å¼" class="headerlink" title="è®¿é—®è€…æ¨¡å¼"></a>è®¿é—®è€…æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åŸç†: </span><br><span class="line">	ä¸ºä¸€ä¸ªå¯¹è±¡ç»“æ„ï¼ˆæ¯”å¦‚ç»„åˆç»“æ„ï¼‰å¢åŠ æ–°èƒ½åŠ›ã€‚</span><br><span class="line">	ä½¿ç”¨è®¿é—®è€…æ¨¡å¼å¯å®ç°é‡è½½çš„åŠ¨æ€ç»‘å®š(å³ä¼ªåŒåˆ†æ´¾), æ•ˆæœä¸é‡è½½æ–¹æ³•å†…ä½¿ç”¨ instanceof æ˜¯ä¸€æ ·çš„, ä½†ä½¿ç”¨è®¿é—®è€…æ¨¡å¼, å¯æ‰©å±•æ€§æ›´å¥½.</span><br></pre></td></tr></table></figure>

<h4 id="è¿­ä»£å™¨æ¨¡å¼"><a href="#è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="è¿­ä»£å™¨æ¨¡å¼"></a>è¿­ä»£å™¨æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	æä¾›ä¸€ç§é¡ºåºè®¿é—®èšåˆå¯¹è±¡å…ƒç´ çš„æ–¹æ³•ï¼Œå¹¶ä¸”ä¸æš´éœ²èšåˆå¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹: java.util.Iterator</span><br></pre></td></tr></table></figure>

<h4 id="è§£é‡Šå™¨æ¨¡å¼"><a href="#è§£é‡Šå™¨æ¨¡å¼" class="headerlink" title="è§£é‡Šå™¨æ¨¡å¼"></a>è§£é‡Šå™¨æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	ä¸ºè¯­è¨€åˆ›å»ºè§£é‡Šå™¨ï¼Œé€šå¸¸ç”±è¯­è¨€çš„è¯­æ³•å’Œè¯­æ³•åˆ†ææ¥å®šä¹‰ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹: EL è¡¨è¾¾å¼, Freemakeræ¨¡æ¿</span><br></pre></td></tr></table></figure>

<h4 id="ç©ºå¯¹è±¡æ¨¡å¼"><a href="#ç©ºå¯¹è±¡æ¨¡å¼" class="headerlink" title="ç©ºå¯¹è±¡æ¨¡å¼"></a>ç©ºå¯¹è±¡æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åŸç†:</span><br><span class="line">	ä½¿ç”¨ä»€ä¹ˆéƒ½ä¸åšçš„ç©ºå¯¹è±¡æ¥ä»£æ›¿ NULL, é¿å…ç©ºå¯¹è±¡åˆ¤æ–­, é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸.</span><br></pre></td></tr></table></figure>






      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://gudqs7.github.io/2020/05/20/explain-note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="gudqs7">
      <meta itemprop="description" content="å¿ƒç´¯æ²¡é’±èººå°¸ä¸­">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gudqs7's note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/20/explain-note/" class="post-title-link" itemprop="url">MySQL-Explain-Note</a>
        </h2>

        <div class="post-meta">
			
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-05-20 08:48:14" itemprop="dateCreated datePublished" datetime="2020-05-20T08:48:14+08:00">2020-05-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-01-22 13:39:17" itemprop="dateModified" datetime="2021-01-22T13:39:17+08:00">2021-01-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2020/05/20/explain-note/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/20/explain-note/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="explain-è¯­æ³•"><a href="#explain-è¯­æ³•" class="headerlink" title="explain è¯­æ³•"></a>explain è¯­æ³•</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> mysql.user;</span><br></pre></td></tr></table></figure>

<h3 id="explain-è¾“å‡º"><a href="#explain-è¾“å‡º" class="headerlink" title="explain è¾“å‡º"></a>explain è¾“å‡º</h3><table>
<thead>
<tr>
<th align="left">id</th>
<th align="left">select_type</th>
<th align="left">table</th>
<th align="left">partitions</th>
<th align="left">type</th>
<th align="left">possible_keys</th>
<th align="left">key</th>
<th align="left">key_len</th>
<th align="left">ref</th>
<th align="center">rows</th>
<th align="left">filtered</th>
<th align="left">Extra</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">SIMPLE</td>
<td align="left">NULL</td>
<td align="left">NULL</td>
<td align="left">NULL</td>
<td align="left">NULL</td>
<td align="left">NULL</td>
<td align="left">NULL</td>
<td align="left">NULL</td>
<td align="center">NULL</td>
<td align="left">NULL</td>
<td align="left"></td>
</tr>
</tbody></table>
<h4 id="æ¯åˆ—ç®€å•å«ä¹‰"><a href="#æ¯åˆ—ç®€å•å«ä¹‰" class="headerlink" title="æ¯åˆ—ç®€å•å«ä¹‰"></a>æ¯åˆ—ç®€å•å«ä¹‰</h4><table>
<thead>
<tr>
<th>Column</th>
<th>JSON Name</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_id" target="_blank" rel="noopener"><code>id</code></a></td>
<td><code>select_id</code></td>
<td align="left">æ‰§è¡Œç¼–å·</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_select_type" target="_blank" rel="noopener"><code>select_type</code></a></td>
<td>None</td>
<td align="left">æ¯ä¸ªæ‰§è¡Œçš„ç±»å‹(SIMPLE|PRIMARY|UNION|SUBQUERY|DERIVED)</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_table" target="_blank" rel="noopener"><code>table</code></a></td>
<td><code>table_name</code></td>
<td align="left">æ¯ä¸ªæ‰§è¡Œçš„è¡¨å(å®é™…è¡¨åæˆ–å¼•ç”¨å…¶ä»–æ‰§è¡Œ)</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_partitions" target="_blank" rel="noopener"><code>partitions</code></a></td>
<td><code>partitions</code></td>
<td align="left">The matching partitions</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_type" target="_blank" rel="noopener"><code>type</code></a></td>
<td><code>access_type</code></td>
<td align="left">The join type</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_possible_keys" target="_blank" rel="noopener"><code>possible_keys</code></a></td>
<td><code>possible_keys</code></td>
<td align="left">é¢„æµ‹ä¼šä½¿ç”¨çš„ç´¢å¼•</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_key" target="_blank" rel="noopener"><code>key</code></a></td>
<td><code>key</code></td>
<td align="left">The index actually chosen</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_key_len" target="_blank" rel="noopener"><code>key_len</code></a></td>
<td><code>key_length</code></td>
<td align="left">The length of the chosen key</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_ref" target="_blank" rel="noopener"><code>ref</code></a></td>
<td><code>ref</code></td>
<td align="left">The columns compared to the index</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_rows" target="_blank" rel="noopener"><code>rows</code></a></td>
<td><code>rows</code></td>
<td align="left">è¡¨ç¤ºMySQLæ ¹æ®è¡¨ç»Ÿè®¡ä¿¡æ¯åŠç´¢å¼•é€‰ç”¨æƒ…å†µï¼Œä¼°ç®—çš„æ‰¾åˆ°æ‰€éœ€çš„è®°å½•æ‰€éœ€è¦è¯»å–çš„è¡Œæ•°</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_filtered" target="_blank" rel="noopener"><code>filtered</code></a></td>
<td><code>filtered</code></td>
<td align="left">æŒ‰è¡¨æ¡ä»¶è¿‡æ»¤çš„è¡Œç™¾åˆ†æ¯”</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_extra" target="_blank" rel="noopener"><code>Extra</code></a></td>
<td>None</td>
<td align="left">åŒ…å«MySQLè§£å†³æŸ¥è¯¢çš„è¯¦ç»†ä¿¡æ¯</td>
</tr>
</tbody></table>
<h4 id="å«ä¹‰è¯¦è§£"><a href="#å«ä¹‰è¯¦è§£" class="headerlink" title="å«ä¹‰è¯¦è§£"></a>å«ä¹‰è¯¦è§£</h4><h5 id="select-type"><a href="#select-type" class="headerlink" title="select_type"></a>select_type</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(1) SIMPLE(ç®€å•SELECT,ä¸ä½¿ç”¨UNIONæˆ–å­æŸ¥è¯¢ç­‰)</span><br><span class="line">(2) PRIMARY(æŸ¥è¯¢ä¸­è‹¥åŒ…å«ä»»ä½•å¤æ‚çš„å­éƒ¨åˆ†,æœ€å¤–å±‚çš„selectè¢«æ ‡è®°ä¸ºPRIMARY)</span><br><span class="line">(3) UNION(UNIONä¸­çš„ç¬¬äºŒä¸ªæˆ–åé¢çš„SELECTè¯­å¥)</span><br><span class="line">(4) DEPENDENT UNION(UNIONä¸­çš„ç¬¬äºŒä¸ªæˆ–åé¢çš„SELECTè¯­å¥ï¼Œå–å†³äºå¤–é¢çš„æŸ¥è¯¢)</span><br><span class="line">(5) UNION RESULT(UNIONçš„ç»“æœ)</span><br><span class="line">(6) SUBQUERY(å­æŸ¥è¯¢ä¸­çš„ç¬¬ä¸€ä¸ªSELECT)</span><br><span class="line">(7) DEPENDENT SUBQUERY(å­æŸ¥è¯¢ä¸­çš„ç¬¬ä¸€ä¸ªSELECTï¼Œå–å†³äºå¤–é¢çš„æŸ¥è¯¢)</span><br><span class="line">(8) DERIVED(æ´¾ç”Ÿè¡¨çš„SELECT, FROMå­å¥çš„å­æŸ¥è¯¢)</span><br><span class="line">(9) UNCACHEABLE SUBQUERY(ä¸€ä¸ªå­æŸ¥è¯¢çš„ç»“æœä¸èƒ½è¢«ç¼“å­˜ï¼Œå¿…é¡»é‡æ–°è¯„ä¼°å¤–é“¾æ¥çš„ç¬¬ä¸€è¡Œ)</span><br></pre></td></tr></table></figure>

<h5 id="type"><a href="#type" class="headerlink" title="type"></a>type</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(1) ALLï¼šFull Table Scanï¼Œ MySQLå°†éå†å…¨è¡¨ä»¥æ‰¾åˆ°åŒ¹é…çš„è¡Œ</span><br><span class="line">(2) index: Full Index Scanï¼Œindexä¸ALLåŒºåˆ«ä¸ºindexç±»å‹åªéå†ç´¢å¼•æ ‘</span><br><span class="line">(3) range:åªæ£€ç´¢ç»™å®šèŒƒå›´çš„è¡Œï¼Œä½¿ç”¨ä¸€ä¸ªç´¢å¼•æ¥é€‰æ‹©è¡Œ</span><br><span class="line">(4) ref: è¡¨ç¤ºä¸Šè¿°è¡¨çš„è¿æ¥åŒ¹é…æ¡ä»¶ï¼Œå³å“ªäº›åˆ—æˆ–å¸¸é‡è¢«ç”¨äºæŸ¥æ‰¾ç´¢å¼•åˆ—ä¸Šçš„å€¼</span><br><span class="line">(5) eq_ref: ç±»ä¼¼refï¼ŒåŒºåˆ«å°±åœ¨ä½¿ç”¨çš„ç´¢å¼•æ˜¯å”¯ä¸€ç´¢å¼•ï¼Œå¯¹äºæ¯ä¸ªç´¢å¼•é”®å€¼ï¼Œè¡¨ä¸­åªæœ‰ä¸€æ¡è®°å½•åŒ¹é…ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¤šè¡¨è¿æ¥ä¸­ä½¿ç”¨primary keyæˆ–è€… unique keyä½œä¸ºå…³è”æ¡ä»¶</span><br><span class="line">(6) constã€system: å½“MySQLå¯¹æŸ¥è¯¢æŸéƒ¨åˆ†è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶è½¬æ¢ä¸ºä¸€ä¸ªå¸¸é‡æ—¶ï¼Œä½¿ç”¨è¿™äº›ç±»å‹è®¿é—®ã€‚å¦‚å°†ä¸»é”®ç½®äºwhereåˆ—è¡¨ä¸­ï¼ŒMySQLå°±èƒ½å°†è¯¥æŸ¥è¯¢è½¬æ¢ä¸ºä¸€ä¸ªå¸¸é‡,systemæ˜¯constç±»å‹çš„ç‰¹ä¾‹ï¼Œå½“æŸ¥è¯¢çš„è¡¨åªæœ‰ä¸€è¡Œçš„æƒ…å†µä¸‹ï¼Œå³ä¸ºsystem</span><br><span class="line">(7) NULL: MySQLåœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­åˆ†è§£è¯­å¥ï¼Œæ‰§è¡Œæ—¶ç”šè‡³ä¸ç”¨è®¿é—®è¡¨æˆ–ç´¢å¼•ï¼Œä¾‹å¦‚ä»ä¸€ä¸ªç´¢å¼•åˆ—é‡Œé€‰å–æœ€å°å€¼å¯ä»¥é€šè¿‡å•ç‹¬ç´¢å¼•æŸ¥æ‰¾å®Œæˆã€‚</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒæ–‡æ¡£: <a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain-join-types" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain-join-types</a></p>
<h5 id="extra"><a href="#extra" class="headerlink" title="extra"></a>extra</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(1) Using <span class="built_in">where</span>:åˆ—æ•°æ®æ˜¯ä»ä»…ä»…ä½¿ç”¨äº†ç´¢å¼•ä¸­çš„ä¿¡æ¯è€Œæ²¡æœ‰è¯»å–å®é™…çš„è¡ŒåŠ¨çš„è¡¨è¿”å›çš„ï¼Œè¿™å‘ç”Ÿåœ¨å¯¹è¡¨çš„å…¨éƒ¨çš„è¯·æ±‚åˆ—éƒ½æ˜¯åŒä¸€ä¸ªç´¢å¼•çš„éƒ¨åˆ†çš„æ—¶å€™ï¼Œè¡¨ç¤ºmysqlæœåŠ¡å™¨å°†åœ¨å­˜å‚¨å¼•æ“æ£€ç´¢è¡Œåå†è¿›è¡Œè¿‡æ»¤</span><br><span class="line">(2) Using temporaryï¼šè¡¨ç¤ºMySQLéœ€è¦ä½¿ç”¨ä¸´æ—¶è¡¨æ¥å­˜å‚¨ç»“æœé›†ï¼Œå¸¸è§äºæ’åºå’Œåˆ†ç»„æŸ¥è¯¢</span><br><span class="line">(3) Using filesortï¼šMySQLä¸­æ— æ³•åˆ©ç”¨ç´¢å¼•å®Œæˆçš„æ’åºæ“ä½œç§°ä¸ºâ€œæ–‡ä»¶æ’åºâ€</span><br><span class="line">(4) Using join bufferï¼šæ”¹å€¼å¼ºè°ƒäº†åœ¨è·å–è¿æ¥æ¡ä»¶æ—¶æ²¡æœ‰ä½¿ç”¨ç´¢å¼•ï¼Œå¹¶ä¸”éœ€è¦è¿æ¥ç¼“å†²åŒºæ¥å­˜å‚¨ä¸­é—´ç»“æœã€‚å¦‚æœå‡ºç°äº†è¿™ä¸ªå€¼ï¼Œé‚£åº”è¯¥æ³¨æ„ï¼Œæ ¹æ®æŸ¥è¯¢çš„å…·ä½“æƒ…å†µå¯èƒ½éœ€è¦æ·»åŠ ç´¢å¼•æ¥æ”¹è¿›èƒ½ã€‚ï¼ˆå¦‚ç»™å…³è”è¡¨å³è¡Œè®°å½•çš„tableçš„å…³è”åˆ—åŠ ç´¢å¼•ï¼‰</span><br><span class="line">(5) Impossible <span class="built_in">where</span>ï¼šè¿™ä¸ªå€¼å¼ºè°ƒäº†<span class="built_in">where</span>è¯­å¥ä¼šå¯¼è‡´æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„è¡Œã€‚</span><br><span class="line">(6) Select tables optimized awayï¼šè¿™ä¸ªå€¼æ„å‘³ç€ä»…é€šè¿‡ä½¿ç”¨ç´¢å¼•ï¼Œä¼˜åŒ–å™¨å¯èƒ½ä»…ä»èšåˆå‡½æ•°ç»“æœä¸­è¿”å›ä¸€è¡Œ</span><br><span class="line">(7) Using Index: ä»…ä½¿ç”¨ç´¢å¼•æ ‘ä¸­çš„ä¿¡æ¯ä»è¡¨ä¸­æ£€ç´¢åˆ—ä¿¡æ¯ï¼Œè€Œä¸å¿…è¿›è¡Œå…¶ä»–æŸ¥æ‰¾ä»¥è¯»å–å®é™…è¡Œã€‚å½“æŸ¥è¯¢ä»…ä½¿ç”¨å±äºå•ä¸ªç´¢å¼•çš„åˆ—æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ­¤ç­–ç•¥ã€‚</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒæ–‡æ¡£: <a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain-extra-information" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain-extra-information</a></p>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><blockquote>
<p>ä¸€èˆ¬å…ˆé’ˆå¯¹ type, å°† type è°ƒä¼˜åˆ° ref, range, index çº§åˆ«</p>
<p>ç„¶åæŸ¥çœ‹ extra ä¿¡æ¯, å°½é‡æ¶ˆé™¤ using filesort, using join buffer, using temporary, using where</p>
<p>é’ˆå¯¹å¤æ‚çš„æŸ¥è¯¢æ¡ä»¶, å»ºè®®æ·»åŠ å¤åˆç´¢å¼•ä¸”ç¡®ä¿å¤åˆç´¢å¼•æœ‰æ•ˆä½¿ç”¨(ä¸è·¨åˆ—,æŒ‰é¡ºåº,æœ€å·¦åŸåˆ™)</p>
</blockquote>
<h4 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.Using Join Buffer: å¯¹å…³è”åˆ—åŠ ç´¢å¼•æ˜¯æ²¡é”™, ä½†è®°ä½æ˜¯å…³è”è¡¨åŠ , è€Œä¸æ˜¯ä¸»è¡¨.</span><br><span class="line">2.ä½¿ç”¨Explainæ—¶, SQLè¯­å¥ä¸­çš„æ¡ä»¶æœ€å¥½ä¸è¦å¤ªçœŸå®, å¯èƒ½ä¼šå½±å“åˆ†æ(å¦‚ä¸€å¼ è¡¨å…¨éƒ¨éƒ½æ˜¯sex=ç”·, sexåŠ ç´¢å¼•, ç„¶åä½¿ç”¨explainåˆ†ææ—¶å¸¦ä¸Š<span class="built_in">where</span> sex=<span class="string">'ç”·'</span>, åˆ†æç»“æœçš„<span class="built_in">type</span>ä¼šæ˜¯ALL, ä½†å¦‚æœsex=<span class="string">''</span>, åˆ™<span class="built_in">type</span>ä¸ºref)</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://gudqs7.github.io/2020/05/20/fabric-2.0-install-guide/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="gudqs7">
      <meta itemprop="description" content="å¿ƒç´¯æ²¡é’±èººå°¸ä¸­">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gudqs7's note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/20/fabric-2.0-install-guide/" class="post-title-link" itemprop="url">Fabric-2.0-install-guide</a>
        </h2>

        <div class="post-meta">
			
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-05-20 08:48:14" itemprop="dateCreated datePublished" datetime="2020-05-20T08:48:14+08:00">2020-05-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-01-22 13:39:17" itemprop="dateModified" datetime="2021-01-22T13:39:17+08:00">2021-01-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/blockchain/" itemprop="url" rel="index"><span itemprop="name">blockchain</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/blockchain/fabric/" itemprop="url" rel="index"><span itemprop="name">fabric</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2020/05/20/fabric-2.0-install-guide/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/20/fabric-2.0-install-guide/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="åŸºæœ¬ç¯å¢ƒå‡†å¤‡"><a href="#åŸºæœ¬ç¯å¢ƒå‡†å¤‡" class="headerlink" title="åŸºæœ¬ç¯å¢ƒå‡†å¤‡"></a>åŸºæœ¬ç¯å¢ƒå‡†å¤‡</h3><ul>
<li>Docker</li>
<li>docker-compose</li>
<li>docker é˜¿é‡Œé•œåƒåŠ é€Ÿ</li>
<li>Git</li>
</ul>
<h4 id="å¯¹äº-Mac"><a href="#å¯¹äº-Mac" class="headerlink" title="å¯¹äº Mac"></a>å¯¹äº Mac</h4><blockquote>
<p>ä¸Šè¯‰ç¯å¢ƒåªéœ€è¦ä¸‹è½½ dockerçš„ dmg å®‰è£…åå³å¯æ‹¥æœ‰ docker å’Œ docker-compose</p>
</blockquote>
<h4 id="å¯¹äº-CentOs"><a href="#å¯¹äº-CentOs" class="headerlink" title="å¯¹äº CentOs"></a>å¯¹äº CentOs</h4><h5 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sudo yum update</span><br><span class="line"><span class="comment"># ç§»é™¤æ—§ç‰ˆæœ¬</span></span><br><span class="line">yum remove docker docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-selinux docker-engine-selinux docker-engine</span><br><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line">sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®‰è£… docker</span></span><br><span class="line">sudo yum install docker-ce</span><br><span class="line">sudo systemctl start docker</span><br><span class="line"><span class="comment"># å¼€æœºå¯åŠ¨</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> docker</span><br><span class="line"><span class="comment"># éªŒè¯</span></span><br><span class="line">docker --version</span><br></pre></td></tr></table></figure>

<h5 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -L <span class="string">"https://github.com/docker/compose/releases/download/1.22.0/docker-compose-(unameâˆ’s)âˆ’(uname -m)"</span> -o /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure>

<h5 id="git"><a href="#git" class="headerlink" title="git"></a>git</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y git</span><br></pre></td></tr></table></figure>

<h5 id="go"><a href="#go" class="headerlink" title="go"></a>go</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">wget -c https://studygolang.com/dl/golang/go1.14.linux-amd64.tar.gz</span><br><span class="line">tar -C /usr/<span class="built_in">local</span>/ -zxvf go1.14.linux-amd64.tar.gz</span><br><span class="line">vi /etc/profile</span><br><span class="line"><span class="comment"># æ–°å¢</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/<span class="built_in">local</span>/go/bin</span><br><span class="line"><span class="built_in">export</span> GOROOT=/usr/<span class="built_in">local</span>/go</span><br><span class="line"><span class="built_in">export</span> GOPATH=/root/go/</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"><span class="comment">#éªŒè¯ </span></span><br><span class="line">go version</span><br></pre></td></tr></table></figure>



<h3 id="ä¸‹è½½æ–‡ä»¶åŠ-docker-é•œåƒ"><a href="#ä¸‹è½½æ–‡ä»¶åŠ-docker-é•œåƒ" class="headerlink" title="ä¸‹è½½æ–‡ä»¶åŠ docker é•œåƒ"></a>ä¸‹è½½æ–‡ä»¶åŠ docker é•œåƒ</h3><h4 id="ä¸€é”®è„šæœ¬"><a href="#ä¸€é”®è„šæœ¬" class="headerlink" title="ä¸€é”®è„šæœ¬"></a>ä¸€é”®è„šæœ¬</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://bit.ly/2ysbOFE | bash -s -- 2.0.0 1.4.4 0.4.18</span><br></pre></td></tr></table></figure>

<ul>
<li>2.0.0ï¼šè¡¨ç¤ºHyperledger Fabricçš„ç‰ˆæœ¬å·</li>
<li>1.4.4ï¼šè¡¨ç¤ºFabric CAçš„ç‰ˆæœ¬å·</li>
<li>0.4.18ï¼šè¡¨ç¤ºç¬¬ä¸‰æ–¹å¼•ç”¨çš„ç‰ˆæœ¬å·</li>
</ul>
<h4 id="åŠ é€ŸæŠ€å·§"><a href="#åŠ é€ŸæŠ€å·§" class="headerlink" title="åŠ é€ŸæŠ€å·§"></a>åŠ é€ŸæŠ€å·§</h4><blockquote>
<p>é¦–å…ˆè‡ªå·±æ•´ä¸ªç§‘å­¦ä¸Šç½‘, è®¾ç½®å¥½ http ä»£ç†ç«¯å£(å¦‚ 1087)</p>
</blockquote>
<p>ç„¶ååœ¨docker åå¥½è®¾ç½®ä¸­è®¾ç½®ä»£ç†, å¦‚ä¸‹å›¾</p>
<p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gcolmgcgpfj30rs0s60wn.jpg" alt="image-20200310095814860"></p>
<p>è®¾ç½®å®Œæˆåç‚¹å‡» Apply &amp; Restart é‡å¯ç”Ÿæ•ˆ.</p>
<blockquote>
<p>è‹¥æ²¡æœ‰ç§‘å­¦ä¸Šç½‘, åˆ™å¯ä»¥æ‰‹åŠ¨æ‰§è¡Œ docker pull å‘½ä»¤, å•ä¸ªæ‰§è¡Œä¸å®¹æ˜“å¡ä½</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">docker pull hyperledger/fabric-peer:2.0.0</span><br><span class="line">docker pull hyperledger/fabric-orderer:2.0.0</span><br><span class="line">docker pull hyperledger/fabric-ccenv:2.0.0</span><br><span class="line">docker pull hyperledger/fabric-tools:2.0.0</span><br><span class="line">docker pull hyperledger/fabric-nodeenv:2.0.0</span><br><span class="line">docker pull hyperledger/fabric-baseos:2.0.0</span><br><span class="line">docker pull hyperledger/fabric-javaenv:2.0.0</span><br><span class="line">docker pull hyperledger/fabric-ca:1.4.4</span><br><span class="line">docker pull hyperledger/fabric-zookeeper:0.4.18</span><br><span class="line">docker pull hyperledger/fabric-kafka:0.4.18</span><br><span class="line">docker pull hyperledger/fabric-couchdb:0.4.18</span><br></pre></td></tr></table></figure>

<h4 id="æœ€åæ£€æŸ¥"><a href="#æœ€åæ£€æŸ¥" class="headerlink" title="æœ€åæ£€æŸ¥"></a>æœ€åæ£€æŸ¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> fabric-samples/bin</span><br><span class="line">ls -l</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:$(<span class="built_in">pwd</span>)</span><br><span class="line">orderer version</span><br></pre></td></tr></table></figure>

<blockquote>
<p>1.å­˜åœ¨ bin ç›®å½•</p>
<p>2.bin ä¸‹å­˜åœ¨ orderer ç­‰å¯æ‰§è¡Œæ–‡ä»¶</p>
<p>3.å°† bin æ·»åŠ åˆ° PATH ä¸‹</p>
<p>4.æ£€æŸ¥ orderer ç‰ˆæœ¬æ˜¯å¦æ­£ç¡®</p>
</blockquote>
<h4 id="æµ‹è¯•ç½‘ç»œ"><a href="#æµ‹è¯•ç½‘ç»œ" class="headerlink" title="æµ‹è¯•ç½‘ç»œ"></a>æµ‹è¯•ç½‘ç»œ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> fabric-samples/<span class="built_in">test</span>-network</span><br><span class="line"><span class="comment">#æ³¨æ„ä¼šåˆ é™¤å…¨éƒ¨å®¹å™¨</span></span><br><span class="line">docker stop $(docker ps -q) </span><br><span class="line">docker rm $(docker ps -aq)</span><br><span class="line">./network.sh up</span><br></pre></td></tr></table></figure>

<blockquote>
<p>1.è¿›å…¥æµ‹è¯•ç½‘ç»œç›®å½•</p>
<p>2.åœæ­¢å¹¶åˆ é™¤ä¹‹å‰çš„å®¹å™¨é˜²æ­¢å‘½åå†²çª</p>
<p>3.è¿è¡Œæµ‹è¯•ç½‘ç»œ(é€šè¿‡ docker-compose)</p>
</blockquote>
<h3 id="é“¾ç å…¥é—¨ç¤ºä¾‹-æ™ºèƒ½åˆçº¦"><a href="#é“¾ç å…¥é—¨ç¤ºä¾‹-æ™ºèƒ½åˆçº¦" class="headerlink" title="é“¾ç å…¥é—¨ç¤ºä¾‹(æ™ºèƒ½åˆçº¦)"></a>é“¾ç å…¥é—¨ç¤ºä¾‹(æ™ºèƒ½åˆçº¦)</h3><h4 id="å¯åŠ¨ç¯å¢ƒåŠå®‰è£…-npm"><a href="#å¯åŠ¨ç¯å¢ƒåŠå®‰è£…-npm" class="headerlink" title="å¯åŠ¨ç¯å¢ƒåŠå®‰è£… npm"></a>å¯åŠ¨ç¯å¢ƒåŠå®‰è£… npm</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> fabric-samples/fabcar</span><br><span class="line"><span class="comment">#å°†å¯åŠ¨ first-network ç¯å¢ƒ, ç„¶åå°†æ—©å·²å­˜åœ¨é•œåƒä¸­çš„é“¾ç ä»£ç æ‰“åŒ…, å®‰è£…, éªŒè¯, æäº¤, ä½¿å…¶å¯æ‰§è¡Œ</span></span><br><span class="line">./startFabric.sh javascript</span><br><span class="line"><span class="built_in">cd</span> javascript</span><br><span class="line"><span class="comment"># è‡ªè¡Œå®‰è£…cnpm</span></span><br><span class="line">cnpm i</span><br></pre></td></tr></table></figure>

<h4 id="æµ‹è¯•é“¾ç "><a href="#æµ‹è¯•é“¾ç " class="headerlink" title="æµ‹è¯•é“¾ç "></a>æµ‹è¯•é“¾ç </h4><p>å®˜æ–¹æç¤º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">JavaScript:</span><br><span class="line"></span><br><span class="line">  Start by changing into the &quot;javascript&quot; directory:</span><br><span class="line">    cd javascript</span><br><span class="line"></span><br><span class="line">  Next, install all required packages:</span><br><span class="line">    npm install</span><br><span class="line"></span><br><span class="line">  Then run the following applications to enroll the admin user, and register a new user</span><br><span class="line">  called user1 which will be used by the other applications to interact with the deployed</span><br><span class="line">  FabCar contract:</span><br><span class="line">    node enrollAdmin</span><br><span class="line">    node registerUser</span><br><span class="line"></span><br><span class="line">  You can run the invoke application as follows. By default, the invoke application will</span><br><span class="line">  create a new car, but you can update the application to submit other transactions:</span><br><span class="line">    node invoke</span><br><span class="line"></span><br><span class="line">  You can run the query application as follows. By default, the query application will</span><br><span class="line">  return all cars, but you can update the application to evaluate other transactions:</span><br><span class="line">    node query</span><br></pre></td></tr></table></figure>



<blockquote>
<p>é€šè¿‡SDK(js) è°ƒç”¨åˆçº¦</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æ·»åŠ  admin ç”¨æˆ·å’Œæ™®é€šç”¨æˆ· user1</span></span><br><span class="line">node enrollAdmin.js</span><br><span class="line">node registerUser.js</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ‰§è¡Œåˆçº¦çš„ queryAll æ–¹æ³•</span></span><br><span class="line">node query.js</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ‰§è¡Œåˆçº¦çš„ createCar æ–¹æ³•</span></span><br><span class="line">node invoke.js</span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡æ–°æŸ¥è¯¢</span></span><br><span class="line">node query.js</span><br></pre></td></tr></table></figure>



<h4 id="å®é™…åˆçº¦-js-ä»£ç "><a href="#å®é™…åˆçº¦-js-ä»£ç " class="headerlink" title="å®é™…åˆçº¦(js ä»£ç )"></a>å®é™…åˆçº¦(js ä»£ç )</h4><p><code>fabric-samples/chaincode/fabcar/javascript/lib/fabcar.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * SPDX-License-Identifier: Apache-2.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; Contract &#125; = <span class="built_in">require</span>(<span class="string">'fabric-contract-api'</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FabCar</span> <span class="keyword">extends</span> <span class="title">Contract</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> initLedger(ctx) &#123;</span><br><span class="line">        <span class="built_in">console</span>.info(<span class="string">'============= START : Initialize Ledger ==========='</span>);</span><br><span class="line">        <span class="keyword">const</span> cars = [</span><br><span class="line">            &#123;</span><br><span class="line">                color: <span class="string">'blue'</span>,</span><br><span class="line">                make: <span class="string">'Toyota'</span>,</span><br><span class="line">                model: <span class="string">'Prius'</span>,</span><br><span class="line">                owner: <span class="string">'Tomoko'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                color: <span class="string">'red'</span>,</span><br><span class="line">                make: <span class="string">'Ford'</span>,</span><br><span class="line">                model: <span class="string">'Mustang'</span>,</span><br><span class="line">                owner: <span class="string">'Brad'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                color: <span class="string">'green'</span>,</span><br><span class="line">                make: <span class="string">'Hyundai'</span>,</span><br><span class="line">                model: <span class="string">'Tucson'</span>,</span><br><span class="line">                owner: <span class="string">'Jin Soo'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                color: <span class="string">'yellow'</span>,</span><br><span class="line">                make: <span class="string">'Volkswagen'</span>,</span><br><span class="line">                model: <span class="string">'Passat'</span>,</span><br><span class="line">                owner: <span class="string">'Max'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                color: <span class="string">'black'</span>,</span><br><span class="line">                make: <span class="string">'Tesla'</span>,</span><br><span class="line">                model: <span class="string">'S'</span>,</span><br><span class="line">                owner: <span class="string">'Adriana'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                color: <span class="string">'purple'</span>,</span><br><span class="line">                make: <span class="string">'Peugeot'</span>,</span><br><span class="line">                model: <span class="string">'205'</span>,</span><br><span class="line">                owner: <span class="string">'Michel'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                color: <span class="string">'white'</span>,</span><br><span class="line">                make: <span class="string">'Chery'</span>,</span><br><span class="line">                model: <span class="string">'S22L'</span>,</span><br><span class="line">                owner: <span class="string">'Aarav'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                color: <span class="string">'violet'</span>,</span><br><span class="line">                make: <span class="string">'Fiat'</span>,</span><br><span class="line">                model: <span class="string">'Punto'</span>,</span><br><span class="line">                owner: <span class="string">'Pari'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                color: <span class="string">'indigo'</span>,</span><br><span class="line">                make: <span class="string">'Tata'</span>,</span><br><span class="line">                model: <span class="string">'Nano'</span>,</span><br><span class="line">                owner: <span class="string">'Valeria'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                color: <span class="string">'brown'</span>,</span><br><span class="line">                make: <span class="string">'Holden'</span>,</span><br><span class="line">                model: <span class="string">'Barina'</span>,</span><br><span class="line">                owner: <span class="string">'Shotaro'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; cars.length; i++) &#123;</span><br><span class="line">            cars[i].docType = <span class="string">'car'</span>;</span><br><span class="line">            <span class="keyword">await</span> ctx.stub.putState(<span class="string">'CAR'</span> + i, Buffer.from(<span class="built_in">JSON</span>.stringify(cars[i])));</span><br><span class="line">            <span class="built_in">console</span>.info(<span class="string">'Added &lt;--&gt; '</span>, cars[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.info(<span class="string">'============= END : Initialize Ledger ==========='</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> queryCar(ctx, carNumber) &#123;</span><br><span class="line">        <span class="keyword">const</span> carAsBytes = <span class="keyword">await</span> ctx.stub.getState(carNumber); <span class="comment">// get the car from chaincode state</span></span><br><span class="line">        <span class="keyword">if</span> (!carAsBytes || carAsBytes.length === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`<span class="subst">$&#123;carNumber&#125;</span> does not exist`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(carAsBytes.toString());</span><br><span class="line">        <span class="keyword">return</span> carAsBytes.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> createCar(ctx, carNumber, make, model, color, owner) &#123;</span><br><span class="line">        <span class="built_in">console</span>.info(<span class="string">'============= START : Create Car ==========='</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> car = &#123;</span><br><span class="line">            color,</span><br><span class="line">            docType: <span class="string">'car'</span>,</span><br><span class="line">            make,</span><br><span class="line">            model,</span><br><span class="line">            owner,</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">await</span> ctx.stub.putState(carNumber, Buffer.from(<span class="built_in">JSON</span>.stringify(car)));</span><br><span class="line">        <span class="built_in">console</span>.info(<span class="string">'============= END : Create Car ==========='</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> queryAllCars(ctx) &#123;</span><br><span class="line">        <span class="keyword">const</span> startKey = <span class="string">'CAR0'</span>;</span><br><span class="line">        <span class="keyword">const</span> endKey = <span class="string">'CAR999'</span>;</span><br><span class="line">        <span class="keyword">const</span> allResults = [];</span><br><span class="line">        <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> &#123;key, value&#125; <span class="keyword">of</span> ctx.stub.getStateByRange(startKey, endKey)) &#123;</span><br><span class="line">            <span class="keyword">const</span> strValue = Buffer.from(value).toString(<span class="string">'utf8'</span>);</span><br><span class="line">            <span class="keyword">let</span> record;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                record = <span class="built_in">JSON</span>.parse(strValue);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(err);</span><br><span class="line">                record = strValue;</span><br><span class="line">            &#125;</span><br><span class="line">            allResults.push(&#123; <span class="attr">Key</span>: key, <span class="attr">Record</span>: record &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.info(allResults);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify(allResults);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> changeCarOwner(ctx, carNumber, newOwner) &#123;</span><br><span class="line">        <span class="built_in">console</span>.info(<span class="string">'============= START : changeCarOwner ==========='</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> carAsBytes = <span class="keyword">await</span> ctx.stub.getState(carNumber); <span class="comment">// get the car from chaincode state</span></span><br><span class="line">        <span class="keyword">if</span> (!carAsBytes || carAsBytes.length === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`<span class="subst">$&#123;carNumber&#125;</span> does not exist`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> car = <span class="built_in">JSON</span>.parse(carAsBytes.toString());</span><br><span class="line">        car.owner = newOwner;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">await</span> ctx.stub.putState(carNumber, Buffer.from(<span class="built_in">JSON</span>.stringify(car)));</span><br><span class="line">        <span class="built_in">console</span>.info(<span class="string">'============= END : changeCarOwner ==========='</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = FabCar;</span><br></pre></td></tr></table></figure>












      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="gudqs7"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">gudqs7</p>
  <div class="site-description" itemprop="description">å¿ƒç´¯æ²¡é’±èººå°¸ä¸­</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">11</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/gudqs7" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;gudqs7" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:gudqs7@gmail.com" title="E-Mail â†’ mailto:gudqs7@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">gudqs7</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://gudqs7s-note.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
